<script src="../../libs/require.js"></script>
<script src="../../libs/kalm.min.js"></script>
<script src="../../libs/kalm-websocket.min.js"></script>
<script>
	require(['kalm', 'kalm-websocket'], function(Kalm, ws) {
		// Let's measure latency
		var startTime = Date.now();

		Kalm.adapters.register('ws', ws);

    var client = new Kalm.Client({
	    hostname: 'http://127.0.0.1',	// Put your server addr
	    port: 8080,
	    adapter: 'ws'
    });

    client.channel('foo', function(payload) {
    	console.log('Server: ' + payload);
    	console.log('Took ' + (Date.now() - startTime) + 'ms');
    });

    client.on('connect', function() {
    	client.send('foo', { service: 'foo', query: 'test' });
    });
	});
</script>