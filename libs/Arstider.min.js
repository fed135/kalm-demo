(function(){var f=null;define("Arstider/Background",["Arstider/DisplayObject"],function(c){return null!=f?f:f=new c})})();
define("Arstider/Bitmap",["Arstider/Request","Arstider/Browser","Arstider/Buffer","Arstider/Preloader"],function(f,c,b,g){function a(a){a=a||{};this.attempt=0;this.url=Arstider.checkIn(a.data,a.url||"");this.data=new Image;this.callback=a.callback||null;this.width=Arstider.checkIn(a.width,0);this.height=Arstider.checkIn(a.height,0);this.id=this.url+Arstider.timestamp()+Math.random();this.load()}window.URL=void 0!=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL||{};a.prototype.load=
function(){""!=this.url&&(this.attempt++,void 0!=Arstider.blobCache[this.url]?this._fetchUrl(Arstider.blobCache[this.url].url):-1!=this.url.indexOf("data:image")?this._fetchUrl(this.url):(this.req=new f({url:this.url,caller:this,callback:this._parse,cache:!1,track:!0}),this.req.send()))};a.prototype._parse=function(a){var h=this;if(void 0==Arstider.blobCache[this.url]){var k;if(a.indexOf&&-1!=a.indexOf("data:"))k=a;else{try{k=window.URL.createObjectURL(a)}catch(b){k=null}if(!window.URL.createObjectURL||
!k){var g=new window.FileReader;g.readAsDataURL(a);g.onloadend=function(){Arstider.blobCache[h.url]={url:g.result,size:a.size};h._fetchUrl.call(h,Arstider.blobCache[h.url].url)};return}}Arstider.blobCache[this.url]={url:k,size:a.size||8*a.length}}this._fetchUrl(Arstider.blobCache[this.url].url)};a.prototype._fetchUrl=function(a,h){var k=this,b="safari"==c.name&&7>c.platformVersion;if(b&&(this.compatPrivilege=!0,Arstider.bufferPool[Arstider.tempBufferLabel+this.url]&&null!=Arstider.bufferPool[Arstider.tempBufferLabel+
this.url].data)){h?h(Arstider.bufferPool[Arstider.tempBufferLabel+this.url]):k.callback&&k.callback(Arstider.bufferPool[Arstider.tempBufferLabel+this.url]);return}"sharp"===Arstider.defaultRenderStyle?"firefox"==c.name?this.data.style.imageRendering="-moz-crisp-edges":"opera"==c.name?this.data.style.imageRendering="-o-crisp-edges":"safari"==c.name?this.data.style.imageRendering="-webkit-optimize-contrast":"ie"==c.name?this.data.style.msInterpolationMode="nearest-neighbor":this.data.style.imageRendering=
"crisp-edges":"auto"===Arstider.defaultRenderStyle?(this.data.style.imageRendering="auto",this.data.style.msInterpolationMode="auto"):0<Arstider.verbose&&console.warn("Arstider.setRenderStyle: Cannot apply mode '",Arstider.defaultRenderStyle,"'");this.data.onload=function(){var a;k.data.onload=null;a=k;b?Arstider.bufferPool[Arstider.tempBufferLabel+k.url]&&null!=Arstider.bufferPool[Arstider.tempBufferLabel+k.url].data?a=Arstider.bufferPool[Arstider.tempBufferLabel+k.url]:(a=Arstider.saveToBuffer(Arstider.tempBufferLabel+
k.url,k.data),a.compatPrivilege=!0):(k.width=k.data.width,k.height=k.data.height);h?h(a):k.callback&&k.callback(a)};this.data.onerror=function(){delete Arstider.blobCache[k.url];k.load()};this.data.src=a};a.prototype.kill=function(){this.data&&this.data.kill&&this.data.kill();this.data=null;if(this.url&&this.url in Arstider.blobCache){try{Arstider.blobCache[this.url].url&&window.URL.revokeObjectURL(Arstider.blobCache[this.url].url)}catch(a){2<Arstider.verbose&&console.log("Arstider.Bitmap.kill: could not revoke blob url '",
this.url,"'")}delete Arstider.blobCache[this.url]}};return a});
define("Arstider/BitmapAnimation",["Arstider/DisplayObject","Arstider/sprites/SpritesheetManager","Arstider/Signal"],function(f,c,b){function g(a){a=a||Arstider.emptyObject;var h=this;this.speed=Arstider.checkIn(a.speed,1);this.loop=Arstider.checkIn(a.loop,!0);this.animCompleteSignal=new b;this.frameChangeSignal=new b;this.onReadySignal=new b;this.isPlaying=!0;this.bitmaps={};Arstider.Super(this,f,a);a.spritesheet&&c.get(a.spritesheet,a,function(d){h._setSpritesheet(d);if(a.onComplete)a.onComplete()})}
Arstider.Inherit(g,f);var a,d,h;g.prototype._setSpritesheet=function(a){this.spritesheet=a;var h=this.nextAnim||a.defaultAnim,d=this.nextAnimParams||null;h&&this.gotoAnim(h,d);a.imageUrl&&this._setImage(a.imageUrl)};g.prototype.killBuffer=function(){this.data&&this.data.kill&&this.data.kill();this.data=null;if(this.animCompleteSignal&&(this.removeChildren(),this.stop(),this.spritesheet=this.bitmaps=null,this.animCompleteSignal.removeAll(),this.frameChangeSignal.removeAll(),this.onReadySignal.removeAll(),
this.onReadySignal=this.frameChangeSignal=this.animCompleteSignal=null,this.onunload))this.onunload()};g.prototype.stop=function(){this.isPlaying=!1;return this};g.prototype.hasAnim=function(a){return this.spritesheet?this.spritesheet.getAnim(a)?!0:!1:!1};g.prototype.pause=function(){this.isPlaying=!1;return this};g.prototype.resume=function(){this.isPlaying=!0;return this};g.prototype.update=function(a){this.animation&&(this.isPlaying&&(d=a/1E3*this.animation.fps*this.speed,this.gotoFrame(this.animPosition+
d),this.animPosition-1+d>this.frames.length&&this._onAnimComplete()),this.isReady||(this.isReady=!0,this.onReadySignal.dispatch()))};g.prototype.gotoAndPlay=function(a,h){0<a?(this.playlist=null,this.gotoFrame(a)):"string"==typeof a?(this.playlist=null,this.gotoAnim(a,h)):0<a.length&&(this.playlist=a,this._next(h));this.isPlaying=!0;return this};g.prototype.gotoAndStop=function(a,h){this.gotoAndPlay(a,h);this.isPlaying=!1;return this};g.prototype.gotoAnim=function(a,h){this.isPlaying||(this.isPlaying=
!0);var d=this.timedAnim&&!(h&&!h.force);if(!this.spritesheet||d){if(d&&a==this.timedAnim)return;this.nextAnim=a;this.nextAnimParams=h;return this}this.animName=a;var d=this.spritesheet.getAnim(a),b=1;1<h&&(b=h);if(d){this.animation=d;d.fps||(d.fps=this.spritesheet.fps);clearTimeout(this.nextTimeout);this.timedAnim=null;d.image&&this._setImage(d.image);this.loopCurrentAnim=this.loop;if(d.loop||!1===d.loop)this.loopCurrentAnim=d.loop;this.frames=d.frames;h&&(h.reverse&&(this.spritesheet.reversedFrames||
(this.spritesheet.reversedFrames={}),this.spritesheet.reversedFrames[a]?this.frames=this.spritesheet.reversedFrames[a]:this.spritesheet.reversedFrames[a]=this.frames=this.frames.slice().reverse()),0<h.time&&(this.timedAnim=a,this.nextTimeout=setTimeout(this._onTimedAnimComplete.bind(this),h.time),h.next||(h.next=this.defaultAnim)),h.next&&("string"==typeof h.next?(this.nextAnim=h.next,this.nextAnimParms=null):(this.nextAnim=h.next.name,delete h.next.name,this.nextAnimParams=h.next)),!0===h.loop||
!1===h.loop)&&(this.loopCurrentAnim=h.loop);this.currentFrame=this.animPosition=0;return this.gotoFrame(b)}console.error("BitmapAnimation: anim '"+a+"' not found.");return this};g.prototype.gotoFrame=function(h,d){h||(h=1);if(h!=this.animPosition||d)return this.animPosition=h,this.currentFrame=Arstider.floor(h),1>this.currentFrame&&(this.currentFrame=1),this.currentFrame>this.frames.length&&(this.currentFrame=this.frames.length),a=this.frames[this.currentFrame-1],a.image&&a.image!=this.currentImageUrl?
this._setImage(a.image):this._setFrame(a,d),this};g.prototype._onTimedAnimComplete=function(){this.nextTimeout=this.timedAnim=null;this._onAnimComplete()};g.prototype._onAnimComplete=function(){var a=this.animation.name;this.playlist?this._next():this.nextAnim&&!this.timedAnim?(this.gotoAnim(this.nextAnim,this.nextAnimParams),this.nextAnimParams=this.nextAnim=null):!this.loopCurrentAnim||1>=this.frames.length?(this.currentFrame=this.frames.length,this.stop()):this.currentFrame=this.animPosition=1;
this.animCompleteSignal&&this.animCompleteSignal.dispatch(a,this)};g.prototype._next=function(a){if(this.playlist&&!(0>=this.playlist.length)){var h=this.playlist.shift();this.gotoAnim(h,a);0>=this.playlist.length&&(this.playlist=null)}};g.prototype._setFrame=function(a,d){if(this.frame!=a||d)this.frame=a,h=a.rect,this.currentBitmap&&(this.currentBitmap.alpha=1,this.currentBitmap.width=this.currentBitmap.dataWidth=h[2],this.currentBitmap.height=this.currentBitmap.dataHeight=h[3],this.currentBitmap.largeData=
!0,this.currentBitmap.xOffset=h[0],this.currentBitmap.yOffset=h[1],a.origin&&(this.currentBitmap.x=a.origin[0],this.currentBitmap.y=a.origin[1]),a.sourceSize&&(this.dataWidth=a.sourceSize[0],this.dataHeight=a.sourceSize[1]),this.frameChangeSignal.dispatch(this.frame,this))};g.prototype._setImage=function(a){this.currentImageUrl!=a&&(this.currentImageUrl=a,this.currentBitmap&&(this.currentBitmap.alpha=0,this.currentBitmap=null),this.currentBitmap=this.bitmaps[a],this.currentBitmap||(this.currentBitmap=
new f({bitmap:a}),this.addChild(this.currentBitmap),this.bitmaps[a]=this.currentBitmap),this.gotoFrame(this.currentFrame,!0))};return g});
define("Arstider/BitmapSprite",["Arstider/DisplayObject","Arstider/sprites/SpritesheetManager"],function(f,c){function b(a){a=a||Arstider.emptyObject;var d=this;this.bitmaps={};Arstider.Super(this,f,a);a.spritesheet&&c.get(a.spritesheet,{imagesAtlas:!0},function(h){d._setSpritesheet(h);a.frame&&d.gotoFrame(a.frame);if(a.onComplete)a.onComplete()})}Arstider.Inherit(b,f);var g;b.prototype._setSpritesheet=function(a){this.spritesheet=a;a.imageUrl&&this._setImage(a.imageUrl)};b.prototype.killBuffer=function(){};
b.prototype.gotoFrame=function(a){a=this.spritesheet.getFrameByName(a);a.image&&this._setImage(a.image);this._setFrame(a);return this};b.prototype._setFrame=function(a){this.frame!=a&&(this.frame=a,g=a.rect,this.currentBitmap&&(this.currentBitmap.alpha=1,this.currentBitmap.loadSection(this.currentImageUrl,g[0],g[1],g[2],g[3]),this.width=g[2],this.height=g[3],a.origin&&(this.currentBitmap.x=a.origin[0],this.currentBitmap.y=a.origin[1])))};b.prototype._setImage=function(a){this.currentImageUrl!=a&&
(this.currentImageUrl=a,this.currentBitmap&&(this.currentBitmap.alpha=0,this.currentBitmap=null),this.currentBitmap=this.bitmaps[a],this.currentBitmap||(this.currentBitmap=new f,this.addChild(this.currentBitmap),this.currentBitmap.setIndex(0),this.bitmaps[a]=this.currentBitmap))};return b});
(function(){function f(){var g=b.indexOf("os ");return(-1<b.indexOf("iphone")||-1<b.indexOf("ipad"))&&-1<g?window.Number(b.substr(g+3,3).replace("_",".")):0}var c=null,b=navigator.userAgent.toLowerCase();define("Arstider/Browser",[],function(){function g(){this.platform=navigator.platform;this.platformVersion=0;this.name=navigator.appName;this.version=parseFloat(navigator.appVersion);this.isMobile=!1;this.isSupported=!0;if(-1!=b.indexOf("iphone"))this.isMobile=!0,this.platform="iphone",this.platformVersion=
f();else if(-1!=b.indexOf("ipod"))this.isMobile=!0,this.platform="ipod",this.platformVersion=f();else if(-1!=b.indexOf("ipad"))this.isMobile=!0,this.platform="ipad",this.platformVersion=f();else if(-1!=b.indexOf("android"))this.isMobile=!0,this.platform="android",/android (\d+\.\d+)/.test(b)&&(this.platformVersion=parseFloat(RegExp.$1));else if(-1!=b.indexOf("win"))this.platform="windows",this.platformVersion=0;else if(-1!=b.indexOf("mac")){if(this.platform="mac",/os x (\d+\_\d+)/.test(b)){var a=
RegExp.$1,a=a.replace("_",".");this.platformVersion=parseFloat(a)}}else-1!=b.indexOf("iemobile")&&(this.isMobile=!0,this.platform="windows");if(-1!=b.indexOf("mobile")||-1!=b.indexOf("arm")||-1!=b.indexOf("touch"))this.isMobile=!0;-1!=b.indexOf("firefox")?(this.name="firefox",/firefox[\/\s](\d+\.\d+)/.test(b)&&(this.version=parseFloat(RegExp.$1))):-1!=b.indexOf("msie")?(this.name="ie",this.version=parseFloat(-1!=b.indexOf("msie")?parseInt(b.split("msie")[1]):!1)):-1!=b.indexOf("trident")&&-1==b.indexOf("msie")?
(this.name="ie",this.version=parseFloat(b.substring(b.indexOf("rv:")+3,b.indexOf(")")))):-1!=b.indexOf("chrome")?(this.name="chrome",/chrome[\/\s](\d+\.\d+)/.test(b)&&(this.version=parseFloat(RegExp.$1))):-1!=b.indexOf("applewebkit")?(this.name="safari",/version[\/\s](\d+\.\d+)/.test(b)&&(this.version=parseFloat(RegExp.$1))):this.name="unknown";this.isSupported=this.checkSupport()}if(null!=c)return c;g.prototype.checkSupport=function(a){a=a||[{name:"ie",minVersion:8},{name:"firefox",minVersion:3.5},
{name:"safari",minVersion:5},{name:"chrome"},{name:"unknown"}];for(var d=0;d<a.length;d++)if(a[d].name==this.name){if(void 0==a[d].minVersion||parseFloat(this.version)>=a[d].minVersion)return!0;0<Arstider.verbose&&console.warn("Arstider.Browser: browser version not supported");return!1}0<Arstider.verbose&&console.warn("Arstider.Browser: browser not supported");return!1};return c=new g})})();
(function(){var f=0;define("Arstider/Buffer",["Arstider/Browser","Arstider/core/Pixel"],function(c,b){function g(a){a=a||{};this.data=window.document.createElement("canvas");this.preferedContext=a.webgl?"webgl":"canvas2d";this.renderStyle=Arstider.checkIn(a.renderStyle,Arstider.defaultRenderStyle);this.contextType=null;this.name=a.name||"buffer"+f++;this.data.id=a.id||this.name;this.width=this.data.width=Arstider.checkIn(a.width,1);this.height=this.data.height=Arstider.checkIn(a.height,1);this.data.buffer=
this;this.vertexShader=a.vertexShader;this.fragmentShader=a.fragmentShader;this.compatPrivilege=!1;this.getContext();void 0!=Arstider.bufferPool[this.name]&&(1<Arstider.verbose&&console.warn("Arstider.Buffer: buffer ",this.name," already exists, it will be ovewritten"),Arstider.bufferPool[this.name].kill());Arstider.bufferPool[this.name]=this}g.prototype.getContext=function(){if(this.context&&this.preferedContext==this.contextType)return this.context;"webgl"==this.preferedContext&&(this.contextType=
"webgl",this.context=this.data.getContext("webgl")||this.data.getContext("experimental-webgl")||null);if("canvas2d"==this.preferedContext||null==this.context)this.contextType="canvas2d",this.context=this.data.getContext("2d");this.context.__init=!1;this.updateRenderStyle()};g.prototype.kill=function(a){this.compatPrivilege&&!0!==a||(delete Arstider.bufferPool[this.name],this.height=this.width=0,this.data=null)};g.prototype.getMemory=function(){return this.data?this.height*this.width<<3:0};g.prototype.setSize=
function(a,d){if(this.data)return this.width=this.data.width=a,this.height=this.data.height=d,this.updateRenderStyle(),this};g.prototype.updateRenderStyle=function(a){if(this.data)return a&&(this.renderStyle=this.context.renderStyle=a),"sharp"===this.renderStyle?"firefox"==c.name?this.data.style.imageRendering="-moz-crisp-edges":"opera"==c.name?this.data.style.imageRendering="-o-crisp-edges":"safari"==c.name?this.data.style.imageRendering="-webkit-optimize-contrast":"ie"==c.name?this.data.style.msInterpolationMode=
"nearest-neighbor":this.data.style.imageRendering="crisp-edges":"auto"===this.renderStyle?(this.data.style.imageRendering="auto",this.data.style.msInterpolationMode="auto"):0<Arstider.verbose&&console.warn("Arstider.setRenderStyle: Cannot apply mode '",this.renderStyle,"'"),this.context.imageSmoothingEnabled=this.context.msImageSmoothingEnabled=this.context.mozImageSmoothingEnabled=this.context.webkitImageSmoothingEnabled=this.context.oImageSmoothingEnabled="auto"==this.renderStyle,this};g.prototype.getURL=
function(a,d){if(this.data)return this.data.toDataURL(a||"image/png",Arstider.checkIn(d,10))};g.prototype.setShaders=function(a,d){this.vertexShader=a;this.fragmentShader=d;this.context&&this.context.__program&&(this.context.__program=null)};g.prototype.getPixelAt=function(a,d){if(this.data){var h=this.context.getImageData(a,d,1,1).data;return new b(a,d,this.data,h[0],h[1],h[2],h[3])}};g.prototype.getAlphaAt=function(a,d){if(this.data)return this.context.getImageData(a,d,1,1).data[3]};g.prototype.setPixelAt=
function(a,d,h){if(this.data){var k=this.context.getImageData(a,d,1,1),b=k.data;b[0]=h.r;b[1]=h.g;b[2]=h.b;b[3]=h.a;this.context.putImageData(k,a,d);return this}};Arstider.saveToBuffer=function(a,d,h,k){a=new g({name:a,width:Arstider.firstOf([h,d.width],1),height:Arstider.firstOf([k,d.height],1)});a.context.drawImage(d,0,0,a.width,a.height);return a};return g})})();
(function(){var f=null;define("Arstider/Dictionary",["Arstider/Request"],function(c){function b(){this._isLoading=!1;this._pendingStrings=[];this.strList=null}if(null!=f)return f;b.prototype.translate=function(b,a,d){if(null===f.strList&&!f._isLoading)return 2<Arstider.verbose&&console.warn("Arstider.Dictionary.translate: no string file"),b;if(f._isLoading)return f._pendingStrings.push([b,a,d]),b;var h=b,k;if(void 0!=f.strList[b]){if(h=f.strList[b],void 0!=a)for(k in a)h=h.split(k).join(a[k])}else 2<
Arstider.verbose&&console.warn("Arstider.Dictionary.translate: string not found");d&&d(h);return h};b.prototype.load=function(b,a){function d(h){this.strList=h;this._isLoading=!1;if(0<this._pendingStrings.length){for(h=0;h<this._pendingStrings.length;h++)this.translate(this._pendingStrings[h][0],this._pendingStrings[h][1],this._pendingStrings[h][2]);this._pendingStrings.length=0}a&&a()}this._isLoading=!0;b instanceof String||"string"==typeof b?(new c({url:b,caller:this,cache:!1,track:!0,type:"json",
callback:function(a){d.call(f,a)}})).send():d.call(f,b)};return f=new b})})();
(function(){function f(c,b){for(var g=0;g<c.length;g++)if(c[g].name==b)return g;return-1}define("Arstider/DisplayObject",["Arstider/Entity","Arstider/Bitmap","Arstider/Renderer","Arstider/Buffer"],function(c,b,g,a){function d(a){Arstider.Super(this,c,a);a=a||Arstider.emptyObject;this.children=[];this._requestedAsset=null;void 0!==a.bitmap?this.loadBitmap(a.bitmap):void 0!==a.data&&this.loadBitmap(a.data)}Arstider.Inherit(d,c);d.prototype.addChild=function(a){if(a){null!=a.parent&&1<Arstider.verbose&&
console.error("Arstider.DisplayObject.addChild: object already has a parent");a.parent=this;a.onStage=this.onStage;if(a.children&&0<a.children.length)for(var d=0;d<a.children.length;d++)a.children[d].onStage=this.onStage;this.children[this.children.length]=a;a.cancelBubble&&a.cancelBubble()._update();return this}Arstider.log("Arstider.DisplayObject.addChild: no object given")};d.prototype.removeChildByName=function(a){var d=f(this.children,a);-1!=d?(this.children[d].removeChildren&&0!=this.children[d].children.length&&
this.children[d].removeChildren(!0),this.children[d].onStage?this.children[d].__skip=!0:(this.children[d].onStage=!1,this.children[d].killBuffer&&this.children[d].killBuffer(),this.children[d].parent=null,this.children.splice(d,1))):1<Arstider.verbose&&console.warn("Arstider.DisplayObject.removeChildByName: could not find children "+a);return this};d.prototype.removeChild=function(a,d){var b=this.children.indexOf(a);-1!=b?(this.children[b].removeChildren&&0!=this.children[b].children.length&&this.children[b].removeChildren(!0),
this.children[b].onStage?this.children[b].__skip=!0:(this.children[b].onStage=!1,this.children[b].killBuffer&&this.children[b].killBuffer(),this.children[b].parent=null,this.children.splice(b,1))):1<Arstider.verbose&&console.warn("Arstider.DisplayObject.removeChild: could not find child");return this};d.prototype.getChild=function(a){var d=f(this.children,a);if(-1!=d)return this.children[d];1<Arstider.verbose&&console.warn("Arstider.DisplayObject.getChild: could not find child ",a);return null};d.prototype.getChildren=
function(){0===this.children.length&&2<Arstider.verbose&&console.warn("Arstider.DisplayObject.getChildren: object has no children");return this.children};d.prototype.removeChildren=function(a){var d=!1;0===this.children.length&&2<Arstider.verbose&&console.warn("Arstider.DisplayObject.removeChildren: object has no children");for(var b=0;b<this.children.length;b++)this.children[b]&&(this.children[b].children&&this.children[b].removeChildren&&0!=this.children[b].children.length&&this.children[b].removeChildren(!0),
this.children[b].onStage&&!a?d=this.children[b].__skip=!0:(this.children[b].killBuffer&&this.children[b].killBuffer(),this.children[b].parent=null,this.children[b].onStage=!1,delete this.children[b]));d||(this.children.length=0);return this};d.prototype.detachChild=function(a){var d=this.children.indexOf(a);-1!=d?(this.children[d].parent=null,this.children[d].onStage=!1,this.children.splice(d,1)):(d=f(this.children,a),-1!=d?(this.children[d].parent=null,this.children[d].onStage=!1,this.children.splice(d,
1)):1<Arstider.verbose&&console.warn("Arstider.DisplayObject.detachChild: could not find child ",a));return this};d.prototype.loadBitmap=function(a,d){var g=this;if(null==this._requestedAsset||this._requestedAsset!==a)this._requestedAsset=a,"string"===typeof a||a instanceof String?new b({url:a,callback:function(a){a&&(g.data=a,0==g.dataWidth&&(g.dataWidth=a.width),0==g.dataHeight&&(g.dataHeight=a.height),0==g.width&&(g.width=a.width),0==g.height&&(g.height=a.height));if(d)d(a);else if(g.onload)g.onload()}}):
this.data=a};d.prototype.loadOptional=function(a,d){var b=new Image;b.onload=this.loadBitmap.bind(this,a,d);b.src=a};d.prototype.flatten=function(d){this.data||(this.data=new a({width:this.width,height:this.height,name:Arstider.tempBufferLabel+this.name+"_flattened"}));this.data.context||(this.data=Arstider.saveToBuffer(Arstider.tempBufferLabel+this.name+"_flattened",this.data,this.width,this.height));var b=this;savedX=this.x;savedY=this.y;this.y=this.x=0;g.draw(this.data.context,this,null,null,!1,
function(){b.removeChildren.call(b);b.x=savedX;b.y=savedY;d&&d.call(b)})};d.prototype.loadSection=function(a,d,b,g,c,f){this.width=this.dataWidth=g;this.height=this.dataHeight=c;this.loadBitmap(a,f);this.largeData=!0;this.xOffset=d;this.yOffset=b};return d})})();
(function(){var f=null,c=[1/2.75,2/2.75,2.5/2.75],b=[1.5/2.75,2.25/2.75,2.625/2.75],g=[0.75,0.9375,0.984375];define("Arstider/Easings",[],function(){return null!=f?f:f=new function(){this.LINEAR=function(a){return a};this.QUAD_IN=function(a){return a*a};this.QUAD_OUT=function(a){return a*(2-a)};this.QUAD_IN_OUT=function(a){return 1>(a*=2)?0.5*a*a:-0.5*(--a*(a-2)-1)};this.CUBIC_IN=function(a){return a*a*a};this.CUBIC_OUT=function(a){return--a*a*a+1};this.CUBIC_IN_OUT=function(a){return 1>(a*=2)?0.5*
a*a*a:0.5*((a-=2)*a*a+2)};this.QUART_IN=function(a){return a*a*a*a};this.QUART_OUT=function(a){return 1- --a*a*a*a};this.QUART_IN_OUT=function(a){return 1>(a*=2)?0.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)};this.QUINT_IN=function(a){return a*a*a*a*a};this.QUINT_OUT=function(a){return--a*a*a*a*a+1};this.QUINT_IN_OUT=function(a){return 1>(a*=2)?0.5*a*a*a*a*a:0.5*((a-=2)*a*a*a*a+2)};this.SIN_IN=function(a){return 1-Math.cos(a*Math.PI/2)};this.SIN_OUT=function(a){return Math.sin(a*Math.PI/2)};this.SIN_IN_OUT=function(a){return 0.5*
(1-Math.cos(Math.PI*a))};this.EXP_IN=function(a){return 0===a?0:Math.pow(1024,a-1)};this.EXP_OUT=function(a){return 1===a?1:1-Math.pow(2,-10*a)};this.EXP_IN_OUT=function(a){return 0===a?0:1===a?1:1>(a*=2)?0.5*Math.pow(1024,a-1):0.5*(-Math.pow(2,-10*(a-1))+2)};this.CIRC_IN=function(a){return 1-Math.sqrt(1-a*a)};this.CIRC_OUT=function(a){return Math.sqrt(1- --a*a)};this.CIRC_IN_OUT=function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)};this.ELASTIC_IN=function(a){var d,
h=0.1;if(0===a)return 0;if(1===a)return 1;!h||1>h?(h=1,d=0.1):d=0.4*Math.asin(1/h)/(2*Math.PI);return-(h*Math.pow(2,10*(a-=1))*Math.sin(2*(a-d)*Math.PI/0.4))};this.ELASTIC_OUT=function(a){var d,h=0.1;if(0===a)return 0;if(1===a)return 1;!h||1>h?(h=1,d=0.1):d=0.4*Math.asin(1/h)/(2*Math.PI);return h*Math.pow(2,-10*a)*Math.sin(2*(a-d)*Math.PI/0.4)+1};this.ELASTIC_IN_OUT=function(a){var d,h=0.1;if(0===a)return 0;if(1===a)return 1;!h||1>h?(h=1,d=0.1):d=0.4*Math.asin(1/h)/(2*Math.PI);return 1>(a*=2)?-0.5*
h*Math.pow(2,10*(a-=1))*Math.sin(2*(a-d)*Math.PI/0.4):h*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-d)*Math.PI/0.4)*0.5+1};this.BACK_IN=this.BACKSWING=function(a){return a*a*(2.70158*a-1.70158)};this.BACK_OUT=function(a){return--a*a*(2.70158*a+1.70158)+1};this.BACK_IN_OUT=function(a){return 1>(a*=2)?0.5*a*a*(3.5949095*a-2.5949095):0.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)};this.BOUNCE_IN=function(a){return 1-this.BOUNCE_OUT(1-a)};this.BOUNCE_OUT=function(a){return a<c[0]?7.5625*a*a:a<c[1]?7.5625*(a-=b[0])*
a+g[0]:a<c[2]?7.5625*(a-=b[1])*a+g[1]:7.5625*(a-=b[2])*a+g[2]};this.BOUNCE_IN_OUT=function(a){return 0.5>a?0.5*this.BOUNCE_IN(2*a):0.5*this.BOUNCE_OUT(2*a-1)+0.5}}})})();
define("Arstider/Engine","Arstider/Browser Arstider/Screen Arstider/Buffer Arstider/Events Arstider/Background Arstider/Watermark Arstider/Preloader Arstider/GlobalTimers Arstider/core/Performance Arstider/Mouse Arstider/Viewport Arstider/Renderer Arstider/Telemetry Arstider/Sound Arstider/Signal Arstider/Hash".split(" "),function(f,c,b,g,a,d,h,k,l,p,m,r,t,w,x,v){function u(){this.version="1.7.1";this.release="min";this.debug=!1;this.timestamp="10/24/2014 11:19 AM";this.allowSkip=!0;this.context=
this.canvas=null;this.renderer=r;this.currentScreen=this.profiler=this.frameRequest=null;this.handbreak=!0;this._deltaTimeReset=this._emergencySoundMute=this._isSynchronous=this.isPreloading=this.pausedByRequest=!1;this.onerror=new x;this.onskip=new x}var q;u.prototype.start=function(a,d,h,k){if(this.debug){requirejs(["Arstider/core/Debugger"],function(a){q.profiler=new a(q);q.profiler.init()})}this.canvas=new b({name:"Arstider_main",
id:"Arstider_main_canvas",webgl:!1});this.context=this.canvas.context;Arstider.setFPS(Arstider.FPS);this._isSynchronous=d||!1;l.updateLogic=this._isSynchronous?null:this.stepLogic;m.init(a,this.canvas.data);p.init(m.container);p._touchRelay=this.applyTouch;g.bind("Engine.gotoScreen",this.loadScreen);g.bind("Engine.showPopup",this.showPopup);g.bind("Engine.hidePopup",this.hidePopup);g.bind("Viewport.pagehide",function(){this._deltaTimeReset=!0;q.stop();
q._emergencySoundMute||(q._emergencySoundMute=!0,w.pause("__emergency-stop__"))});g.bind("Viewport.pageshow",function(){this._deltaTimeReset=!0;q.play();q._emergencySoundMute&&(q._emergencySoundMute=!1,w.resume("__emergency-stop__"))});this.pausedByRequest||this.play();a=Arstider.clone(f,!1,"browser_");window.screen?(a._screenWidth=window.screen.width,a._screenHeight=window.screen.height):(a._screenWidth=window.innerWidth,a._screenHeight=window.innerHeight);a._viewportWidth=window.innerWidth;a._viewportHeight=
window.innerHeight;a._pixelRatio=m.canvasRatio;a._vibration=m.vibrationEnabled;a._accelerometer=m.accelerometerEnabled;t.log("system","gamestart",a)};u.prototype.setPreloaderScreen=function(a){h.setScreen(new c(a));h._screen.stage=q};u.prototype.stepLogic=function(a){l.numUpdates=0;Arstider.skipUpdate||null===q||q.handbreak||(q._deltaTimeReset?q._deltaTimeReset=!1:0>=a||(l.numTimers=k.count(),k.step(a),q.currentScreen&&q.currentScreen._update&&(q.currentScreen._update(a),l.numUpdates++)))};u.prototype._handleError=
function(a){q.onerror.dispatch(a);t.log("error","error",a);a.preventDefault();return!1};u.prototype.startScreen=function(){g.unbind("Preloader.loadingCompleted",q.startScreen);q.currentScreen?(q.currentScreen.onload&&!1===q.currentScreen.__loaded&&(q.currentScreen.__loaded=!0,q.currentScreen.onload()),q.canvas&&q.canvas.data&&q.canvas.data.focus(),q.isPreloading=!1,m.unsupportedOrientation||q.play(),t.log("system","screenstart",{screen:q.currentScreen.name})):0<Arstider.verbose&&console.warn("Arstider.Engine.startScreen: no current screen")};
u.prototype.loadScreen=function(a,d){var b;"string"==typeof a?(b=a,a={}):b=a.name;q.killScreen(q.currentScreen&&q.currentScreen.__savedState);if(void 0!=Arstider.savedStates[b]){q.currentScreen=Arstider.savedStates[b];q.releaseData(q.currentScreen);for(var l=0;l<Arstider.savedStates[b].__tweens.length;l++)Arstider.savedStates[b].__tweens[l].running=Arstider.savedStates[b].__tweens[l].__running,Arstider.savedStates[b].__tweens[l].running&&Arstider.savedStates[b].__tweens[l].resume&&Arstider.savedStates[b].__tweens[l].resume();
k.list=k.list.concat(Arstider.savedStates[b].__tweens);delete q.currentScreen.__tweens;q.currentScreen.__savedState=!1;if(q.currentScreen.onresume)q.currentScreen.onresume();delete Arstider.savedStates[b]}else g.unbind("Preloader.loadingCompleted",q.onScreenLoaded),g.bind("Preloader.loadingCompleted",q.onScreenLoaded),l=a.preloader?a.preloader:{},h.interactive=Arstider.checkIn(l.interactive,!1),h.animated=Arstider.checkIn(l.animated,!1),q.stop(),q.isPreloading=!0,h.set(b),h.progress("__screen__",
0),requirejs([b],function(a){m.unsupportedOrientation?g.bind("Viewport.rotate",function y(){g.unbind("Viewport.rotate",y);q.currentScreen=new c(a,q,d);q.currentScreen.name=b;setTimeout(function(){h.progress("__screen__",100)},100)}):(q.currentScreen=new c(a,q,d),q.currentScreen.stage=q,q.currentScreen.name=b,setTimeout(function(){h.progress("__screen__",100)},100))})};u.prototype.onScreenLoaded=function(){h.interactive?g.bind("Preloader.userCompleted",function(){q.startScreen();g.unbind("Preloader.userCompleted",
q.startScreen)}):q.startScreen()};u.prototype.protectData=function(a){var d=Arstider.getNode(a);d.data&&d.data.toDataURL&&(d._protected=!0);if(a.children&&0<a.children.length)for(d=0;d<a.children.length;d++)q.protectData(a.children[d])};u.prototype.releaseData=function(a){var d=Arstider.getNode(a);d.data&&d.data.toDataURL&&(d._protected=!1);if(a.children&&0<a.children.length)for(d=0;d<a.children.length;d++)q.releaseData(a.children[d])};u.prototype.killScreen=function(b){if(null!=q.currentScreen){t.log("system",
"screenstop",{screen:q.currentScreen.name});b||q.currentScreen._unload();q.protectData(h._screen);q.protectData(a);q.protectData(d);for(var g in Arstider.bufferPool)-1==g.indexOf(Arstider.tempBufferLabel)&&-1==g.indexOf("Arstider_Gradient")&&-1==g.indexOf("Arstider_TextField")||!Arstider.bufferPool[g].data||Arstider.bufferPool[g]._protected||Arstider.bufferPool[g].kill();k.removeTweens();delete q.currentScreen;m.tagParentNode&&(m.tagParentNode.innerHTML="")}else 1<Arstider.verbose&&console.warn("Arstider.Engine.killScreen: no current screen")};
u.prototype.play=function(){q.handbreak&&!m.unsupportedOrientation&&(2<Arstider.verbose&&console.warn("Arstider.Engine.play: playing..."),q.isPreloading||(q.handbreak=!1),(q.frameRequest||Arstider.__animTimer)&&Arstider.cancelAnimFrame.call(window,q.frameRequest),q.draw(),g.broadcast("Engine.play",q))};u.prototype.stop=function(){2<Arstider.verbose&&console.warn("Arstider.Engine.stop: stopping...");p.reset();q.handbreak=!0;g.broadcast("Engine.stop",q)};u.prototype.applyTouch=function(a,d){d||(Arstider.__cancelBubble=
{},d=q.handbreak?h._screen:q.currentScreen);if(d&&d.touchAccuracy&&0!=d.touchAccuracy&&!(0>d.global.x+d.global.width||d.global.x>m.maxWidth||0>d.global.y+d.global.height||d.global.y>m.maxHeight)){var b,g,k=1;f.isMobile&&(k=Arstider.min(p.count(!0),5));if(d&&d.children&&0<d.children.length)for(b=d.children.length-1;0<=b;b--)if(d&&d.children&&d.children[b]&&!d.children[b].__skip){for(g=0;g<k;g++)if(!0!==Arstider.__cancelBubble[g]&&d.children[b].isTouched&&d.children[b].isTouched(p.x(g),p.y(g))){p.isPressed(g)?
(d.children[b]._pressed||d.children[b]._onpress(a),f.isMobile&&(d.children[b]._preclick=!0)):d.children[b]._pressed&&d.children[b]._onrelease(a);d&&d.children&&d.children[b]&&!d.children[b].__skip&&(p.rightPressed?d.children[b]._rightPressed=!0:d.children[b]._rightPressed&&d.children[b]._onrightclick(a));break}d&&d.children&&d.children[b]&&!d.children[b].__skip&&d.children[b].children&&0<d.children[b].children.length&&0!=d.children[b].children.touchAccuracy&&q.applyTouch(a,d.children[b])}Arstider.__cancelBubble=
{}}};u.prototype.applyRelease=function(a,d){var h=0==d.length?-1:d[0].x,b=0==d.length?-1:d[0].y,g,k=null;if(a&&a.touchAccuracy&&0!=a.touchAccuracy&&!(0>a.global.x+a.global.width||a.global.x>m.maxWidth||0>a.global.y+a.global.height||a.global.y>m.maxHeight)){if(f.isMobile){for(g=0;g<d.length;g++)if(!0!==Arstider.__cancelBubble[g]&&a.isTouched&&a.isTouched(d[g].x,d[g].y)&&d[g].pressed){k=g;h=d[g].x;b=d[g].y;break}null==k&&(a._pressed||a._preclick)&&(a._onleave(),a._pressed=!1,a._preclick=!1)}else!0!==
Arstider.__cancelBubble[0]&&a.isTouched&&(a.isTouched(h,b)?(a._hovered||a._onhover(),p.isPressed()||(a._preclick=!0)):(a._hovered&&a._onleave(),a._pressed=!1));-1!=h&&-1!=b&&a._dragged&&(a.x=h-a._dragOffsetX,a.y=b-a._dragOffsetY,a._boundDrag&&(0>a.x&&(a.x=0),0>a.y&&(a.y=0),a.x>a.parent.width&&(a.x=a.parent.width),a.y>a.parent.height&&(a.y=a.parent.height)))}};u.prototype.removePending=function(a){if(a&&a.children&&0<a.children.length)for(i=a.children.length-1;0<=i;i--)a&&a.children&&a.children[i]&&
a.children[i].__skip?a.children.splice(i,1):a&&a.children&&a.children[i]&&a.children[i].children&&0<a.children[i].children.length&&q.removePending(a.children[i])};u.prototype.draw=function(){var a=!1;if(!m.unsupportedOrientation)if(q._isSynchronous&&(l.deltaTime=Arstider.timestamp()-l.lastFrame,q.stepLogic(l.deltaTime)),!q.debug&&0<Arstider.verbose&&(Arstider.verbose=0),l.startStep(q.allowSkip),q.frameRequest=Arstider.requestAnimFrame.call(window,q.draw,l.deltaTime),"sharp"==Arstider.defaultRenderStyle&&
q.canvas.updateRenderStyle(Arstider.defaultRenderStyle),q.handbreak){if(h.interactive||h.animated||0<h._queue.length)q.drawPreloader(a),l.endStep()}else m.tagParentNode&&(m.tagParentNode.style.display="block"),0===l.getStatus()?(l.endStep(),2<Arstider.verbose&&console.warn("Arstider.Engine.draw: skipping draw step"),q.onskip.dispatch()):(q.profiler&&(a=q.profiler.showFrames),q.drawBackground(a),q.drawScreen(a),0<r.pendingRemoval&&q.removePending(q.currentScreen),q.drawOverlay(a),l.frames++,p.cleanTouches(),
a&&q.profiler.drawFrames(),l.endStep())};u.prototype.drawPreloader=function(a){this.renderer.clear(q.context,0,0,m.maxWidth,m.maxHeight);this.renderer.draw(q.context,h._screen,function(a){q.applyRelease(a,f.isMobile?p._ongoingTouches:[{x:p.x(),y:p.y(),pressed:p.pressed}])},null,a);m.tagParentNode&&(m.tagParentNode.style.display="none");p.cleanTouches()};u.prototype.drawBackground=function(d){null==a.data&&0==a.children.length||this.renderer.draw(q.context,a,null,null,d)};u.prototype.drawOverlay=function(a){null==
d.data&&0==d.children.length||this.renderer.draw(q.context,d,null,null,a)};u.prototype.drawScreen=function(a){this.renderer.draw(q.context,q.currentScreen,function(a){q.applyRelease(a,f.isMobile?p._ongoingTouches:[{x:p.x(),y:p.y(),pressed:p.pressed}])},null,a)};Arstider.printScreen=function(a){return q.canvas.getURL(a)};return q=new u});
define("Arstider/Entity",[],function(){function f(c){c=c||Arstider.emptyObject;this.name=c.name||"entity"+ ++f.anonymousEntities;this.alpha=Arstider.checkIn(c.alpha,1);this.x=Arstider.checkIn(c.x,0);this.y=Arstider.checkIn(c.y,0);this.width=Arstider.checkIn(c.width,0);this.height=Arstider.checkIn(c.height,0);this.scaleX=Arstider.checkIn(c.scaleX,1);this.scaleY=Arstider.checkIn(c.scaleY,1);this.skewX=Arstider.checkIn(c.skewX,0);this.skewY=Arstider.checkIn(c.skewY,0);this.rotation=Arstider.checkIn(c.rotation,
0);this.rpX=Arstider.checkIn(c.rpX,0);this.rpY=Arstider.checkIn(c.rpY,0);this.onStage=!1;this.global={alpha:1,x:0,y:0,rotation:0,scaleX:1,scaleY:1,skewX:0,skewY:0,width:0,height:0};this.data=null;this.mask=!1;this.shadowColor=Arstider.checkIn(c.shadowColor,Arstider.defaultColor);this.shadowBlur=Arstider.checkIn(c.shadowBlur,0);this.shadowOffsetX=Arstider.checkIn(c.shadowOffsetX,0);this.shadowOffsetY=Arstider.checkIn(c.shadowOffsetY,0);this.compositeMode=Arstider.checkIn(c.compositeMode,Arstider.defaultComposition);
this.xOffset=Arstider.checkIn(c.xOffset,0);this.yOffset=Arstider.checkIn(c.yOffset,0);this.dataWidth=Arstider.checkIn(c.dataWidth,0);this.dataHeight=Arstider.checkIn(c.dataHeight,0);this.largeData=Arstider.checkIn(c.largeData,!1);this.parent=null;this.onpress=Arstider.checkIn(c.onpress,null);this.onrelease=Arstider.checkIn(c.onrelease,null);this.onhover=Arstider.checkIn(c.onhover,null);this.onleave=Arstider.checkIn(c.onleave,null);this.onclick=Arstider.checkIn(c.onclick,null);this.onrightclick=Arstider.checkIn(c.onrightclick,
null);this.ondoubleclick=Arstider.checkIn(c.ondoubleclick,null);this.onload=Arstider.checkIn(c.onload,null);this.showOutline=Arstider.checkIn(c.showOutline,!1);this._rightPressed=this._preclick=this._pressed=this._hovered=!1;this._doubleClickCheck=0;this._doubleClickDelay=250;this._dockX=Arstider.checkIn(c.dockX,null);this._dockY=Arstider.checkIn(c.dockY,null);this._fillX=Arstider.checkIn(c.fillX,null);this._fillY=Arstider.checkIn(c.fillX,null);this._skipUpdateBubble=!1;this._skipUpdate=0;this._boundDrag=
this._dragged=!1;this._dragOffsetY=this._dragOffsetX=0;this.onunload=Arstider.checkIn(c.onunload,null);this.touchAccuracy=Arstider.checkIn(c.touchAccuracy,f.ACTIVE);c.update&&(this.update=c.update)}f.anonymousEntities=0;f.PASSIVE=0;f.ACTIVE=1;f.COMPLEX=2;f.prototype.update=null;f.prototype._onhover=function(){this._hovered=!0;if(this.onhover)this.onhover()};f.prototype._onleave=function(){this._rightPressed=this._preclick=this._hovered=!1;if(this.onleave)this.onleave()};f.prototype._onpress=function(){this._pressed=
!0;if(this.onpress)this.onpress()};f.prototype._onrelease=function(){this._pressed=!1;var c=Arstider.timestamp();if(this._preclick){if(c-this._doubleClickCheck<this._doubleClickDelay&&this.ondoubleclick)this.ondoubleclick();else if(this.onclick)this.onclick();this._doubleClickCheck=c}if(this.onrelease)this.onrelease();this._preclick=!1};f.prototype._onrightclick=function(){this._rightPressed=!1;if(this.onrightclick)this.onrightclick()};f.prototype._update=function(c){var b,g,a;null!=this.parent&&
0<this.global.alpha&&(null!=this._fillX&&(-1!==(this._fillX+"").indexOf("px")?this.width=parseFloat(this._fillX):this.width=this.parent.width*parseFloat(this._fillX)),null!=this._fillY&&(-1!==(this._fillY+"").indexOf("px")?this.height=parseFloat(this._fillY):this.height=this.parent.height*parseFloat(this._fillY)),null!=this._dockX&&(-1!==(this._dockX+"").indexOf("px")?this.x=parseFloat(this._dockX):this.x=this.parent.width*parseFloat(this._dockX)-this.width*parseFloat(this._dockX)),null!=this._dockY&&
(-1!==(this._dockY+"").indexOf("px")?this.y=parseFloat(this._dockY):this.y=this.parent.height*parseFloat(this._dockY)-this.height*parseFloat(this._dockY)));!this._skipUpdateBubble&&this.update&&this.update(c);if(this.children&&!this._skipUpdateBubble&&(a=this.children.length,0<a))for(b=0;b<a;b++)(g=this.children[b])&&g._update&&(this._skipUpdateBubble&&g.cancelBubble&&(g._skipUpdateBubble=!0),0>=g._skipUpdate?g._update(c):g._skipUpdate--);this._skipUpdateBubble&&(this._skipUpdateBubble=!1)};f.prototype.startDrag=
function(c,b){var g=this;null==this.parent&&0<Arstider.verbose&&console.warn("Arstider.Entity.startDrag: cannot drag an element with no parent");requirejs(["Arstider/Mouse"],function(a){var d=a.x();a=a.y();g._dragged=!0;c||-1==d||-1==a?(g._dragOffsetX=0.5*g.width,g._dragOffsetY=0.5*g.height):(g._dragOffsetX=d-g.global.x,g._dragOffsetY=a-g.global.y);g._boundDrag=b||!1});return this};f.prototype.stopDrag=function(){var c=this;setTimeout(function(){c._dragged=!1;c._dragOffsetX=0;c._dragOffsetY=0;c._boundDrag=
!1},0);return this};f.prototype.dock=function(c,b){this._dockX="left"===c?0:"center"===c?0.5:"right"===c?1:c||null;this._dockY="top"===b?0:"center"===b?0.5:"bottom"===b?1:b||null;this.cancelBubble()._update();return this};f.prototype.fill=function(c,b){this._fillX="full"===c?1:"half"===c?0.5:c||null;this._fillY="full"===b?1:"half"===b?0.5:b||null;this.cancelBubble()._update();return this};f.prototype.isTouched=function(c,b){if(this.touchAccuracy==f.PASSIVE)return!1;if(this.touchAccuracy==f.ACTIVE||
!this.global.points)return c>this.global.x&&c<this.global.x+this.width*this.global.scaleX&&b>this.global.y&&b<this.global.y+this.height*this.global.scaleY?!0:!1;var g=Arstider.distance(this.global.points[0],this.global.points[1],c,b),a=Arstider.distance(this.global.points[2],this.global.points[3],c,b),d=Arstider.distance(this.global.points[4],this.global.points[5],c,b),h=Arstider.distance(this.global.points[6],this.global.points[7],c,b),k=0.5*(g+a+this.global.width),k=Math.sqrt(k*(k-g)*(k-a)*(k-this.global.width))||
0;quad2=0.5*(a+h+this.global.height);quad2=Math.sqrt(quad2*(quad2-a)*(quad2-h)*(quad2-this.global.height))||0;quad3=0.5*(d+h+this.global.width);quad3=Math.sqrt(quad3*(quad3-d)*(quad3-h)*(quad3-this.global.width))||0;quad4=0.5*(g+d+this.global.height);quad4=Math.sqrt(quad4*(quad4-g)*(quad4-d)*(quad4-this.global.height))||0;sum=k+quad2+quad3+quad4;total=this.global.width*this.global.height;return sum>=total-100&&sum<=total+100?!0:!1};f.prototype.collides=function(c,b,g,a){return this.x<c+g&&this.x+
this.width>c&&this.y<b+a&&this.y+this.height>b};f.prototype.setIndex=function(c){if(this.parent){var b=this.parent.children.indexOf(this);-1<b&&1<this.parent.children.length?(c>this.parent.children.length-1&&(c=this.parent.children.length-1),this.parent.children.splice(c,0,this.parent.children.splice(b,1)[0])):1<Arstider.verbose&&console.warn("Arstider.Entity.setIndex: no re-order occured")}else 0<Arstider.verbose&&console.warn("Arstider.Entity.setIndex: element has no parent");return this};f.prototype.getIndex=
function(c){if(this.parent)return this.parent.children.indexOf(this);0<Arstider.verbose&&console.warn("Arstider.Entity.getIndex: element has no parent");return-1};f.prototype.cancelBubble=function(){this._skipUpdateBubble=!0;return this};f.prototype.cancelUpdate=function(c){this._skipUpdate=c||1;return this};f.prototype.killBuffer=function(c){this.data&&this.data.kill&&this.data.kill();this.data=null;if(this.onunload)this.onunload();this._requestedAsset=null;return this};f.prototype.id=function(){return this.parent&&
""!=this.parent.id()?this.parent.id()+"."+this.name:this.name||""};return f});
(function(){function f(a,d,b){for(var g=d.length,c=0;c<g;c++)if(b){if(d[c][b]==a)return c}else if(d[c]==a)return c;return-1}function c(a,b){var g,c=0;for(g=a.length-1;0<=g;g--)-1===f(g,d,b)&&(a.splice(g,1),c++);return c}var b=null,g=[0],a=[],d=[];define("Arstider/Events",[],function(){function h(){}if(null!=b)return b;h.prototype.bind=function(h,b,c){c=c||0;var m=f(b,a),r=f(c,g);-1===m&&(m=a.length,a[m]=b);-1===r&&(r=g.length,g[r]=c);d[d.length]=[r,h,m]};h.prototype.unbind=function(h,b,c){c=c||0;
b=b||-1;var f;for(f=d.length-1;0<=f;f--)d[f][1]!=h||a[d[f][2]]!=b&&-1!==b||g[d[f][0]]!=c&&0!==c||d.splice(f,1)};h.prototype.broadcast=function(h,c,f){f=f||0;var m;for(m=d.length-1;0<=m;m--)if(d[m]&&d[m][1]==h)if(a[d[m][2]]instanceof Function||"function"===typeof a[d[m][2]])if(!g[d[m][0]]||0!==f&&f!=g[d[m][0]])a[d[m][2]](c);else a[d[m][2]].apply(g[d[m][0]],[c]);else 1<Arstider.verbose&&console.warn("Arstider.Events.broadcast: discrepancy found, flushing events"),b.flush()};h.prototype.flush=function(){c(a,
2);c(g,0);d.sort(function(a,d){return a[1]>d[1]?1:d[1]>a[1]?-1:0})};return b=new h})})();
define("Arstider/Filters",["Arstider/Buffer","Arstider/Browser"],function(f,c){return{invertColors:function(b,g,a,d,h){g=b.context.getImageData(Arstider.checkIn(g,0),Arstider.checkIn(a,0),Arstider.checkIn(d,b.width),Arstider.checkIn(h,b.height));a=g.data;var k=(Arstider.checkIn(d,b.width),Arstider.checkIn(h,b.height))-1;b=new f({name:b.name+"_inverted_",width:Arstider.checkIn(d,b.width),height:Arstider.checkIn(h,b.height)});for(k;0<=k;k--)a[4*k]=255-a[4*k],a[4*k+1]=255-a[4*k+1],a[4*k+2]=255-a[4*k+
2];b.context.putImageData(g,0,0);return b},grayscale:function(b,g,a,d,h){g=b.context.getImageData(Arstider.checkIn(g,0),Arstider.checkIn(a,0),Arstider.checkIn(d,b.width),Arstider.checkIn(h,b.height));a=g.data;var k=Arstider.checkIn(d,b.width)*Arstider.checkIn(h,b.height)-1;b=new f({name:b.name+"_grayscale",width:Arstider.checkIn(d,b.width),height:Arstider.checkIn(h,b.height)});d=null;for(k;0<=k;k--)d=(a[4*k]+a[4*k+1]+a[4*k+2])/3,a[4*k]=d,a[4*k+1]=d,a[4*k+2]=d;b.context.putImageData(g,0,0);return b},
tint:function(b,g,a,d,h,k,c,p,m){k=b.context.getImageData(Arstider.checkIn(k,0),Arstider.checkIn(c,0),Arstider.checkIn(p,b.width),Arstider.checkIn(m,b.height));c=k.data;var r=Arstider.checkIn(p,b.width)*Arstider.checkIn(m,b.height)-1;b=new f({name:b.name+"_tint"+g+a+d,width:Arstider.checkIn(p,b.width),height:Arstider.checkIn(m,b.height)});h=Arstider.checkIn(h,1);for(r;0<=r;r--)c[4*r]=Arstider.min(g+c[4*r]*h),c[4*r+1]=Arstider.min(a+c[4*r+1]*h),c[4*r+2]=Arstider.min(d+c[4*r+2]*h);b.context.putImageData(k,
0,0);return b},blur:function(b,g,a,d,h,k,c){var p=0,m=new f({name:b.name+"_blurred_temp",renderStyle:"auto"});g=1/g;k=new f({name:b.name+"_blur",width:Arstider.checkIn(k,b.width),height:Arstider.checkIn(c,b.height),renderStyle:"auto"});m.setSize(m.width*g,m.height*g);for(p;p<a;p++)0===p?m.context.drawImage(b.data,Arstider.checkIn(d,0),Arstider.checkIn(h,0),m.width,m.height):(m.context.clearRect(0,0,m.width,m.height),m.context.drawImage(k.data,0,0,m.width,m.height),k.context.clearRect(0,0,k.width,
k.height)),k.context.drawImage(m.data,0,0,k.width,k.height);return k}}});
(function(){var f=null;define("Arstider/Fonts",["Arstider/Request","Arstider/texts/Font"],function(c,b){function g(){this.collection={};this.loadCallback=null}if(null!=f)return f;g.prototype.get=function(a){if(this.collection[a])return this.collection[a];this.collection[a]=new b({temp:!0,name:a});return this.collection[a]};g.prototype.create=function(a){if(void 0==a.name)return 0<Arstider.verbose&&console.warn("Arstider.Fonts.create: name not specified, font not created"),!1;if(this.collection[a.name]&&
!1==this.collection[a.name].temp)return this.collection[a.name];this.collection[a.name]&&0<this.collection[a.name].loadCallbacks.length&&(a.loadCallbacks=this.collection[a.name].loadCallbacks);this.collection[a.name]=new b(a);return this.collection[a.name]};g.prototype.load=function(a,d){this.loadCallback=d;a instanceof String||"string"==typeof a?(new c({url:a,caller:this,track:!0,type:"json",cache:!1,callback:this._parseFile})).send():this._parseFile(a)};g.prototype._parseFile=function(a){for(var d in a)a[d].name=
d,this.create(a[d]);this.loadCallback&&this.loadCallback()};return f=new g})})();
(function(){function f(b,g){return 0==b.buckets.length?!1:-1!=b.buckets.indexOf(g)||"*"===g}var c=null;define("Arstider/GameData",["Arstider/core/Storage","Arstider/Request"],function(b,g){function a(){this._defaultSet={};this._runtimeSet={}}if(null!=c)return c;a.prototype.load=function(a,h){(new g({url:a,caller:this,track:!0,cache:!1,type:"json",callback:function(a){null!=a?this._defaultSet=a:0<Arstider.verbose&&console.warn("Arstider.GameData.load: JSON parse error in config file");h&&h()}})).send()};
a.prototype.setStoragePrefix=function(a){b.prefix=a;return c};a.prototype.get=function(a,h){var g=null;if(void 0!=this._runtimeSet[a])return this._runtimeSet[a].hist[this._runtimeSet[a].rev];if(h&&(g=b.get(a),null!=g&&void 0!=g))return this.set(a,g),this._runtimeSet[a].hist[this._runtimeSet[a].rev];if(void 0!=this._defaultSet[a])return this._defaultSet[a]};a.prototype.set=function(a,h,b){a in this._runtimeSet?(this._runtimeSet[a].rev!=this._runtimeSet[a].hist.length-1&&this._runtimeSet[a].hist.splice(this._runtimeSet[a].rev+
1,this._runtimeSet[a].hist.length),this._runtimeSet[a].hist.push(h),this._runtimeSet[a].rev=this._runtimeSet[a].hist.length-1):this._runtimeSet[a]={rev:0,hist:[h],buckets:[]};!0===b&&this.save(a);return c};a.prototype.save=function(a){b.set(a,this.get(a));return c};a.prototype.addToBucket=function(a,h){a in this._runtimeSet?-1==this._runtimeSet[a].buckets.indexOf(h)&&this._runtimeSet[a].buckets.push(h):1<Arstider.verbose&&console.warn("Arstider.GameData.addToBucket: ",a," not found in game data");
return c};a.prototype.removeFromBucket=function(a,h){if(a in this._runtimeSet){var b=this._runtimeSet[a].buckets.indexOf(h);-1!=b&&this._runtimeSet[a].buckets.splice(b,1)}else 1<Arstider.verbose&&console.warn("Arstider.GameData.addToBucket: ",a," not found in game data");return c};a.prototype.revert=function(a,h){h=Arstider.checkIn(h,1);if(a in this._runtimeSet){if(1<this._runtimeSet[a].hist.length&&0<this._runtimeSet[a].rev)return this._runtimeSet[a].rev-=h,0>this._runtimeSet[a].rev&&(this._runtimeSet[a].rev=
0),c;1<Arstider.verbose&&console.warn("Arstider.GameData.revert: ",a," cannot revert because no earlier versions")}else 1<Arstider.verbose&&console.warn("Arstider.GameData.revert: ",a," not found in game data");return c};a.prototype.redo=function(a,h){h=Arstider.checkIn(h,1);if(a in this._runtimeSet){if(1<this._runtimeSet[a].hist.length&&this._runtimeSet[a].rev<this._runtimeSet[a].hist.length-1)return this._runtimeSet[a].rev+=h,this._runtimeSet[a].rev>this._runtimeSet[a].hist.length-1&&(this._runtimeSet[a].rev=
this._runtimeSet[a].hist.length-1),c;1<Arstider.verbose&&console.warn("Arstider.GameData.revert: ",a," cannot revert because no later versions")}else 1<Arstider.verbose&&console.warn("Arstider.GameData.revert: ",a," not found in game data");return c};a.prototype.saveStateAs=function(a,h,g){Arstider.savedStates[a]=Arstider.clone(this._runtimeSet);if(h){Arstider.savedStates[a]._storage={};h=b.list();for(var l=0;l<h.length;l++)Arstider.savedStates[a]._storage[h[l]]=b.get(h[l])}g&&this.set(a,JSON.stringify(Arstider.savedStates[a]),
!0);return c};a.prototype.loadState=function(a,h){this._runtimeSet=Arstider.savedStates[a];if(h&&this._runtimeSet._storage){for(var g in this._runtimeSet._storage)b.set(g,this._runtimeSet._storage[g]);delete this._runtimeSet._storage}return c};a.prototype.saveBucket=function(a){for(var h in this._runtimeSet)f(this._runtimeSet[h],a)&&this.save(h);return c};a.prototype.revertBucket=function(a,h){for(var b in this._runtimeSet)f(this._runtimeSet[b],a)&&this.revert(b,h);return c};a.prototype.redoBucket=
function(a,h){for(var b in this._runtimeSet)f(this._runtimeSet[b],a)&&this.redo(b,h);return c};a.prototype.getBucket=function(a){var h,b={};for(h in this._runtimeSet)f(this._runtimeSet[h],a)&&(b[h]=this.get(h));return b};a.prototype.unset=function(a,h){delete this._runtimeSet[a];h&&b.remove(a);return c};a.prototype.clearBucket=function(a,h){for(var b in this._runtimeSet)f(this._runtimeSet[b],a)&&this.unset(b,h);return c};a.prototype.clearStorage=function(){b.reset();return c};return c=new a})})();
define("Arstider/Gesture",["Arstider/Mouse"],function(f){function c(){this.reccording=!1;this.points=[];this.center=null;this.distanceY=this.distanceX=this.distance=this.speedY=this.speedX=this.speed=0;this.resembles=null;this.scale=1;this.angle=this.drawTime=0;this.startSpread=null;this._savedDistanceY=this._savedDistanceX=this._savedDelay=0;this._startDelay=null;this.maxPoints=6}c.prototype.update=function(){if(0!=this.points.length){for(var b=null,g=null,a=0,d=0,h=0,k=!1,c=0,f=0;f<this.points.length;f++){k=
!1;if(null==b||null==g)b=this.points[f].inputs[0].x,g=this.points[f].inputs[0].y;null!=this.points[f].inputs[1]&&(null==this.center&&(this.center={x:(this.points[f].inputs[0].x+this.points[f].inputs[1].x)/2,y:(this.points[f].inputs[0].y+this.points[f].inputs[1].y)/2}),null==this.startSpread&&(k=!0,this.startSpread=Math.sqrt(Math.pow(this.points[f].inputs[0].x-this.points[f].inputs[1].x,2)+Math.pow(this.points[f].inputs[0].x+this.points[f].inputs[1].y,2))));a=this.points[f].inputs[0].x<b?a+(b-this.points[f].inputs[0].x):
a+(this.points[f].inputs[0].x-b);d=this.points[f].inputs[0].y<g?d+(g-this.points[f].inputs[0].y):d+(this.points[f].inputs[0].y-g);0<f&&(h+=this.points[f].delay-this.points[f-1].delay,this.angle=180*Math.atan2(this.points[f].inputs[0].y-this.points[f-1].inputs[0].y,this.points[f].inputs[0].x-this.points[f-1].inputs[0].x)/Math.PI);b=this.points[f].inputs[0].x;g=this.points[f].inputs[0].y;null!=this.startSpread&&1<this.points[f].inputs.length&&!k&&(c=Math.sqrt(Math.pow(b-this.points[f].inputs[1].x,2)+
Math.pow(g+this.points[f].inputs[1].y,2)))}h+=this._savedDelay;a+=this._savedDistanceX;d+=this._savedDistanceY;this.drawTime=h;this.distanceX=a;this.distanceY=d;this.distance=Math.sqrt(Math.pow(a,2)+Math.pow(d,2));this.speedX=a/h;this.speedY=d/h;this.speed=this.distance/h;null!=this.startSpread&&0!=c?(this.scale=c/this.startSpread,this.resembles=1>this.scale?gestures.PINCH_IN:gestures.PINCH_OUT):this.resembles=gestures.SWIPE}};c.prototype.step=function(b){this.points.push({inputs:[b[0],b[1]||null],
delay:parseInt(Arstider.timeStamp())-this._startDelay});this.points.length>this.maxPoints&&this.points.shift();this.update()};c.prototype.startReccording=function(){this.reccording=!0;this._startDelay=parseInt(Arstider.timeStamp());-1==f._currentGestures.indexOf(this)&&f._currentGestures.push(this)};c.prototype.stopReccording=function(){this.reccording=!0;var b=f._currentGestures.indexOf(this);-1!=b&&f._currentGestures.splice(b,1)};return c});
define("Arstider/GlobalTimers",[],function(){function f(){this.list=[];this._roughStarted=!1}f.prototype.step=function(c){c=Arstider.checkIn(c,Arstider.chop(1E3/Arstider.FPS));for(var b=this.list.length-1;0<=b;b--)this.list[b]&&this.list[b].running&&this.list[b]&&this.list[b].delay&&(this.list[b].delay-=c,this.list[b]&&this.list[b].step&&this.list[b].step.call(this.list[b]),this.list[b]&&0>=this.list[b].delay&&!1==this.list[b].completed&&this.list[b].finish())};f.prototype.count=function(){return this.list.length};
f.prototype.push=function(c){-1==this.list.indexOf(c)&&this.list.push(c)};f.prototype.removeTweens=function(){for(var c=this.list.length-1;0<=c;c--)this.list[c]&&this.list[c].kill&&this.list[c].kill()};f.prototype.remove=function(c){c=this.list.indexOf(c);if(-1!==c)return this.list.splice(c,1);2<Arstider.verbose&&console.warn("Arstider.GlobalTimers.remove: timer not in list, nothing was removed")};f.prototype.clean=function(){this.list.length=0};f.prototype.pauseAll=function(){for(var c=this.list.length-
1;0<=c;c--)this.list[c]&&this.list[c].pause&&this.list[c].pause()};f.prototype.resumeAll=function(){for(var c=this.list.length-1;0<=c;c--)this.list[c]&&this.list[c].resume&&this.list[c].resume()};return new f});
(function(){var f=0;define("Arstider/Gradient",["Arstider/Buffer","Arstider/Browser"],function(c,b){function g(a){a=a||{};this.type=a.type||"linear";this.name=a.name||this.type+"_gradient"+f++;this.x1=Arstider.checkIn(a.x1,0);this.y1=Arstider.checkIn(a.y1,0);this.x2=Arstider.checkIn(a.x2,1);this.y2=Arstider.checkIn(a.y2,1);this.r1=Arstider.checkIn(a.r1,1);this.r2=Arstider.checkIn(a.r2,50);this.width=a.width||100;this.height=a.height||100;this.colors=a.colors||[];this.xOffset=a.x||0;this.yOffset=a.y||
0;this.pattern=null;this.grad=new c({name:"Arstider_Gradient_"+this.name,width:this.width,height:this.height});this.render()}g.prototype.render=function(){var a=0,d=this.xOffset+this.x1*this.width,h=this.xOffset+this.x2*this.width,b=this.yOffset+this.y1*this.height,g=this.yOffset+this.y2*this.height;"linear"==this.type?this.pattern=this.grad.context.createLinearGradient(d,b,h,g):"radial"==this.type?this.pattern=this.grad.context.createRadialGradient(d,b,this.r1,h,g,this.r2):0<Arstider.verbose&&console.warn('Arstider.Gradient: gradient must be of type "linear" or "radial" ');
for(a;a<this.colors.length;a++)this.pattern.addColorStop(this.colors[a].pos,this.colors[a].color);return this};g.prototype.addColor=function(a,d){this.colors.push({pos:a,color:d});this.render();return this};g.prototype.changeSize=function(a,d){this.grad.setSize(a,d);this.render();return this};g.prototype.changeOffset=function(a,d){if(a!=this.xOffset||d!=this.yOffset)this.xOffset=a,this.yOffset=d,this.render();return this};return g})})();
(function(){var f=null;define("Arstider/Hash",["Arstider/Signal","Arstider/Engine"],function(c,b){function g(){this.anchor=this.getAnchor();this.onchange=new c}if(null!=f)return f;g.prototype.getAnchor=function(){var a=window.location.hash,a=a.substring(1,a.length);return""==a?!1:a=a.replace(".js","")};g.prototype.setAnchor=function(a){a=a.replace("#","");window.location.hash=a};g.prototype.listenHash=function(){var a=this;window.onhashchange=function(){a.anchor=a.getAnchor();a.onchange.dispatch(a.anchor)}};
return f=new g})})();
(function(){function f(a){return 16==a?"shift":18==a?"alt":13==a?"enter":27==a?"esc":32==a?"space":37==a?"left":38==a?"up":39==a?"right":40==a?"down":String.fromCharCode(a).toLowerCase()}function c(d,h){if(void 0!=a[d])for(var b=0;b<a[d].length;b++)if(h===a[d][b][0]&&a[d][b][1]&&(a[d][b][1]instanceof Function||"function"===typeof a[d][b][1]))a[d][b][1]();if(void 0!=a.any)for(b=0;b<a.any.length;b++)if(h===a.any[b][0]&&a.any[b][1]&&(a.any[b][1]instanceof Function||"function"===typeof a.any[b][1]))a.any[b][1]()}
var b=null,g={},a={};window.document.addEventListener("keydown",function(a){var h=f(a.keyCode);g[h]=1;c(h,"down");if("up"==h||"down"==h||"space"==h)return a=a||window.event,a.stopPropagation(),a.preventDefault(),!1});window.document.addEventListener("keyup",function(a){var h=f(a.keyCode);g[h]=0;c(h,"up");if("up"==h||"down"==h||"space"==h)return a=a||window.event,a.stopPropagation(),a.preventDefault(),!1});define("Arstider/Keyboard",[],function(){function d(){this.enabled=!0}if(null!=b)return b;d.prototype.bind=
function(d,b,g){this.enabled&&(void 0==a[d.toLowerCase()]&&(a[d.toLowerCase()]=[]),a[d.toLowerCase()].push([b,g]))};d.prototype.getKey=function(a){if("any"==a){for(var d in g)if(1==g[d])return 1;return 0}return g[a]};d.prototype.unbind=function(d,b,g){if(void 0==b||void 0==a[d.toLowerCase()])a[d.toLowerCase()]=[];else if(void 0==g)for(g=a[d.toLowerCase()].length;0<=g;g--)a[d.toLowerCase()][g][0]==b&&a[d.toLowerCase()].splice(g,1);else b=a[d.toLowerCase()].indexOf([b,g]),-1!=b&&a[d.toLowerCase()].splice(b,
1)};d.prototype.disablePageScroll=function(){window.onkeydown=function(a){return 32!=a.keyCode};return this};return b=new d})})();
define("Arstider/Mouse",["Arstider/Browser","Arstider/Viewport","Arstider/Events"],function(f,c,b){function g(a,d){return{id:Arstider.checkIn(a.identifier,-1),x:(a.clientX-c.xOffset)/c.canvasRatio/c.globalScale,y:(a.clientY-c.yOffset)/c.canvasRatio/c.globalScale,pressed:Arstider.checkIn(d,!0)}}function a(){this.rightPressed=this.pressed=!1;this._mouse={x:0,y:0};this._touchRelay=Arstider.emptyFunction;this._ongoingTouches=[];this._currentGestures=[]}var d;a.prototype.init=function(a){if(a){if(f.isMobile||
"ontouchmove"in window)a.addEventListener("touchmove",this._handleTouchMove),a.addEventListener("touchstart",this._handleTouchStart,!1),a.addEventListener("touchend",this._handleTouchEnd,!1),a.addEventListener("touchcancel",this._handleTouchEnd,!1),a.addEventListener("touchleave",this._handleTouchEnd,!1);!f.isMobile&&"onmousemove"in window&&(a.addEventListener("mouseup",this._handleMouseUp,!1),a.addEventListener("mousedown",this._handleMouseDown,!1),a.addEventListener("mousemove",this._handleMouseMove),
a.addEventListener("mouseleave",this._handleMouseUp,!1),a.addEventListener("mousewheel",this._mouseWheel,!1),a.addEventListener("DOMMouseScroll",this._mouseWheel,!1))}else Arstider.log("Arstider.Mouse: no Viewport tag, cannot bind mouse events")};a.prototype.reset=function(){d._ongoingTouches.length=0;d.pressed=!1;d.rightPressed=!1;d._mouse.x=0;d._mouse.y=0};a.prototype.x=function(a){a=a||0;return f.isMobile?void 0!=d._ongoingTouches[a]?parseInt(d._ongoingTouches[a].x):-1:parseInt(d._mouse.x)};a.prototype.y=
function(a){a=a||0;return f.isMobile?void 0!=d._ongoingTouches[a]?parseInt(d._ongoingTouches[a].y):-1:parseInt(d._mouse.y)};a.prototype.isPressed=function(a){a=a||0;return f.isMobile?void 0!=d._ongoingTouches[a]?d._ongoingTouches[a].pressed:!1:"right"==a?d.rightPressed:d.pressed};a.prototype.count=function(a){if(f.isMobile){if(a)return d._ongoingTouches.length;a=0;for(a;a<d._ongoingTouches.length&&d._ongoingTouches[a].pressed;a++);return a}return 1};a.prototype._handleTouchMove=function(a){e=a||window.event;
e.preventDefault();var b=-1,c=e.changedTouches,f;for(a=0;a<c.length;a++)b=d.getIndexFromId(c[a].identifier),0<=b?(f=d._ongoingTouches[b].pressed,d._ongoingTouches.splice(b,1,g(c[a],f))):Arstider.log("Arstider.Mouse.handleTouchMove: could not resolve input id "+b);d.stepGestures()};a.prototype._handleTouchStart=function(a){a=a||window.event;a.preventDefault();for(var b=a.changedTouches,c=0;c<b.length;c++)d._ongoingTouches.push(g(b[c]));d._touchRelay(a)};a.prototype.stepGestures=function(){for(i=0;i<
d._currentGestures.length;i++)d._currentGestures[i]&&d._currentGestures[i].reccording&&d._currentGestures[i].step()};a.prototype._handleTouchEnd=function(a){a=a||window.event;a.preventDefault();for(var b=-1,g=a.changedTouches,c=0;c<g.length;c++)b=d.getIndexFromId(g[c].identifier),0<=b?d._ongoingTouches[b].pressed=!1:Arstider.log("Arstider.Mouse.handleTouchEnd: could not resolve input id "+b);d._touchRelay(a)};a.prototype.setCursor=function(a){window.document.body.style.cursor=a};a.prototype.getCursor=
function(){return window.document.body.style.cursor};a.prototype._handleMouseDown=function(a){var b;a=a||window.event;a.which?b=3==a.which:a.button&&(b=2==a.button);b?d.rightPressed=!0:d.pressed=!0;d._handleMouseMove(a);d._touchRelay&&d._touchRelay(a)};a.prototype._handleMouseUp=function(a){var b;a=a||window.event;a.which?b=3==a.which:a.button&&(b=2==a.button);b?d.rightPressed=!1:d.pressed=!1;d._handleMouseMove(a);d._touchRelay&&d._touchRelay(a)};a.prototype._handleMouseMove=function(a){a=a||window.event;
a=g(a);d._mouse.x=a.x;d._mouse.y=a.y};a.prototype._mouseWheel=function(a){a=a||window.event;a=Arstider.max(-1,Arstider.min(1,a.wheelDelta||-a.detail));b.broadcast("Mouse.wheel",a)};a.prototype.cleanTouches=function(){for(i=d._ongoingTouches.length-1;0<=i;i--)d._ongoingTouches[i].pressed||d._ongoingTouches.splice(i,1)};a.prototype.getIndexFromId=function(a){for(var b=0;b<d._ongoingTouches.length;b++)if(a==d._ongoingTouches[b].id)return b;return-1};return d=new a});
define("Arstider/Preloader",["Arstider/Events"],function(f){function c(a,d){for(var b=a.length-1;0<=b;b--)if(a[b].name===d)return!1;return!0}function b(){this._queue=[];this._gracePeriodTimer=null;this._checks=0;this._screen=null;this.name="_Arstider_Preloader";this.visible=!1}var g;b.prototype.set=function(a){this.reset();f.broadcast("Preloader.showPreloader",a);this.visible=!0};b.prototype.setScreen=function(a){this._screen=a};b.prototype.progress=function(a,d,b){if(!this.visible)return!1;var g=
this._queue.length,f=this;if(0<d&&!b)if(c(this._queue,a))this.progress(a,d,!0);else for(b=g-1;0<=b;b--){if(this._queue[b].name==a){null!=this._queue[b].timer&&clearTimeout(this._queue[b].timer);this._queue[b].timer=setTimeout(function(){f.progress.apply(f,[a,d,!0])},100);break}}else{if(void 0==d||0===d)c(this._queue,a)&&this._queue.push({name:a,loaded:d,timer:null});else for(b=g-1;0<=b;b--)if(this._queue[b].name==a){this._queue[b].loaded=d;break}b=this.totalPercent();this._screen&&this._screen.update&&
this._screen.update.apply(this._screen,[b]);100<=b&&this._checkComplete(!0)}};b.prototype._checkComplete=function(a){0==g._checks&&a?(g._checks=1,g._gracePeriodTimer=setTimeout(g._checkComplete,100)):a||1!=g._checks||(100>g.totalPercent()?g._checks=0:g.hide())};b.prototype.totalPercent=function(){var a,d=this._queue.length,b=0;for(a=d-1;0<=a;a--)b+=this._queue[a].loaded;return Arstider.floor(b/d)};b.prototype.reset=function(){this._checks=this._queue.length=0};b.prototype.hide=function(){f.broadcast("Preloader.loadingCompleted");
this.visible=!1;this.reset()};return g=new b});
define("Arstider/Renderer",["Arstider/contexts/Webgl","Arstider/contexts/Canvas2d","Arstider/core/Performance","Arstider/contexts/MatrixTransform"],function(f,c,b,g){function a(){this.pencil=null;this.padding=100;this.pendingRemoval=0}var d;a.prototype.checkOnScreen=function(a,b,g,c,f){var r=a.canvas.width;a=a.canvas.height;var t=-c,w=-f;f=b.height-f;c=b.width-c;b=g.transformPoint(t,w);w=g.transformPoint(c,w);t=g.transformPoint(t,f);g=g.transformPoint(c,f);f=0.25*(b.x+w.x+t.x+g.x);c=0.25*(b.y+w.y+
t.y+g.y);if(b.x-d.padding<r&&b.x>=-d.padding||w.x-d.padding<=r&&w.x>-d.padding||t.x-d.padding<r&&t.x>=-d.padding||g.x-d.padding<=r&&g.x>-d.padding||f-d.padding<=r&&f>-d.padding)if(b.y-d.padding<a&&b.y>=-d.padding||w.y-d.padding<=a&&w.y>-d.padding||t.y-d.padding<a&&t.y>=-d.padding||g.y-d.padding<=a&&g.y>-d.padding||c-d.padding<=a&&c>-d.padding)return!0;return!1};a.prototype.renderChild=function(a,d,c,f,m,r,t,w,x){var v=0,u=0;if(d&&(b.elements++,d._skipUpdateBubble||d._skipUpdate||!d.update||b.numUpdates++,
!(0>=d.alpha))){r||(r=new g(this.pencil,a),r.reset());v=d.width*d.rpX;u=d.height*d.rpY;d.global&&(d.global.x=d.x,d.global.y=d.y,d.global.scaleX=d.scaleX,d.global.scaleY=d.scaleY,d.global.skewX=d.skewX,d.global.skewY=d.skewY,d.global.width=d.width,d.global.height=d.height,d.global.rotation=d.rotation,d.global.alpha=d.alpha,d.parent&&(d.global.x+=d.parent.global.x,d.global.y+=d.parent.global.y,d.global.scaleX*=d.parent.global.scaleX,d.global.scaleY*=d.parent.global.scaleY,d.global.skewX*=d.parent.global.skewX,
d.global.skewY*=d.parent.global.skewY,d.global.width*=0>d.global.scaleX?-1*d.global.scaleX:d.global.scaleX,d.global.height*=0>d.global.scaleY?-1*d.global.scaleY:d.global.scaleY,d.global.rotation+=d.parent.global.rotation,d.global.alpha*=d.parent.global.alpha));1!=d.alpha&&(b.transforms++,this.pencil.alpha(a,d.alpha));if(0!=d.rotation||1!=d.scaleX||1!=d.scaleY||c)r.save(),c?r.translate(d.x+v,d.y+u):r.translate(d.global.x+v,d.global.y+u),c=!0;0!=d.rotation&&(b.transforms++,r.rotate(d.rotation*Arstider.degToRad));
if(1!=d.scaleX||1!=d.scaleY)b.transforms++,r.scale(d.scaleX,d.scaleY);d.compositeMode!=Arstider.defaultComposition?(b.transforms++,this.pencil.setCompositionMode(a,d.compositeMode)):!0===d.mask&&(r.setTransform(),b.transforms++,this.pencil.clip(a,c?-v:d.global.x,c?-u:d.global.y,d.width,d.height));d.shadowColor!=Arstider.defaultColor&&(b.transforms++,this.pencil.dropShadow(a,d.shadowOffsetX,d.shadowOffsetY,d.shadowBlur,d.shadowColor));f&&f(d);if(d.data||d.draw){d.mask||r.setTransform();var q=d.global.x<
a.canvas.width&&0<d.global.x+d.global.width&&d.global.y<a.canvas.height&&0<d.global.y+d.global.height;if(!c&&q||c)d.draw?(b.draws++,d.draw.call(d,a,c?-v:d.global.x,c?-u:d.global.y)):0<d.global.height&&0<d.global.width&&(q=Arstider.getNode(d))&&q.data&&(b.draws++,!0===d.largeData?this.pencil.renderAt(a,q.data,c?-v:d.global.x,c?-u:d.global.y,d.width,d.height,d.xOffset,d.yOffset,d.dataWidth,d.dataHeight):this.pencil.renderAt(a,q.data,c?-v:d.global.x,c?-u:d.global.y,d.width,d.height))}(t||!0===d.showOutline)&&
this.pencil.debugOutline(a,c?-v:d.global.x,c?-u:d.global.y,d.width,d.height,"magenta");m&&m(d);if(d.children&&0<d.children.length)for(v=d.children.length,u=0;u<v;u++)d.children[u]&&!d.children[u].__skip?this.renderChild(a,d.children[u],c,f,m,r,t):this.pendingRemoval=1;d.postDraw&&d.postDraw.call(d,a);x?w&&w():(c&&r.restore(),1!=d.alpha&&this.pencil.alpha(a,1/d.alpha))}};a.prototype.clear=function(a,b,g,c,f){this._recoverContextPencil(a,function(){d.pencil.clear(a,b,g,c,f)})};a.prototype._recoverContextPencil=
function(a,d){this.pencil=a&&"canvas2d"==a.canvas.buffer.contextType?c:f;a.__init?d():(a.__init=!0,this.pencil=a&&"canvas2d"==a.canvas.buffer.contextType?c:f,this.pencil.init(a,d))};a.prototype.draw=function(a,b,g,c,f,r){this.pendingRemoval=0;this._recoverContextPencil(a,function(){d.renderChild.call(d,a,b,!1,g,c,null,f,r,!0)})};return d=new a});
define("Arstider/Request",["Arstider/Browser","Arstider/Preloader"],function(f,c){function b(a){var b=d.length-1;for(b;0<=b;b--)if(a==d[b].url)return!0;return!1}function g(a,b){var g=d.length-1;for(g;0<=g;g--)a==d[g].url&&(d[g].callback&&(d[g].callback.apply(d[g].caller,[h[a]]),b&&b.progress(d[g].id,100)),d.splice(g,1))}function a(d){this.url=d.url;a.urlArgs&&(this.url+=(-1===this.url.indexOf("?")?"?":"&")+a.urlArgs);this._compatibilityMode="ie"==f.name&&9==f.version||"safari"==f.name&&7>f.platformVersion;
this.callback=Arstider.checkIn(d.callback,null);this.progress=Arstider.checkIn(d.progress,null);this.track=Arstider.checkIn(d.track,!1);this.type=Arstider.checkIn(d.type,this._compatibilityMode?"arraybuffer":"blob");this.cache=Arstider.checkIn(d.cache,!0);this.error=Arstider.checkIn(d.error,null);this.caller=Arstider.checkIn(d.caller,this);this.timeout=Arstider.checkIn(d.timeout,12E3);this.timeoutTimer=null;this.crossDomain=Arstider.checkIn(d.crossDomain,!1);this.method=Arstider.checkIn(d.method,
"GET");this.async=Arstider.checkIn(d.async,!0);this.mimeOverride=Arstider.checkIn(d.mimeOverride,null);this.user=Arstider.checkIn(d.user,Arstider.emptyString);this.password=Arstider.checkIn(d.password,Arstider.emptyString);this.headers=Arstider.checkIn(d.headers,Arstider.emptyObj);this.postData=Arstider.checkIn(d.postData,Arstider.checkIn(d.data,null));this.id=this.url+"_"+Arstider.timestamp();this.completed=!1}a.urlArgs=null;var d=[],h={},k="Accept-Charset Accept-Encoding Access-Control-Request-Headers Access-Control-Request-Method Connection Content-Length Cookie Cookie2 Date DNT Expect Host Keep-Alive Origin Referer TE Trailer Transfer-Encoding Upgrade User-Agent Via".split(" ");
a.prototype.send=function(){function a(d){m.error&&m.error.apply(m.caller,[d]);m.track&&c.progress(m.id,100)}var p,m=this,r;this.completed=!1;null!=this.timeoutTimer&&clearTimeout(this.timeoutTimer);this.timeoutTimer=null;this.track&&c.progress(this.id,0);if(this.cache&&!("arraybuffer"==this.type&&"safari"==f.name&&7>f.platformVersion)){if(void 0!==h[this.url]){this.callback.apply(this.caller,[h[this.url]]);g(this.url);this.track&&c.progress(this.id,100);return}if(b(this.url)){d.push(this);return}d.push({url:this.url})}if("arraybuffer"==
this.type){var t=new Image;t.onerror=function(){m.track&&c.progress(m.id,100)};t.onload=function(){var a;t.onload=null;m.url.indexOf(".jpg")||m.url.indexOf(".png")||m.url.indexOf(".gif")?setTimeout(function(){a=Arstider.saveToBuffer(m.id,t);a.getPixelAt(1,1,1,1);a=a.getURL("image/png",0);h[m.url]=a;Arstider.bufferPool[m.id]&&Arstider.bufferPool[m.id].kill&&Arstider.bufferPool[m.id].kill();m.callback&&m.callback.apply(m.caller,[a]);m.track&&c.progress(m.id,100);t.src=Arstider.emptyImgSrc},50):(h[m.url]=
a,m.callback&&m.callback.apply(m.caller,[a]),m.track&&c.progress(m.id,100),t.src=Arstider.emptyImgSrc);this.completed=!0;null!=m.timeoutTimer&&clearTimeout(m.timeoutTimer);m.timeoutTimer=null};t.src=this.url;this.track&&(this.timeoutTimer=setTimeout(function(){m.completed||c.progress(m.id,100)},2*this.timeout))}else{p=new XMLHttpRequest;p.open(this.method,this.url,this.async,this.user,this.password);"safari"==f.name&&7>f.platformVersion||(this.async&&(p.responseType=this.type),"json"==this.type&&
(p.responseType="text"));null!=this.mimeOverride&&p.overrideMimeType&&p.overrideMimeType(this.mimeOverride);"post"==this.method.toLowerCase()&&(this.headers===Arstider.emptyObj&&(this.headers={}),void 0==this.headers["Content-Type"]&&(this.headers["Content-Type"]="application/x-www-form-urlencoded"));for(r in this.headers)-1===k.indexOf(r)?p.setRequestHeader(r,this.headers[r]):1<Arstider.verbose&&console.warn("Arstider.Request.send: header ",r," is not accepted and will be ignored");this.crossDomain&&
p.setRequestHeader("X-Requested-With","XMLHttpRequest");p.onprogress=function(a){m.progress&&m.progress.apply(m.caller,[a]);m.track&&c.progress(m.id,Arstider.chop(a.loaded/a.total*100))};p.onload=function(){if(200==this.status){var a;if("json"==m.type)try{a=JSON.parse(this.responseText)}catch(d){console.error(d),a={}}else a="text"==m.type?this.responseText:this.response;m.cache&&(h[m.url]=a,g(m.url,c));m.callback&&m.callback.apply(m.caller,[a])}m.track&&c.progress(m.id,100);m.completed=!0;null!=m.timeoutTimer&&
clearTimeout(m.timeoutTimer);m.timeoutTimer=null};p.onerror=a;p.send(Arstider.serialize(this.postData));this.track&&(this.timeoutTimer=setTimeout(function(){m.completed||c.progress(m.id,100)},this.timeout));return p}};return a});
define("Arstider/Screen",["Arstider/DisplayObject","Arstider/Viewport","Arstider/Events","Arstider/Request","Arstider/GlobalTimers"],function(f,c,b,g,a){function d(a,d,b){Arstider.Super(this,f);Arstider.mixin(this,Arstider.clone(a,!0),!0,!0);this.__loaded=!1;this.stage=d;b?(new g({url:b,track:!0,type:"json",caller:this,cache:!0,callback:this._finishSetup})).send():this._finishSetup()}Arstider.Inherit(d,f);d.prototype._finishSetup=function(a){if(a)return this._instantiateElements(a);this.width=c.maxWidth;
this.height=c.maxHeight;this.scaleX=this.scaleY=c.globalScale;this.global.x=0;this.global.y=0;this.global.alpha=1;this.global.rotation=0;this.global.scaleX=this.global.scaleY=c.globalScale;this.global.width=c.maxWidth;this.global.height=c.maxHeight;this.onStage=!0;this.init?this.init():2<Arstider.verbose&&console.warn("Arstider.Screen: new screen has no init method")};d.prototype._instantiateElements=function(a){this.__elementsToSpawn=a.elements.length;this.__elements=[];this.basePath=a.path;for(var d=
0;d<a.elements.length;d++)this._spawnElement(a.elements[d],function(){this.__elementsToSpawn==this.__elements.length&&(this._resolveHierarchy(this.__elements),delete this.__elementsToSpawn,delete this.__elements,this._finishSetup())})};d.prototype._resolveHierarchy=function(a){var d=0,b=0;for(d;d<a.length;d++)if(null!=a[d].parent)for(b=0;b<a.length;b++){if(a[b].name==a[d].parent){a[b].addChild(a[d]);break}}else this.addChild(a[d])};d.prototype._spawnElement=function(a,d){var b=this;requirejs([a._type],
function(g){g=new g(a);!0===a._export&&(b[g.name]=g);b.__elements.push(g);d.apply(b)})};d.prototype._unload=function(){this.loaded=!1;this.removeChildren(!0);if(this.onunload)this.onunload()};d.prototype.saveStateAs=function(d,b){this.__savedState=!0;Arstider.savedStates[d]=this;Arstider.savedStates[d].__tweens=[];this.stage.protectData(this);for(var g=a.list.length-1;0<=g;g--)a.list[g]&&a.list[g].kill&&(a.list[g].__running=a.list[g].running,Arstider.savedStates[d].__tweens.push(Arstider.clone(a.list[g],
!0)))};return d});
define("Arstider/Sequence",[],function(){var f=function(c,b,g,a,d){this.sheet=c;this.time=1E3*g;this.frames=a||[0];this.name=b;this.loops=0;"number"===typeof d&&(this.stop=d);if(void 0==d||-1===d)this.stop=-1;if(!0===d||0===d)this.stop=0;c=Arstider.chop(1E3/Arstider.FPS);this.time<c&&(this.time=c);this.chainedAnim=null;this.callbacks=[];this.frameCallbacks=[]};f.prototype.then=function(c,b,g){var a=this;c instanceof Function||"function"===typeof c?this.callbacks.push(c):c instanceof String||"string"===
typeof c?this.callbacks.push(function(){a.currentAnim&&a.currentAnim.sheet&&a.currentAnim.sheet[c]&&(a.currentAnim=a.currentAnim.sheet[c],a.rewind())}):this.chainedAnim=new f(this.sheet,c,b,g);return this};f.prototype.callback=function(c){this.callbacks.push(c);return this};f.prototype.frameCallback=function(c){this.frameCallbacks.push(c);return this};return f});
(function(){define("Arstider/Shape",["Arstider/Entity"],function(f){function c(b){Arstider.Super(this,f,b);b=b||Arstider.emptyObject;this.shape=b.shape||"rect";this.points=b.points||[];this.fillStyle=b.fillStyle||Arstider.defaultColor;this.strokeStyle=b.strokeStyle||Arstider.defaultColor;this.lineWidth=b.lineWidth||0;this.lineCap=b.lineCap||"square";this.lineDash=b.lineDash||[];this.lineDashOffset=b.lineDashOffset||0}Arstider.Inherit(c,f);c.prototype.draw=function(b,g,a){b.save();var d;this.fillStyle.changeOffset&&
this.fillStyle.changeOffset(g,a);this.strokeStyle.changeOffset&&this.strokeStyle.changeOffset(g,a);b.fillStyle=this.fillStyle.pattern?this.fillStyle.pattern:this.fillStyle;b.strokeStyle=this.strokeStyle.pattern?this.strokeStyle.pattern:this.strokeStyle;b.lineWidth=this.lineWidth;b.lineCap=this.lineCap;b.setLineDash&&(b.setLineDash(this.lineDash),b.lineDashOffset=this.lineDashOffset);b.beginPath();switch(this.shape){case "rect":b.rect(g,a,this.width,this.height);break;case "circ":b.arc(g+0.5*this.width,
a+0.5*this.height,0.5*this.width,0,2*Math.PI,!1);break;case "custom":if(0<this.points.length)for(b.moveTo(g+this.points[0].x,a+this.points[0].y),d=1;d<this.points.length;d++)void 0!=this.points[d].cpX&&void 0!=this.points[d].cpY?b.quadraticCurveTo(g+this.points[d].cpX,a+this.points[0].cpY,g+this.points[d].x,a+this.points[0].y):b.lineTo(g+this.points[d].x,a+this.points[d].y)}b.closePath();this.fillStyle!=Arstider.defaultColor&&b.fill();this.strokeStyle!=Arstider.defaultColor&&b.stroke();b.restore()};
return c})})();
define("Arstider/Signal",[],function(){function f(){this.__bindings;this.__bindingsOnce}f.prototype.add=function(c){return this.registerListener(c)};f.prototype.addOnce=function(c){return this.registerListener(c,!0)};f.prototype.remove=function(c){var b=this.find(c);c=this.find(c,this.__bindingsOnce);0<=b&&this.__bindings.splice(b,1);0<=c&&this.__bindingsOnce.splice(c,1)};f.prototype.removeAll=function(){this.__bindingsOnce=this.__bindings=null};f.prototype.dispatch=function(){if(this.__bindings)for(var c=Array.prototype.slice.call(arguments),
b=this.__bindings.concat(),g,a=0,d=b.length;a<d;a++)g=b[a],g.apply(null,c),-1!=this.find(g,this.__bindingsOnce)&&this.remove(g)};f.prototype.getNumListeners=function(){return this.__bindings?this.__bindings.length:0};f.prototype.registerListener=function(c,b){this.__bindings||(this.__bindings=[],this.__bindingsOnce=[]);-1!=this.find(c)&&b||(this.__bindings.push(c),b&&this.__bindingsOnce.push(c))};f.prototype.find=function(c,b){if(!this.__bindings)return-1;b=b||this.__bindings;if(b.indexOf)return b.indexOf(c);
for(var g=0,a=b.length;g<a;g++)if(b[g]===c)return g;return-1};return f});
(function(){var f=null;define("Arstider/Social",["Arstider/Request"],function(c){function b(){this._token=this.currentNetwork="";this.user=this._sessionTimeout=null;this.friends=[];this._facebookSetupped=!1}b.prototype.login=function(b,a,d,h){var c=this;"facebook"==b&&(requirejs.config({shim:{facebook:{exports:"FB"}},paths:{facebook:"//connect.facebook.net/en_US/all"}}),this.currentNetwork="facebook",requirejs(["facebook"],function(){if(!c._facebookSetupped){var b=window.document.createElement("div");
b.id="fb-root";window.document.body.appendChild(b);FB.init({appId:a.appId,cookie:a.cookie,frictionlessRequests:!0});c._facebookSetupped=!0}FB.getLoginStatus(function(b){"connected"===b.status?(b.authResponse&&(c._token=b.authResponse.accessToken,clearTimeout(c._sessionTimeout),c._sessionTimeout=setTimeout(function(){c.login.apply(c,["facebook"])},1E3*b.authResponse.expiresIn)),FB.api("/me",function(a){c.user=a;FB.api("/me/friends",{access_token:c._token},function(a){c.friends=a.data;d&&d()})})):(a=
a||{},a.permissions=a.permissions||[],-1==a.permissions.indexOf("user_friends")&&a.permissions.push("user_friends"),-1==a.permissions.indexOf("user_location")&&a.permissions.push("user_location"),FB.login(function(a){a.authResponse?c.login.apply(c,["facebook",{},d,h]):h&&h(a)},{scope:a.permissions.join()}))})}))};b.prototype.getInfo=function(b,a,d,h){var c=this.getUser(b),f=0;a=a||[];for(f;f<a.length;f++)if(!(a[f]in c)){"facebook"==this.currentNetwork&&FB.api("/"+b,{access_token:this._token,fields:a.join()},
function(a){a.data?(Arstider.mixin(c,a.data,!0),d&&d(c)):h&&h(a)});return}d&&d(c)};b.prototype.getPictureUrl=function(b,a,d,h,c){var f=this.getUser(b),p="picture_"+Arstider.checkIn(a,100)+"x"+Arstider.checkIn(d,100);f[p]?h&&h(f[p]):"facebook"==this.currentNetwork&&FB.api("/"+b+"/picture?width="+Arstider.checkIn(a,100)+"&height="+Arstider.checkIn(d,100),{access_token:this._token},function(a){a.data&&a.data.url?(f[p]=a.data.url,h&&h(f[p])):c&&c(a)})};b.prototype.getUser=function(b){var a=null,d=0;if("me"==
b||b==this.user.id)a=this.user;else{for(d;d<this.friends.length;d++)if(this.friends[d].id==b){a=this.friends[d];break}null==a&&(a={id:b},this.friends.push(a))}return a};return f=new b})})();
define("Arstider/Sound",["Arstider/Browser","Arstider/Request","Arstider/Timer","Arstider/sounds/Track","Arstider/sounds/HowlerInterface"],function(f,c,b,g,a){function d(){this.tracks={};this.sounds={};this._queue=[];this._callbacks={};this.muted=!1;this.lib=null}var h;d.prototype._init=function(d){h._spriteUrl=d;var b;h.lib=a;var p=".mp3";"firefox"==f.name&&(p=".ogg");(new c({url:d+p,caller:h,cache:!1,track:!0})).send();h.lib.init(h,d);for(b in h.tracks)h.tracks[b]=new g(h.tracks[b]),h.preload(b)};
d.prototype.load=function(a,d,b){d instanceof String||"string"==typeof d?(new c({url:d,caller:h,cache:!1,track:!0,type:"json",callback:function(d){this.sounds=d.sounds||{};this.tracks=d.tracks||{};this._init(a);b&&b()}})).send():(h.sounds=d.sounds||{},h.tracks=d.tracks||{},h._init(a),b&&b());return h};d.prototype.preload=function(a,d,b){f.isMobile||"ie"==f.name||"safari"==f.name&&7>f.version?(h.tracks[a].handle=h.lib.create(a),d&&h.play(a,b)):(new c({url:h.tracks[a].files[0],caller:h,cache:!1,track:!0,
callback:function(){this.tracks[a].handle=this.lib.create(a);d&&h.play(a,b)}})).send();return h};d.prototype.play=function(a,d){d=d||{};if(h.muted)return h;if(a in h.tracks){if(null==h.tracks[a].handle)return h.preload(a,!0,d),h;h.lib.setVolume(h.tracks[a].handle,Arstider.checkIn(d.volume,1));h.lib.playTrack(h.tracks[a].handle,a,d)}else a in h.sounds?h.lib.playSound(h.sounds.handle,a,d):1<Arstider.verbose&&console.warn("Arstider.Sound.play: sound '",a,"' does not exist");return h};d.prototype.fade=
function(a,d,b,g){if(a in h.tracks)return h.lib.fade(h.tracks[a].handle,a,"auto",d,b,g),h;h.checkInstance(a)&&h.lib.fade(h.sounds.handle,a,"auto",d,b,g);return h};d.prototype.setPosition=function(a,d){if(a in h.tracks)return h.lib.setPosition(h.tracks[a].handle,d),h;h.checkInstance(a)&&h.lib.setPosition(h.sounds.handle,d,a);return h};d.prototype._addInstance=function(a,d){h._callbacks[d]=[];h.sounds[a].instances||(h.sounds[a].instances=[]);h.sounds[a].instances.push(d)};d.prototype._removeInstance=
function(a){var d=h._callbacks[a];if(d&&d.length)for(var b=0;b<d.length;b++)d[b]();for(var g in h.sounds)if(h.sounds[g].instances&&0!=h.sounds[g].instances.length)for(b=0;b<h.sounds[g].instances.length;b++)if(h.sounds[g].instances[b]==a){h.sounds[g].instances.splice(b,1);break}h._killCallbacks(a)};d.prototype._killCallbacks=function(a){h._callbacks[a]?h._callbacks[a].length=0:1<Arstider.verbose&&console.warn("Arstider.Sound.killCallbacks: sound instance id unavailable")};d.prototype.getPlaying=function(a,
d){if(a in h.tracks)return h.tracks[a].handle;h.sounds[a].instances||(h.sounds[a].instances=[]);return void 0!=d?h.sounds[a].instances[d]:h.sounds[a].instances};d.prototype.stop=function(a){if(void 0==a)return h.stopAllTracks(),h.stopAllSounds(),h;if(a in h.tracks)return h.lib.stop(h.tracks[a].handle,a),h;h.checkInstance(a)&&h.lib.stop(h.sounds.handle,a);return h};d.prototype.stopAllTracks=function(){for(var a in h.tracks)h.lib.stop(h.tracks[a].handle,a);return h};d.prototype.mute=function(){h.stopAllSounds();
h.stopAllTracks();h.muted=!0;return h};d.prototype.unmute=function(){h.muted=!1;return h};d.prototype.stopAllSounds=function(){h.lib.stop(h.sounds.handle);return h};d.prototype.pause=function(a){if("__emergency-stop__"==a){for(var d in h.tracks)h.lib.pause(h.tracks[d].handle,d);h.lib.pause(h.sounds.handle)}else{if(a in h.tracks)return h.lib.pause(h.tracks[a].handle,a),h;h.checkInstance(a)&&h.lib.pause(h.sounds.handle,a);return h}};d.prototype.resume=function(a){if("__emergency-stop__"==a)for(var d in h.tracks)h.lib.resume(h.tracks[d].handle,
d);else{if(a in h.tracks)return h.lib.resume(h.tracks[a].handle,a),h;h.checkInstance(a)&&h.lib.resume(h.sounds.handle,a);return h}};d.prototype.checkInstance=function(a){for(var d in h.sounds)if(h.sounds[d].instances&&0!=h.sounds[d].instances.length&&-1!=h.sounds[d].instances.indexOf(a))return!0;0<Arstider.verbose&&console.warn("Arstider.Sound.checkInstance: sound instance doesn't exist");return!1};d.prototype.setVolume=function(a,d){if(a in h.tracks)return h.lib.setVolume(h.tracks[a].handle,d,a),
h;h.checkInstance(a)&&h.lib.setVolume(h.sounds.handle,d,a);return h};return h=new d});
(function(){define("Arstider/Sprite",["Arstider/DisplayObject","Arstider/GlobalTimers"],function(f,c){function b(b){b=b||{};Arstider.Super(this,f,b);this.currentAnim=Arstider.checkIn(b.currentAnim,null);this.currentFrame=-1;this.delay=512;this.stopped=this.completed=this.running=!1;c.push(this)}Arstider.Inherit(b,f);b.prototype.killBuffer=function(){this.kill();this.data&&this.data.kill&&this.data.kill();this.data=null;this.currentAnim&&this.currentAnim.sheet.url&&Arstider.bufferPool[this.currentAnim.sheet.url]&&
Arstider.bufferPool[this.currentAnim.sheet.url].kill()};b.prototype.kill=function(){this.running=!1;c.remove(this);return this};b.prototype.step=function(){null==this.currentAnim?(this.delay=512,this.running=!1):!1==this.running&&!1==this.completed&&!1==this.stopped&&(this.running=!0,this.delay=this.currentAnim.time)};b.prototype.finish=function(){var b=!1,a=0,d=null;if(null!==this.currentAnim&&null!==this.currentAnim.sheet.data){d=this.currentAnim.callbacks.length;this.currentFrame++;if(this.currentFrame>
this.currentAnim.frames.length-1)if(this.currentAnim.loops++,null!=this.currentAnim.chainedAnim)this.currentAnim=this.currentAnim.chainedAnim,this.currentFrame=0;else for(this.currentAnim.stop<this.currentAnim.loops&&-1!==this.currentAnim.stop?(this.currentFrame--,b=!0,this.stop()):this.currentFrame=0,a;a<d;a++)this.currentAnim.callbacks[a]&&this.currentAnim.callbacks[a].call(this);!1===b&&(this.running=!0,this.completed=!1,this.delay=this.currentAnim.time,this.showFrame(this.currentAnim.sheet,this.currentAnim.frames[this.currentFrame]))}else this.running=
!0,this.completed=!1,this.delay=this.currentAnim.time};b.prototype.showFrame=function(b,a){this.data=b.data;if(b.frames&&b.frames[a])return this.dataWidth=b.frames[a][2]||b.frameWidth||0,this.dataHeight=b.frames[a][3]||b.frameHeight||0,this.width=this.dataWidth,this.height=this.dataHeight,this.xOffset=b.frames[a][0],this.yOffset=b.frames[a][1],this;0!=b.frameWidth&&(this.width=b.frameWidth);0!=b.frameHeight&&(this.height=b.frameHeight);for(var d=this.height,h=[0,0],c=this.width*a;c>=b.data.width;)c-=
b.data.width,h[1]+=d;h[0]+=c;this.loadSection(b.data,h[0],h[1],this.width,this.height);for(d=this.currentAnim.frameCallbacks.length-1;0<=d;d--)this.currentAnim.frameCallbacks[d]&&this.currentAnim.frameCallbacks[d].call(this,a);return this};b.prototype.stop=function(){this.pause();this.currentFrame=-1;this.delay=null!=this.currentAnim?this.currentAnim.time:512;return this};b.prototype.pause=function(){this.stopped=!0;this.running=!1;return this};b.prototype.resume=function(){c.push(this);this.running=
!0;this.stopped=this.completed=!1;return this};b.prototype.rewind=function(){this.stop();this.resume();this.finish();return this};return b})})();
define("Arstider/SpriteSheet",["Arstider/Bitmap","Arstider/Sequence"],function(f,c){var b=function(b){b=b||{};this.data=null;this.height=this.width=0;this.frames=Arstider.checkIn(b.frames,null);this.frameWidth=Arstider.checkIn(b.width,0);this.frameHeight=Arstider.checkIn(b.height,0);this.onload=Arstider.checkIn(b.onload,null);(b=Arstider.checkIn(Arstider.checkIn(b.data,b.bitmap),null))&&this.loadBitmap(b)};b.prototype.addSequence=function(b,a,d,h){this[b]=new c(this,b,a,d,h);return this[b]};b.prototype.loadBitmap=
function(b){var a=this;"string"===typeof b||b instanceof String?(this.url=b,new f({url:b,callback:function(d){a.data=d.data?d.data:d;0==a.width&&(a.width=d.width);0==a.height&&(a.height=d.height);if(a.onload)a.onload()}})):(a.data=b,0==a.width&&(a.width=b.width),0==a.height&&(a.height=b.height))};return b});
define("Arstider/Tag",["Arstider/Entity","Arstider/Viewport"],function(f,c){function b(b){Arstider.Super(this,f,b);this._tag=window.document.createElement(b.tag||"input");b.type&&(this._tag.type=b.type);b.value&&(this._tag.value=b.value);this._tag.id=b.id||"Arstider_tag_"+this.name;c.tagParentNode.appendChild(this._tag);this.parentNode=c.tagParentNode}Arstider.Inherit(b,f);b.prototype.attr=function(b,a){void 0!=a&&(this._tag[b]=a);return this._tag[b]};b.prototype.style=function(b,a){void 0!=a&&(this._tag.style[b]=
a);return this._tag.style[b]};b.prototype.killBuffer=function(){null!=this.parentNode&&this.parentNode.removeChild(this._tag);this._tag=null};b.prototype.bind=function(b,a){this._tag?this._tag.addEventListener(b,a):0<Arstider.verbose&&console.warn("Arstider.Tag.bind: no DOM element")};b.prototype.unbind=function(b,a){this._tag?this._tag.removeEventListener(b,a):0<Arstider.verbose&&console.warn("Arstider.Tag.unbind: no DOM element")};b.prototype.appendChild=function(b){b.nodeName||b._tag?b.nodeName?
this._tag.appendChild(b):b._tag&&b._tag.nodeName?this._tag.appendChild(b._tag):console.error("Problem with element, cannot append to DOM tree! :: ",b):console.error("Cannot append non-DOM element to DOM tree! :: ",b)};b.prototype._update=function(){this._tag&&(null==this.global.x?this._tag.style.display="none":(this._tag.style.display="block",f.prototype._update.call(this),this._tag.style.position="absolute",this._tag.style.zIndex="999",this._tag.style.left=this.global.x+"px",this._tag.style.top=
this.global.y+"px",this._tag.width=this._tag.style.width=this.global.width+"px",this._tag.height=this._tag.style.height=this.global.height+"px",this._tag.style.opacity=this.global.alpha))};return b});
(function(){var f=null;define("Arstider/Telemetry",["Arstider/Request"],function(c){function b(){this.enabled=!1;this._events={};this._sessionId=Arstider.guid();this._orderId=0;this._targetURLs={}}if(null!=f)return f;b.prototype.log=function(b,a,d){f.enabled&&(d=d||{},d._timestamp=Arstider.timestamp(),d._category=b,d._name=a,d._session=f._sessionId,d._orderId=f._orderId,f._events[b]||(f._events[b]={}),f._events[b][a]||(f._events[b][a]=[]),f._events[b][a].push(d),"screenstart"==a&&f._orderId++,f._send())};
b.prototype.sendTo=function(b,a){f.enabled=!0;a=a||["*"];for(var d=0;d<a.length;d++)f._targetURLs[a[d]]=b;f._send()};b.prototype._send=function(){var b,a,d;for(b in f._events)if(b in f._targetURLs||"*"in f._targetURLs)for(a in f._events[b])for(d=0;d<f._events[b][a].length;d++)if(!f._events[b][a][d].__sent){f._events[b][a][d].__sent=Arstider.timestamp();var h=new c(Arstider.clone(f._targetURLs[b]||f._targetURLs["*"]||{},!0));h.url=h.url.split("[category]").join(b).split("[name]").join(a);h.postData=
JSON.stringify(f._events[b][a][d]);h.send()}};return f=new b})})();
define("Arstider/TextField","Arstider/Buffer Arstider/Entity Arstider/Fonts Arstider/Signal Arstider/texts/Segment Arstider/texts/BBParser".split(" "),function(f,c,b,g,a,d){function h(a){this.fillText=Arstider.checkIn(a.fillText,!0);this.strokeText=Arstider.checkIn(a.strokeText,!1);this._textValue=null;this._words=[];this.textWrap=Arstider.checkIn(a.textWrap,!1);this._font=null;this._custom={};this.dynamic=null;this.onchange=new g;Arstider.Super(this,c,a);void 0!=a.font&&this.setFont(a.font);void 0!=
a.text&&this.setText(a.text)}var k=new c;Arstider.Inherit(h,c);h.prototype.setText=function(b){b+="";b!=this._textValue&&(-1!=b.indexOf(d.breakLine)&&(this.textWrap=!0),this._textValue=b,-1!=b.indexOf(d.openSegment)||this.textWrap?(this._words=d.parse(b),this._words=d.splitSymbol(this._words,d.breakLine,!1,!0),this._words=d.trimSpaces(this._words)):this._words=[new a(b)],this.render())};h.prototype.setFont=function(a,d){this._custom=d||{};this._font=b.get(a);var g=this;this._font._onFontLoaded(function(){g.render.call(g)})};
h.prototype._makeBuffer=function(){null==this.data&&(this.data=new f({name:"Arstider_TextField_"+this.name}))};h.prototype._renderWordList=function(a){var b=0,g=0,h=this.width-2*a.paddingLeft,c=b=0,f=[],g=null,k,v=0;for(k=0;k<this._words.length;k++)this._words[k].calculateWidth(this.data.context,a);v=Math.max(0,a.lineSpacing-parseInt(a.size));if(0<h||this.textWrap){for(k=0;k<this._words.length;k++)-1!=this._words[k].text.indexOf(d.breakLine)&&(null!=g&&f.push(g),g=[],c=0),0<h&&c+this._words[k].width>
h&&(null!=g&&0!=g.length&&f.push(g),g=[],c=0),null==g&&(g=[]),g.push(this._words[k]),c+=this._words[k].width,c>b&&(b=c);g&&0<g.length&&f.push(g)}else f[0]=this._words,b=this._getLineWidth(f[0]);k=f.length*a.lineSpacing+2*a.paddingTop+Math.abs(a.fontOffsetY)+a.shadowBlur+0.25*a.lineSpacing;0>=h?(this.data.setSize(b+2*a.paddingLeft+Math.abs(a.fontOffsetX)+a.shadowBlur,k),h=b):this.data.setSize(this.width,this.height||k);this.width=this.data.width;this.height=this.data.height;this.applyFont(a);this.data.context.textAlign=
"left";for(k=0;k<f.length;k++)for(b=a.paddingLeft+a.fontOffsetX,"right"==a.textAlign?b+=h:"center"==a.textAlign&&(g=this._getLineWidth(f[k]),b+=0.5*(h-g)),g=a.paddingTop+(k+1)*a.lineSpacing+a.fontOffsetY-v,c=0;c<f[k].length;c++)"right"==a.textAlign?(b-=f[k][f[k].length-(c+1)].width,f[k][f[k].length-(c+1)].render(this.data.context,a,b,g,this.strokeText,this.fillText)):(f[k][c].render(this.data.context,a,b,g,this.strokeText,this.fillText),b+=f[k][c].width)};h.prototype._getLineWidth=function(a){for(var d=
0,b=0;b<a.length;b++)d+=a[b].width;return d};h.prototype.applyFont=function(a){for(var d in a)this.data.context[d]=void 0==this[d]||d in k?a[d]:[d];this.data.context.font=(a.bold?"bold ":"")+(a.italic?"italic ":"")+a.size+" "+a.family};h.prototype.render=function(){this._makeBuffer();null==this.dynamic&&(this.dynamic=0==this.width?!0:!1);!0===this.dynamic&&(this.height=this.width=0);if(null!==this._font&&null!==this._textValue&&""!==this._textValue&&!1!==this._font.loaded){this._font.temp&&!b.collection[this._font.name].temp&&
this.setFont(b.get(this._font.name));var a=Arstider.mixin(Arstider.clone(this._font),this._custom,!0);this._renderWordList(a);this.onchange.dispatch(this)}};return h});
(function(){var f=null;define("Arstider/Texture",["Arstider/Buffer","Arstider/Bitmap"],function(c,b){function g(a){a=a||{};this.pattern=null;this.repeat=Arstider.checkIn(a.repeat,"repeat");this.url=Arstider.checkIn(a.data,a.url||"");this.callback=a.callback||Arstider.emptyFunction;""!=this.url&&this.loadBitmap(this.url)}null==f&&(f=new c({name:"Arstider_textureLoader",width:100,height:100}));g.prototype.loadBitmap=function(a,d){if("string"===typeof a||a instanceof String){var g=this;this.url=a;new b({url:a,
callback:function(a){g._createPattern.apply(g,[a,d])}})}else g._createPattern(a,d)};g.prototype._createPattern=function(a,d){var b=Arstider.getNode(a);b&&b.data?this.pattern=f.context.createPattern(b.data,this.repeat):console.error("Arstider.Texture.createPattern: no data");d?d.apply(this):this.callback(this)};g.prototype.setSize=function(a,d){f.setSize(a,d);this.loadBitmap(this.url)};return g})})();
define("Arstider/Timer",["Arstider/GlobalTimers"],function(f){function c(b,g,a){this.running=!0;this.completed=!1;this.delay=this.initialDelay=g;this.callback=b;this._clockBased=a;this._startTime=this._internalTimer=null;this._clockBased?this.resume():f.push(this)}c.prototype.pause=function(){this.running=!1;this._clockBased&&(clearTimeout(this._internalTimer),this._internalTimer=null,this.delay-=Arstider.timestamp()-this._startTime);return this};c.prototype.kill=function(){this._clockBased?this.pause():
(this.running=!1,f.remove(this))};c.prototype.resume=function(){this.running=!0;if(this._clockBased&&null==this._internalTimer){var b=this;this._startTime=Arstider.timestamp();clearTimeout(this._internalTimer);this._internalTimer=setTimeout(function(){b.finish.call(b)},this.delay)}return this};c.prototype.restart=function(){this.completed=!1;this.delay=this.initialDelay;this.resume();return this};c.prototype.finish=function(){this.running=!1;this.callback();!0!=this.running&&(this.completed=!0);return this};
return c});
define("Arstider/Tween",["Arstider/Easings","Arstider/GlobalTimers","Arstider/tweens/Transformation","Arstider/tweens/Animation","Arstider/tweens/Action"],function(f,c,b,g,a){function d(a,d,b,g,c){this.target=a;this.completed=this.running=!1;this._stack=[];this._currentStep=0;this.delay=512;d&&this._addAnimation(d,b,g,c)}d.DEFAULT_EASING=f.LINEAR;d.DEFAULT_TIME=1E3;d.AUTO_KILL=!1;d.to=function(a,b,g,c){return(new d(a)).to(a,b,g,c).play()};d.from=function(a,b,g,c){return(new d(a)).from(a,b,g,c).play()};
d.prototype.to=function(a,d,b,g){b&&0<b.delay&&this.sleep(b.delay);this._addAnimation(d,b,g);return this};d.prototype.from=function(a,d,b,g){var c,f,t={};for(f in d)c=d[f],t[f]=a[f],a[f]=c;return this.to(a,t,b,g)};d.prototype._addAnimation=function(a,b,c,f){var m;0<b||0===b?m=b:b&&(m=b.time,c=b.easing);m||0===m||(m=d.DEFAULT_TIME);c||(c=d.DEFAULT_EASING);this._stack.push(new g(this.target,a,m,c,f))};d.prototype._addAction=function(d,b){this._stack.push(new a(d,b))};d.prototype.nextStep=function(){var a;
if(this._stack[this._currentStep].changes)for(a=this._stack[this._currentStep].changes.length-1;0<=a;a--)this._stack[this._currentStep].changes[a].lastStep=this.target[this._stack[this._currentStep].changes[a].property],this.target[this._stack[this._currentStep].changes[a].property]=this._stack[this._currentStep].changes[a].end;this._currentStep++;if(this._currentStep<this._stack.length&&this._stack[this._currentStep].changes)for(a=this._stack[this._currentStep].changes.length-1;0<=a;a--)this._stack[this._currentStep].changes[a].start=
this.target[this._stack[this._currentStep].changes[a].property];return this};d.prototype.step=function(){this.delay=512;this._currentStep<this._stack.length?0<this._stack[this._currentStep].time?(this._stack[this._currentStep].step&&this._stack[this._currentStep].step(this),this._stack[this._currentStep].time-=Arstider.chop(1E3/Arstider.FPS)):(this.nextStep(),this.step()):(this.completed=!0,d.AUTO_KILL&&this.kill())};d.prototype.play=function(){c.push(this);this.running=!0;return this};d.prototype.pause=
function(){this.running=!1;return this};d.prototype.resume=function(){this.completed||(this.running=!0);return this};d.prototype.sleep=function(a){var d={};d["__tweenSleep"+Arstider.timestamp()]=a;this.then(d,a);return this};d.prototype.then=function(a,d,b,g){a instanceof Function||"function"===typeof a?this._addAction(a,d):this._addAnimation(a,d,b,g);return this};d.prototype.rewind=function(){this._currentStep=0;for(var a=this._stack.length-1;0<=a;a--)this._stack[a].rewind();this.step();return this};
d.prototype.reverse=function(){var a,d,c;for(c=this._stack.length-1;0<=c;c--)if(this._stack[c].changes){a=new g(this,{},this._stack[c].startTime,this._stack[c].easing,this._stack[c].easingOpt);for(d=this._stack[c].changes.length-1;0<=d;d--)a.changes.push(new b(this._stack[c].changes[d].property,this._stack[c].changes[d].start,this._stack[c].changes[d].end));this._stack.push(a)}return this};d.prototype.kill=d.prototype.stop=function(){this.running=!1;c.remove(this);return this};d.prototype.loop=function(a){this._addAction(this.rewind,
Arstider.checkIn(a,-1));return this};d.prototype.yoyo=function(){this._addAction(this.reverse);return this};d.prototype.stepBack=function(){this._stack[this._currentStep].stepBack?this._stack[this._currentStep].stepBack(this):2<Arstider.verbose&&console.warn("Arstider.Tween.stepBack: no step to back to");return this};return d});
define("Arstider/Viewport",["Arstider/Browser","Arstider/Events"],function(f,c){function b(){this.tag=null;this.orientation="landscape";this.canvasRatio=1;this.preserveAspect=!1;this.visibleWidth=this.visibleHeight=this.yOffset=this.xOffset=0;this.globalScale=1;this.maxWidth=1136;this.maxHeight=672;this.minWidth=960;this.minHeight=536;this._cancelFullscreenEvent=this._requestFullscreenEvent=this.container=null;this.geolocationEnabled=!1;this._geoloc=null;this.accelerometerEnabled=this.vibrationEnabled=
!1;this._tilt={x:0,y:0,z:0};this.unsupportedOrientation=!1;setTimeout(this.vibrate,0)}var g;b.prototype.init=function(a,d){g.container=a.appendChild?a:window.document.getElementById(a);if(g.container){g.container.appendChild(d);g.tag=d;g.container.style.position="relative";g.container.style.display="block";g.container.style.width="100%";g.container.style.height="100%";window.addEventListener("resize",g._resize);f.isMobile&&window.addEventListener("orientationchange",g._rotate);window.onbeforeunload=
g._unload;window.addEventListener("pagehide",g._pagehide);var b,c;"undefined"!==typeof window.document.hidden?(b="hidden",c="visibilitychange"):"undefined"!==typeof window.document.mozHidden?(b="mozHidden",c="mozvisibilitychange"):"undefined"!==typeof window.document.msHidden?(b="msHidden",c="msvisibilitychange"):"undefined"!==typeof window.document.webkitHidden?(b="webkitHidden",c="webkitvisibilitychange"):(b="body",visibilitychange="blur");"safari"==f.name&&f.isMobile?function(){var a,d=Arstider.timestamp();
setInterval(function(){a=Arstider.timestamp();120<a-d&&g._pageshow();d=a},50)}():window.addEventListener("focus",g._pageshow);window.document.addEventListener(c,function(){window.document[b]?g._pagehide():g._pageshow()});g._requestFullscreenEvent=g.tag.requestFullScreen?"requestFullScreen":g.tag.mozRequestFullScreen?"mozRequestFullScreen":g.tag.webkitRequestFullScreenWithKeys?"webkitRequestFullScreenWithKeys":g.tag.webkitRequestFullScreen?"webkitRequestFullScreen":"FullscreenError";g._cancelFullscreenEvent=
window.document.cancelFullScreen?"cancelFullScreen":window.document.mozCancelFullScreen?"mozCancelFullScreen":window.document.webkitCancelFullScreen?"webkitCancelFullScreen":"FullscreenError";window.ondevicemotion=function(a){a=a||window.event;null!=a.accelerationIncludingGravity.x&&null!=a.accelerationIncludingGravity.y&&null!=a.accelerationIncludingGravity.z&&(g.accelerometerEnabled=!0,g._tilt.x=a.accelerationIncludingGravity.x,g._tilt.y=a.accelerationIncludingGravity.y,g._tilt.z=a.accelerationIncludingGravity.z)};
g._rotate()}else 0<Arstider.verbose&&console.warn("Arstider.Viewport.init: no DOM element specified, viewport broken")};b.prototype.enterFullScreen=function(a){(a=Arstider.checkIn(a,!1))?g.tag.classList.add("fs_scaled_element"):g.tag.classList.remove("fs_scaled_element");a=g.tag[g._requestFullscreenEvent]();c.broadcast("Viewport.enterFullscreen",g);return a};b.prototype.quitFullScreen=function(){var a=window.document[g._cancelFullscreenEvent]();c.broadcast("Viewport.quitFullscreen",g);return a};b.prototype._resize=
function(a){f.isMobile&&(g._rotate(),"landscape"==g.orientation?(window.document.body.style.width=window.innerWidth+"px",window.document.body.style.height=window.innerHeight+"px"):(window.document.body.style.height=window.innerWidth+"px",window.document.body.style.width=window.innerHeight+"px"));var d,b=1,k,l,p,m;d=window.getComputedStyle(g.container,null);if("landscape"==g.orientation)a=parseInt(d.getPropertyValue("width")),d=parseInt(d.getPropertyValue("height"));else if("portrait"==g.orientation)a=
parseInt(d.getPropertyValue("height")),d=parseInt(d.getPropertyValue("width"));else return;g.preserveAspect?(g.tag.style.left="0px",g.tag.style.top="0px",g.tag.style.width=g.maxWidth+"px",g.tag.style.height=g.maxHeight+"px",g.tag.style.position="absolute",g.tag.width=g.maxWidth,g.tag.height=g.maxHeight,c.broadcast("Viewport.resize",g),window.document.body.scrollTop=0):(f.isMobile&&2*a>=g.minWidth&&2*a<=g.maxWidth&&2*d>=g.minHeight&&2*d<=g.maxHeight?b=0.5:(k=a/g.minWidth,l=d/g.minHeight,b=Arstider.min(k,
l),b=Arstider.min(1,b)),k=Arstider.chop(g.maxWidth*b),l=Arstider.chop(g.maxHeight*b),p=Arstider.chop(0.5*(a-k)),m=Arstider.chop(0.5*(d-l)),g.xOffset=p,g.yOffset=m,g.tag.style.left=p+"px",g.tag.style.top=m+"px",g.tag.style.width=k+"px",g.tag.style.height=l+"px",g.tag.style.position="absolute",g.tag.width=g.maxWidth,g.tag.height=g.maxHeight,g.canvasRatio=b,g.visibleWidth=Arstider.chop(a/b),g.visibleHeight=Arstider.chop(d/b),g.visibleWidth=Arstider.min(g.visibleWidth,g.maxWidth)/g.globalScale,g.visibleHeight=
Arstider.min(g.visibleHeight,g.maxHeight)/g.globalScale,g.tagParentNode=window.document.getElementById("Arstider_tag_overlay"),g.tagParentNode||(g.tagParentNode=window.document.createElement("div"),g.tagParentNode.id="Arstider_tag_overlay",g.tag.parentNode.appendChild(g.tagParentNode),g.tagParentNode.style.position="absolute",g.tagParentNode.style.display="block",g.tagParentNode.style.zIndex=9999,g.tagParentNode.style.overflow="hidden"),g.tagParentNode.style.width=g.tag.style.width,g.tagParentNode.style.height=
g.tag.style.height,g.tagParentNode.style.left=g.tag.style.left,g.tagParentNode.style.top=g.tag.style.top,c.broadcast("Viewport.resize",g),f.isMobile&&(window.document.body.scrollTop=0))};b.prototype._rotate=function(a){a=g.orientation;g.orientation=f.isMobile?"android"==f.name?90==window.orientation||-90==window.orientation?"portrait":"landscape":window.innerHeight>window.innerWidth?"portrait":"landscape":"landscape";g.orientation!=a&&c.broadcast("Viewport.rotate",g)};b.prototype._unload=function(a){c.broadcast("Viewport.unload",
g)};b.prototype._pagehide=function(a){Arstider.pageHidden=!0;c.broadcast("Viewport.pagehide",g)};b.prototype._pageshow=function(a){Arstider.pageHidden=!1;c.broadcast("Viewport.pageshow",g)};b.prototype.getGeolocation=function(a){null==g._geoloc?g.updateGeolocation(a):a(g._geoloc)};b.prototype.updateGeolocation=function(a){if(navigator.geolocation){g.geolocationEnabled=!0;try{navigator.geolocation.getCurrentPosition(function(d){g._geoloc=d;a&&a(g._geoloc)})}catch(d){g.geolocationEnabled=!1,g._geoloc=
{},0<Arstider.verbose&&console.warn("Arstider.Viewport.updateGeolocation: ",d)}}else g.geolocationEnabled=!1,g._geoloc={},a&&a(g._geoloc)};b.prototype.vibrate=function(a){a=a||0;var d=window.navigator.vibrate||window.navigator.webkitVibrate||window.navigator.mozVibrate||window.navigator.msVibrate;if(f.isMobile)if(d)try{d(0),d(a)}catch(b){0<Arstider.verbose&&console.warn("Arstider.Browser.vibrate: error while trying to vibrate API may be broken")}else 1<Arstider.verbose&&console.warn("Arstider.Browser.vibrate: feature not supported");
else 2<Arstider.verbose&&console.warn("Arstider.Browser.vibrate: feature not supported")};b.prototype.getDeviceTilt=function(){return g._tilt};b.prototype.removeDecorations=function(a){a=a||window;a.locationbar&&(a.locationbar.visible=!1);a.menubar&&(a.menubar.visible=!1);a.personalbar&&(a.personalbar.visible=!1);a.scrollbars&&(a.scrollbars.visible=!1);a.statusbar&&(a.statusbar.visible=!1);a.toolbar&&(a.toolbar.visible=!1)};b.prototype.setGlobalScale=function(a){var d=1/g.globalScale;g.visibleWidth/=
d;g.visibleHeight/=d;g.globalScale=a;g.visibleWidth/=a;g.visibleHeight/=a;c.broadcast("Viewport.globalScaleChange",a)};b.prototype.changeResolution=function(a,d,b,c){g.maxWidth=d;g.maxHeight=c;g.minWidth=a||0;g.minHeight=b||0;g._resize()};return g=new b});(function(){var f=null;define("Arstider/Watermark",["Arstider/DisplayObject"],function(c){return null!=f?f:f=new c})})();
(function(){var f=[];define("Arstider/commons/Ad",["Arstider/Tag"],function(c){var b={Banner:function(b){b=b||{};b.tag="iframe";Arstider.Super(this,c,b);f.push(this);this.attr("seamless","seamless");this.attr("scrolling","no");this.style("border","0px");this.style("backgroundColor","white");b.url&&this.loadUrl(b.url)}};Arstider.Inherit(b.Banner,c);b.Interstitial=function(b){b=b||{};b.tag="iframe";Arstider.Super(this,c,b);f.push(this);this.fill(1,1);this.dock(0.5,0.5);this.attr("seamless","seamless");
this.attr("scrolling","no");this.style("border","0px");this.style("backgroundColor","black");b.url&&this.loadUrl(b.url)};Arstider.Inherit(b.Interstitial,c);b.Banner.prototype.loadUrl=b.Interstitial.prototype.loadUrl=function(b){this._tag.src=b};b.Banner.prototype.close=b.Interstitial.prototype.close=function(){var b=f.indexOf(this);-1<b&&f.splice(b,1);this.killBuffer()};b.closeAll=function(){for(var b=f.length-1;0<=b;b--)f[b].close()};return b})})();
define("Arstider/commons/Button",["Arstider/DisplayObject","Arstider/TextField","Arstider/Mouse","Arstider/Browser"],function(f,c,b,g){function a(a){Arstider.Super(this,f,a);a=a||{states:{}};this.enabled=Arstider.checkIn(a.enabled,!0);this.currentState=null;this.states={};this.currentCursor=b.getCursor();this.hitbox=Arstider.checkIn(a.hitbox,Arstider.checkIn(a.hitBox,null));for(var g in a.states)this.addState(g,a.states[g]);this.enabled?this.showState("normal"):this.showState("disabled");null!=this.hitbox&&
this.addHitbox(this.hitbox)}Arstider.Inherit(a,f);a.prototype._onhover=function(){null==this.hitbox&&this.enabled&&!g.isMobile&&(b.setCursor("pointer"),this.showState("hover"),f.prototype._onhover.call(this))};a.prototype._onleave=function(){null==this.hitbox&&(b.setCursor(this.currentCursor),this.enabled?this.showState("normal"):this.showState("disabled"),f.prototype._onleave.call(this))};a.prototype._onpress=function(){null==this.hitbox&&this.enabled&&(this.showState("pressed"),f.prototype._onpress.call(this))};
a.prototype._onrelease=function(){null==this.hitbox&&this.enabled&&(b.setCursor(this.currentCursor),this.showState("normal"),f.prototype._onrelease.call(this))};a.prototype.addState=function(a,b){var g=this,l=new f({name:a+"State",alpha:0}),p=Arstider.checkIn(b.image,Arstider.checkIn(b.data,Arstider.checkIn(b.bitmap,null)));null!=p&&("string"===typeof p?l.loadBitmap(p,function(a){0==g.height&&(g.height=a.height);0==g.width&&(g.width=a.width)}):null!=p.data&&(l.data=p.data,l.width=p.width,l.height=
p.height,l.dataHeight=p.dataHeight,l.dataWidth=p.dataWidth,l.xOffset=p.xOffset,l.yOffset=p.yOffset,0==this.height&&(this.height=p.height),0==this.width&&(this.width=p.width)));var m=Arstider.checkIn(b.label,Arstider.checkIn(b.text,null));null!=m&&(l.label=new c({text:m,width:b.textWidth||100,strokeText:b.strokeText||!1}),b.font&&l.label.setFont(b.font),l.label.dock(0.5,0.5),l.addChild(l.label));null!=b.icon&&(l.icon="string"===typeof b.icon?new f({data:b.icon}):null!=p.data?b.icon:new f,l.addChild(l.icon));
this.addChild(l);this.states[a]=l};a.prototype.showState=function(a){if(this.currentState!=a)if(a in this.states){for(s in this.states)this.states[s].alpha=s==a?1:0;this.currentState=a}else 1<Arstider.verbose&&console.warn("Arstider.commons.Button.showState: unexisting state ",a)};a.prototype.addHitbox=function(a){var c=this;this.hitbox=new f({x:a[0],y:a[1],width:a[2],height:a[3],onleave:function(){b.setCursor(c.currentCursor);c.enabled?c.showState("normal"):c.showState("disabled");f.prototype._onleave.call(c)},
onrelease:function(){c.enabled&&(b.setCursor(c.currentCursor),c.showState("normal"),f.prototype._onrelease.call(c))},onhover:function(){c.enabled&&!g.isMobile&&(b.setCursor("pointer"),c.showState("hover"),f.prototype._onhover.call(c))},onpress:function(){c.enabled&&(c.showState("pressed"),f.prototype._onpress.call(c))}});this.addChild(this.hitbox)};a.prototype.enable=function(){this.enabled=!0;this.showState("normal")};a.prototype.disable=function(){this.enabled=!1;this.showState("disabled")};return a});
define("Arstider/commons/CollisionMap",["Arstider/Bitmap","Arstider/Entity"],function(f,c){function b(b){Arstider.Super(this,c,b);b=b||{};this._maskData=this._collMask=null;this._collMaskUrl=Arstider.checkIn(b.mask,null);this._collMaskScale=Arstider.checkIn(b.maskScale,1);this._debugDraw=Arstider.checkIn(b.debug,!1);null!=this._collMaskUrl&&this.loadMask(this._collMaskUrl)}Arstider.Inherit(b,c);b.prototype.setScale=function(b){this._collMaskScale=b};b.prototype.loadMask=function(b){var a=this;"string"===
typeof b||b instanceof String?new f({url:b,callback:function(b){a._collMask=b.data;a._maskData=Arstider.saveToCanvas("CollisionMap_"+a._collMaskUrl,b.data).context2D().getImageData(0,0,b.width,b.height);a._parseMap();0==a.width&&(a.width=a.dataWidth=b.width);0==a.height&&(a.height=a.dataHeight=b.height);a._debugDraw&&a._drawShape.apply(a)}}):(a.data=b,0==a.width&&(a.width=b.width),0==a.height&&(a.height=b.height))};b.prototype._drawShape=function(){this.alpha=0.25;this.data=this._collMask;this.scaleX=
this.scaleY=this._collMaskScale};b.prototype._parseMap=function(){for(var b=[],a=this._maskData.data.length,d=0;d<a;d+=4)b[b.length]=0===this._maskData.data[d]?1:null;this._maskData=b;Arstider.bufferPool["CollisionMap_"+this._collMaskUrl]&&Arstider.bufferPool["CollisionMap_"+this._collMaskUrl].kill()};b.prototype.updateAt=function(b,a,d){this._maskData[Arstider.chop(a/this._collMaskScale)*this.width+Arstider.chop(b/this._collMaskScale)]=d};b.prototype.collisionAt=function(b,a){return 1===this._maskData[Arstider.chop(a/
this._collMaskScale)*this.width+Arstider.chop(b/this._collMaskScale)]};return b});
define("Arstider/commons/ComboBox","Arstider/DisplayObject Arstider/TextField Arstider/commons/Input Arstider/Keyboard Arstider/Mouse Arstider/Events Arstider/commons/Scrollbar".split(" "),function(f,c,b,g,a,d,h){function k(a){Arstider.Super(this,f,a);var d=this;this.addScrollbar=!1;this.scrollValue=0;var c=new f({name:this.name+"_comboBox"});c.imageBar=Arstider.checkIn(a.bar,Arstider.checkIn(a.imageBar,null));c.imageButton=Arstider.checkIn(a.button,Arstider.checkIn(a.imageButton,null));c.imageList=
Arstider.checkIn(a.list,Arstider.checkIn(a.imageList,null));c.imageSlider=Arstider.checkIn(a.slider,Arstider.checkIn(a.imageSlider,null));c.imageHandle=Arstider.checkIn(a.handle,Arstider.checkIn(a.imageHandle,null));c.dataList=Arstider.checkIn(a.data,Arstider.checkIn(a.dataList,["item1","item2","item3","item4"]));c.font=Arstider.checkIn(a.font,Arstider.checkIn(a.fontList,null));c.heightItem=Arstider.checkIn(a.heightItem,Arstider.checkIn(a.heightText,Arstider.checkIn(a.heightOption,40)));c.widthItem=
Arstider.checkIn(a.widthItem,Arstider.checkIn(a.widthText,Arstider.checkIn(a.widthOption,140)));c.imageBarDisabled=Arstider.checkIn(a.barDisabled,Arstider.checkIn(a.imageBarDisabled,c.imageBar));c.imageButtonPress=Arstider.checkIn(a.buttonPress,Arstider.checkIn(a.imageButtonPress,c.imageButton));c.imageButtonDisabled=Arstider.checkIn(a.buttonDisabled,Arstider.checkIn(a.imageButtonDisabled,c.imageButton));c.imageListFocus=Arstider.checkIn(a.listFocus,Arstider.checkIn(a.imageListFocus,null));c.placeHolder=
Arstider.checkIn(a.placeHolder,Arstider.checkIn(a.placeholder," "));c.label=Arstider.checkIn(a.label," ");c.disabled=Arstider.checkIn(a.disabled,!1);c.inputX=Arstider.checkIn(a.inputX,Arstider.checkIn(a.inputTextX,null));c.inputY=Arstider.checkIn(a.inputY,Arstider.checkIn(a.inputTextY,null));c.inputSize=Arstider.checkIn(a.inputSize,Arstider.checkIn(a.inputTextSize,20));c.buttonX=Arstider.checkIn(a.buttonX,null);c.buttonY=Arstider.checkIn(a.buttonY,null);c.scrollbarX=Arstider.checkIn(a.scrollbarX,
null);c.scrollbarY=Arstider.checkIn(a.scrollbarY,null);c.bar=new f({name:this.name+"_bar",data:c.disabled?c.imageBarDisabled:c.imageBar,onload:function(){c.bar.textInput.y=c.inputY?c.inputY:c.bar.height/2-10;c.bar.textInput.x=c.inputX?c.inputX:8}});c.bar.textInput=new b({name:this.name+"_input",placeholder:c.placeHolder,label:c.label,enabled:!c.disabled,size:c.inputSize});c.bar.button=new f({name:this.name+"_button",data:c.disabled?c.imageButtonDisabled:c.imageButton,onclick:function(){c.disabled||
(0==c.list.alpha?(d.addScrollbar&&d.getAttr("scrollbar").setValue(0),d.showList()):c.list.alpha=0)},onpress:function(){c.disabled||c.bar.button.loadBitmap(c.imageButtonPress)},onhover:function(){c.disabled||c.bar.button.loadBitmap(c.imageButtonPress)},onleave:function(){c.disabled||c.bar.button.loadBitmap(c.imageButton)},onrelease:function(){c.disabled||c.bar.button.loadBitmap(c.imageButton)}});c.list=new f({name:this.name+"_list",data:c.imageList,alpha:0,onload:function(){setTimeout(function(){c.list.y=
c.bar.height;c.bar.button.x=c.buttonX?c.buttonX:c.bar.width-c.bar.button.width;c.bar.button.y=c.buttonY?c.buttonY:0;d.listHeight=c.list.height;d.listWidth=c.list.width;d.addScrollBar()},1)},onhover:function(){d.addScrollbar&&d.getAttr("scrollbar").setFocus(!0)}});c.addChild(c.bar);c.addChild(c.bar.textInput);c.addChild(c.bar.button);c.addChild(c.list);this.addChild(c);this.showNewItem(c.dataList);this.startSearch()}Arstider.Inherit(k,f);k.prototype.getDisabled=function(){return this.getAttr("comboBox").disabled};
k.prototype.setDisabled=function(a){this.getAttr("comboBox").disabled=a;this.getAttr("button").loadBitmap(a?this.getAttr("comboBox").imageButtonDisabled:this.getAttr("comboBox").imageButton);this.getAttr("bar").loadBitmap(a?this.getAttr("comboBox").imageBarDisabled:this.getAttr("comboBox").imageBar);a?this.getAttr("input").disable():this.getAttr("input").enable()};k.prototype.getValue=function(){return this.getAttr("input").value()};k.prototype.setValue=function(a){this.getAttr("input").attr("value",
a)};k.prototype.addItem=function(a){if("string"===typeof a)this.getAttr("comboBox").dataList.push(a);else{for(var b=0;b<a.length;b++)this.getAttr("comboBox").dataList.push(a[b]);this.addScrollbar&&this.getAttr("scrollbar").setSizeParent(this.getAttr("comboBox").heightItem*(this.getAttr("comboBox").dataList.length-(this.getAttr("scrollbar").itemVisible-1)))}this.showNewItem(a)};k.prototype.showNewItem=function(a){var b=this;a="string"===typeof a?this.getAttr("comboBox").dataList.length-1:this.getAttr("comboBox").dataList.length-
a.length;for(a;a<this.getAttr("comboBox").dataList.length;a++){var d=new f({name:this.name+"_item_"+a,alpha:1E-13,y:a*this.getAttr("comboBox").heightItem,height:this.getAttr("comboBox").heightItem,width:this.getAttr("comboBox").widthItem,onhover:function(){this.alpha=1},onleave:function(){this.alpha=1E-13},onclick:function(){b.getAttr("input").attr("value",b.getAttr("comboBox").dataList[this.num]);b.getAttr("list").alpha=0;b.oldLength=b.getAttr("input").value().length}});this.getAttr("comboBox").imageListFocus&&
d.loadBitmap(this.getAttr("comboBox").imageListFocus);d.num=a;var g=new c({name:this.name+"_txt_"+a,alpha:1,width:this.getAttr("comboBox").widthItem,height:this.getAttr("comboBox").heightItem,y:a*this.getAttr("comboBox").heightItem});g.setText(this.getAttr("comboBox").dataList[a]);g.setFont(this.getAttr("comboBox").font);this.getAttr("list").addChild(d);this.getAttr("list").addChild(g)}};k.prototype.showList=function(a){if(!this.getAttr("comboBox").disabled){this.getAttr("list").height=this.listHeight;
this.getAttr("list").width=this.listWidth;this.getAttr("list").loadSection(this.getAttr("comboBox").imageList,0,0,this.listWidth,this.listHeight);this.getAttr("list").alpha=1;a||(a=0);var b=this.getAttr("comboBox").dataList.length;if(this.addScrollbar){var d=this.getAttr("scrollbar").itemVisible;this.getAttr("scrollbar").alpha=1;this.getAttr("scrollbar").step=100/(this.getAttr("comboBox").dataList.length-(d-1));0>a&&(a=0);a+d>this.getAttr("comboBox").dataList.length?(b=this.getAttr("comboBox").dataList.length,
a=this.getAttr("comboBox").dataList.length-d):b=a+d;this.getAttr("scrollbar").index=a}for(d=0;d<this.getAttr("comboBox").dataList.length;d++)this.getAttr("txt",d).alpha=this.getAttr("item",d).alpha=0;d=0;for(a;a<b;a++)this.getAttr("item",a).y=this.getAttr("txt",a).y=this.getAttr("comboBox").heightItem*d,this.getAttr("txt",a).alpha=1,this.getAttr("item",a).alpha=1E-13,d++}};k.prototype.resizeList=function(a){a*=this.getAttr("comboBox").heightItem;a<=this.listHeight&&this.getAttr("list").loadSection(this.getAttr("comboBox").imageList,
0,this.listHeight-a,this.listWidth,a)};k.prototype.addScrollBar=function(a){if(this.getAttr("comboBox").imageSlider&&this.getAttr("comboBox").imageHandle&&(this.addScrollbar=this.getAttr("comboBox").heightItem*this.getAttr("comboBox").dataList.length>this.listHeight)){a=this.listHeight/this.getAttr("comboBox").heightItem;a=Math.round(a)>a?Math.round(a)-1:Math.round(a);var b=new h({name:this.name+"_scrollbar",data:this.getAttr("comboBox").imageSlider,handle:this.getAttr("comboBox").imageHandle,maxSize:this.getAttr("comboBox").heightItem*
(this.getAttr("comboBox").dataList.length-(a-1)),y:this.getAttr("comboBox").scrollbarY?this.getAttr("comboBox").scrollbarY:0,x:this.getAttr("comboBox").scrollbarX?this.getAttr("comboBox").scrollbarX:this.getAttr("comboBox").widthItem});b.itemVisible=a;this.getAttr("list").addChild(b)}};k.prototype.startSearch=function(){var a=this,b;g.bind("any","up",function(){length=a.getAttr("input").value().length;b=a.getAttr("comboBox");if(0==length||length==a.oldLength)a.getAttr("list").alpha=0;else{for(var d=
0,c=0;c<b.dataList.length;c++){if(a.addScrollbar&&d>a.getAttr("scrollbar").itemVisible)return;0==b.dataList[c].search(a.getAttr("input").value())?(a.getAttr("list").alpha=1,a.getAttr("item",c).alpha=1E-13,a.getAttr("txt",c).alpha=1,a.getAttr("txt",c).y=a.getAttr("item",c).y=d*b.heightItem,d++):(a.getAttr("item",c).alpha=0,a.getAttr("txt",c).alpha=0)}0==d?a.getAttr("list").alpha=0:(a.addScrollbar&&(a.getAttr("scrollbar").alpha=0),a.resizeList(d))}a.oldLength=length})};k.prototype.update=function(){!a.isPressed()||
this.getAttr("bar").collides(a.x()-this.x,a.y()-this.y,1,1)||this.getAttr("list").collides(a.x()-this.x,a.y()-this.y,1,1)||(this.addScrollbar?this.getAttr("scrollbar").getIsDragged()||(this.getAttr("list").alpha=0):this.getAttr("list").alpha=0);if(this.addScrollbar&&this.scrollValue!=this.getAttr("scrollbar").getValue()){var b=this.getAttr("scrollbar").getValue("%")/this.getAttr("scrollbar").step,b=Math.round(b);this.showList(b);this.scrollValue=this.getAttr("scrollbar").getValue()}};k.prototype.getAttr=
function(a,b){var d;switch(a){case "comboBox":d=this.getChild(this.name+"_comboBox");break;case "bar":case "list":case "input":case "button":d=this.getChild(this.name+"_comboBox").getChild(this.name+"_"+a);break;case "item":case "txt":d=this.getChild(this.name+"_comboBox").getChild(this.name+"_list").getChild(this.name+"_"+a+"_"+b);break;case "scrollbar":d=this.getChild(this.name+"_comboBox").getChild(this.name+"_list").getChild(this.name+"_"+a)}return d};return k});
(function(){function f(b,c){return b+(2*Math.random()*c-c)}var c={spawnRate:150,startingIndex:0,maxLifeTime:100,maxLifeTimeVariant:0,xVelocity:0,xVelocityDecay:0,xVelocityVariant:0,yVelocity:0,yVelocityDecay:0,yVelocityVariant:0,scale:1,scaleDecay:0,scaleVariant:0,rotation:0,rotationDecay:0,rotationVariant:0,alpha:1,alphaDecay:0,alphaVariant:0};define("Arstider/commons/Emitter",["Arstider/DisplayObject","Arstider/commons/Pool"],function(b,g){function a(a){Arstider.Super(this,b,a);this.modulePool=
[];this.canonTimers={};this.canonActivated=!1;this._container=new b}Arstider.Inherit(a,b);a.prototype.addParticleType=function(a,b,f){f=f||Arstider.emptyObject;f=Arstider.mixin(f,c);this.modulePool.push({name:a,module:b,options:f});g.prealloc(b,1);this.canonActivated&&(this.stop(),this.start())};a.prototype.removeParticleType=function(a){for(var b=0;b<this.modulePool.length;b++)this.modulePool[b].name===a&&this.modulePool.splice(b,1);this.canonActivated&&(this.stop(),this.start())};a.prototype.start=
function(){this.canonActivated=!0;null==this._container.parent&&this.parent.addChild(this._container);for(var a=0;a<this.modulePool.length;a++)void 0==this.canonTimers[this.modulePool[a].name]&&this.spawn(this.modulePool[a])};a.prototype.stop=function(){this.canonActivated=!1;for(var a in this.canonTimers)clearTimeout(this.canonTimers[a]);this.canonTimers={}};a.prototype.spawn=function(a){var b=this;this.canonActivated&&(this.canonTimers[a.name]=setTimeout(function(){b.spawn.apply(b,[a])},a.options.spawnRate||
150),g.get(a.module,function(b){Arstider.mixin(b.__particleInfo,a.options,!0);0!=b.__particleInfo.maxLifeTimeVariant&&(b.__particleInfo.maxLifetime=f(b.__particleInfo.maxLifetime,b.__particleInfo.maxLifeTimeVariant));0!=b.__particleInfo.xVelocityVariant&&(b.__particleInfo.xVelocity=f(b.__particleInfo.xVelocity,b.__particleInfo.xVelocityVariant));0!=b.__particleInfo.yVelocityVariant&&(b.__particleInfo.yVelocity=f(b.__particleInfo.yVelocity,b.__particleInfo.yVelocityVariant));0!=b.__particleInfo.scaleVariant&&
(b.__particleInfo.scale=f(b.__particleInfo.scale,b.__particleInfo.scaleVariant));0!=b.__particleInfo.rotationVariant&&(b.__particleInfo.rotation=f(b.__particleInfo.rotation,b.__particleInfo.rotationVariant));0!=b.__particleInfo.alphaVariant&&(b.__particleInfo.alpha=f(b.__particleInfo.alpha,b.__particleInfo.alphaVariant));b.rotation=b.__particleInfo.rotation;b.alpha=b.__particleInfo.alpha;1<b.alpha&&(b.alpha=1);0>b.alpha&&(b.alpha=0);b.scaleX=b.scaleY=b.__particleInfo.scale;b.x=this.x;b.y=this.y;b.parent=
this._container;b.__particleInfo.startingIndex<this._container.children.length?this._container.children.splice(b.__particleInfo.startingIndex,0,b):this._container.children[this.children.length]=b}))};a.prototype.update=function(){for(var a,b=this._container.children.length-1;0<=b;b--)a=this._container.children[b],a.__particleInfo.lifeTime++,a.__particleInfo.lifeTime>=a.__particleInfo.maxLifeTime||0>=a.alpha?(a.parent=null,g.free(a,!0),this._container.children.splice(b,1)):(a.alpha-=a.__particleInfo.alphaDecay,
a.rotation+=a.__particleInfo.rotation,a.scaleX*=a.__particleInfo.scale,a.scaleY*=a.__particleInfo.scale,a.x+=a.__particleInfo.xVelocity,a.y+=a.__particleInfo.yVelocity,a.__particleInfo.rotation+=a.__particleInfo.rotationDecay,a.__particleInfo.scale-=a.__particleInfo.scaleDecay,a.__particleInfo.xVelocity-=a.__particleInfo.xVelocityDecay,a.__particleInfo.yVelocity-=a.__particleInfo.yVelocityDecay)};return a})})();
define("Arstider/commons/GridLayer",["Arstider/DisplayObject","Arstider/Bitmap","Arstider/Buffer","Arstider/Preloader"],function(f,c,b,g){function a(a,b,d){for(var c=d.length-1;0<=c;c--)if(d[c].x===a&&d[c].y===b)return d[c];return null}function d(a,b,d,p,m,r){Arstider.Super(this,f);this.tileSizeX=d;this.tileSizeY=p;this.name=a;this.tiles=[];this.chunks=[];this._lockRequested=this.locked=!1;this.mapData=b.tiles;this._parseRequested=!1;this._texturePosSave={};var t=this;this._data=null;g.progress("_mapLayer"+
this.name+"Setup",0);new c({url:b.asset||Arstider.emptyImgSrc,callback:function(a){t._data=a.data;t._parseRequested=!0;t._parseFOV.apply(t,[[0,m,0,r]]);t._prepareChunks.apply(t);g.progress("_mapLayer"+t.name+"Setup",100)}})}d.MIN_CHUNK_SIZE=860;Arstider.Inherit(d,f);d.prototype._getTileTexturePos=function(a,b){if(void 0!=this._texturePosSave[a])return this._texturePosSave[a];2<Arstider.verbose&&console.warn("Arstider.GridLayer._getTileTexturePos: texture tile not found");for(var d=a*this.tileSizeX,
c=0;d>=b;)d-=b,c+=this.tileSizeY;this._texturePosSave[a]=[d,c];return this._texturePosSave[a]};d.prototype._createTile=function(b,d){var c=a(b,d,this.mapData);if(void 0==c)return Arstider.emptyObject;var p=new f({x:b*this.tileSizeX,y:d*this.tileSizeY,name:this.name+"_tile_"+b+"_"+d,width:this.tileSizeX,height:this.tileSizeY});void 0!=c.tileId&&(p.data=this._data,p.dataWidth=this.tileSizeX,p.dataHeight=this.tileSizeY,p.largeData=!0,p.xOffset=this._getTileTexturePos(c.tileId,this._data.width)[0],p.yOffset=
this._getTileTexturePos(c.tileId)[1]);if(c.spawns&&0<c.spawns.length)for(var m=0;m<c.spawns.length;m++)(function(a,b,d,c,f){g.progress("_mapSpawn"+d+"_"+c+"_"+f+b[d].module,0);try{requirejs([b[d].module],function(h){void 0==a.spawns&&(a.spawns=[]);void 0==b[d].props&&(b[d].props={});void 0==b[d].props.x&&(b[d].props.x=c);void 0==b[d].props.y&&(b[d].props.y=f);a.spawns.push(new h(b[d].props));g.progress("_mapSpawn"+d+"_"+c+"_"+f+b[d].module,100)})}catch(h){console.warn("Spawn error:",h)}})(p,c.spawns,
m,b*this.tileSizeX,d*this.tileSizeY);return p};d.prototype.lock=function(){if(this._parseRequested){for(var a=new b({width:this.chunks[0].width,height:this.chunks[0].height,name:"__mapChunkBuffer"}),d=0,c=0,g,f=0;f<this.chunks.length;f++){this.chunks[f].alpha=1;for(a.setSize(this.chunks[f].width,this.chunks[f].height);d+this.chunks[f]._startTileX<this.chunks[f]._endTileX;){for(;c+this.chunks[f]._startTileY<this.chunks[f]._endTileY;)this.tiles[d+this.chunks[f]._startTileX]&&this.tiles[d+this.chunks[f]._startTileX][c+
this.chunks[f]._startTileY]&&(g=this.tiles[d+this.chunks[f]._startTileX][c+this.chunks[f]._startTileY],null!=g.data&&(a.context.drawImage(g.data,g.xOffset,g.yOffset,g.dataWidth,g.dataHeight,d*this.tileSizeX,c*this.tileSizeY,this.tileSizeX,this.tileSizeY),g._dataLocked=g.data,g.data=null)),c++;c=0;d++}this.chunks[f].loadBitmap(a.getURL())}a.kill();this.locked=!0}else this._lockRequested=!0};d.prototype.unlock=function(){if(this._lockRequested)this._lockRequested=!1;else{for(var a=0;a<this.chunks.length;a++)this.chunks[a].killBuffer(),
this.chunks[a].alpha=0;for(a=0;a<this.tiles.length;a++)for(var b=0;b<this.tiles[a].length;b++)this.tiles[a][b]&&this.tiles[a][b]._dataLocked&&(this.tiles[a][b].data=this.tiles[a][b]._dataLocked,this.tiles[a][b]._dataLocked=null);this.locked=!1}};d.prototype._prepareChunks=function(){for(var a=null,b=Arstider.ceil(d.MIN_CHUNK_SIZE/this.tileSizeX),c=Arstider.ceil(this.parent.mapWidth/b),g=Arstider.ceil(d.MIN_CHUNK_SIZE/this.tileSizeY),m=Arstider.ceil(this.parent.mapHeight/g),r=0,t=0;r<c;){for(;t<m;)a=
new f({x:r*b*this.tileSizeX,y:t*g*this.tileSizeY,height:g*this.tileSizeY,width:b*this.tileSizeX}),a._startTileX=r*b*this.tileSizeX,a._startTileY=t*g*this.tileSizeY,a._endTileX=a._startTileX+b,a._endTileY=a._startTileY+g,a._numTilesX=b,a._numTilesY=g,a._endTileX>this.parent.mapWidth&&(a.width-=(a._endTileX-this.parent.mapWidth)*this.tileSizeX,a._endTileX=this.parent.mapWidth),a._endTileY>this.parent.mapHeight&&(a.height-=(a._endTileY-this.parent.mapHeight)*this.tileSizeY,a._endTileY=this.parent.mapHeight),
this.chunks.push(a),t++;t=0;r++}};d.prototype._parseFOV=function(a){this.children=[];a=a||this.parent._getRenderZone();var b,d,c=[];for(b=a[0];b<a[1];b++)if(0<=b&&b<=this.parent.mapWidth)for(void 0==this.tiles[b]&&(this.tiles[b]=[]),d=a[2];d<a[3];+d++)0<=d&&d<=this.parent.mapHeight&&(void 0==this.tiles[b][d]&&(this.tiles[b][d]=this._createTile(b,d)),this.locked||null!=this.tiles[b][d].data&&(this.children[this.children.length]=this.tiles[b][d]),this.tiles[b][d].spawns&&0!=this.tiles[b][d].spawns.length&&
(c=c.concat(this.tiles[b][d].spawns)));if(this.locked)for(b=0;b<this.chunks.length;b++)this.chunks[b]._startTileX<a[1]&&this.chunks[b]._endTileX>a[0]&&this.chunks[b]._startTileY<a[3]&&this.chunks[b]._endTileY>a[2]&&(this.children[this.children.length]=this.chunks[b]);this.children=this.children.concat(c)};d.prototype.update=function(){this._parseRequested?this._parseFOV():this.cancelBubble()};return d});
define("Arstider/commons/GridMap",["Arstider/commons/GridLayer","Arstider/DisplayObject","Arstider/Viewport"],function(f,c,b){function g(a){Arstider.Super(this,c);this.layers={};this.mapWidth=parseInt(a.width);this.mapHeight=parseInt(a.height);this.fov=parseInt(a.fov);this.tileSizeX=parseInt(a.tileSizeX);this.tileSizeY=parseInt(a.tileSizeY);this.width=this.mapWidth*this.tileSizeX;this.height=this.mapHeight*this.tileSizeY;this.__renderZone=[];this.__safeKey=2*Math.random();for(var b in a.layers)this.addLayer(b,
a.layers[b])}Arstider.Inherit(g,c);g.prototype.addLayer=function(a,b){this.layers[a]=new f(a,b,this.tileSizeX,this.tileSizeY,this.mapWidth,this.mapHeight);this.addChild(this.__safeKey,this.layers[a])};g.prototype.removeLayer=function(a){this.removeChild(this.layers[a]);delete this.layers[a]};g.prototype.getTilesOf=function(a,b){for(var c=[],g=0,f=0,p=Arstider.floor(b.global.x/this.tileSizeX),m=Arstider.floor(b.global.y/this.tileSizeY),r=Arstider.ceil(b.global.width/this.tileSizeX),t=Arstider.ceil(b.global.height/
this.tileSizeY);g<r;){for(;f<t;)this.layers[a][p+g]&&this.layers[a][p+g][m+f]&&c.push(this.layers[a][p+g][m+f]),f++;f=0;g++}return c};g.prototype.canStep=function(a,b,c){a=this.getTile(a,b,c);return null!=a?1===!a.__collidable:!0};g.prototype.getTile=function(a,b,c){return this[a].tiles[b]?this[a].tiles[b][c]:null};g.prototype._getRenderZone=function(){this.__renderZone[0]=-1*Arstider.ceil(this.global.x/this.tileSizeX)-this.fov;this.__renderZone[1]=this.__renderZone[0]+(Arstider.ceil(b.maxWidth/this.tileSizeX)+
2*this.fov);this.__renderZone[2]=-1*Arstider.ceil(this.global.y/this.tileSizeY)-this.fov;this.__renderZone[3]=this.__renderZone[2]+(Arstider.ceil(b.maxHeight/this.tileSizeY)+2*this.fov);return this.__renderZone};g.prototype.addChild=function(a,b){var c,g=0;if(a===this.__safeKey){b.parent=this;if(0!=this.children.length)for(c=0;c<this.children.length;c++){if(this.children[c].index>b.index&&g<=b.index){this.children.splice(c,0,b);return}g=this.children[c].index}this.children.push(b)}else 0<Arstider.verbose&&
console.warn("Arstider.GridMap.addChild: operation was cancelled, cannot addChild on a GridMap object, must perform operation on a GridLayer")};return g});
define("Arstider/commons/Input",["Arstider/Tag"],function(f){function c(b){this.enabled=Arstider.checkIn(b.enabled,!0);b.tag=b.label?"label":"input";Arstider.Super(this,f,b);var c;b.label?(this._tag.innerHTML=b.label,c=window.document.createElement("input"),c.id=this.name+"_input",this._tag.appendChild(c)):c=this._tag;c.type=b.password?"password":"text";b.className&&(c.className=b.className);b.placeholder&&(c.placeholder=b.placeholder);b.size&&(c.size=b.size);this.enabled||(this.enabled=!0,this.disable())}
Arstider.Inherit(c,f);c.prototype.enable=function(){if(!this.enabled){this.enabled=!0;var b=this.getField();b.classList.remove("disabled");delete b.readonly;b.disabled=!1}};c.prototype.disable=function(){if(this.enabled){this.enabled=!1;var b=this.getField();b.classList.add("disabled");b.readonly="readonly";b.disabled=!0}};c.prototype.attr=function(b,c){this.getField()[b]=c};c.prototype.style=function(b,c){this.getField().style[b]=c};c.prototype.value=function(){return this.getField().value};c.prototype.getField=
function(){return"input"==this._tag.tagName?this._tag:this._tag.children[0]};return c});
(function(){function f(b){b=b.toString();return b.substring(b.indexOf("function")+9,b.indexOf("("))}var c=null;define("Arstider/commons/Pool",[],function(){function b(){this._sets={};this.useKey="__inUse";this._caps={};this._pending={}}if(null!=c)return c;b.prototype.prealloc=function(b,a,d){a-=1;var c=f(b);for(a;0<=a;a--)this._alloc(c,b);this._caps[c]=d||9999;return this};b.prototype._alloc=function(b,a){var d=new a;d[this.useKey]=!1;b in this._sets?void 0==this._sets[b][0]?this._sets[b][0]=d:this._sets[b].push(d):
this._addSet(b,d);return d};b.prototype.free=function(b,a){var d=0,c=f(b.constructor);if(c in this._sets)for(d=this._sets[c].length,d;0<=d;d--)if(this._sets[c][d]==b){a?this._sets[c].splice(d,1):0<this._pending[c].length?this._pending[c].shift()(this._sets[c][d]):this._sets[c][d][this.useKey]=!1;break}return this};b.prototype.get=function(b,a){var d=0,c=f(b);if(c in this._sets)for(d=this._sets[c].length-1,d;0<=d;d--)!1==this._sets[c][d][this.useKey]&&(this._sets[c][d][this.useKey]=!0,a(this._sets[c][d]));
void 0==this._sets[c]||this._sets[c].length<this._caps[c]?a(this._alloc(c,b)):this._pending[c].push(a)};b.prototype._addSet=function(b,a){this._sets[b]=[a];this._pending[b]=[]};b.prototype.removeSet=function(b){delete this._sets[f(b)]};return c=new b})})();
define("Arstider/commons/Popup",["Arstider/DisplayObject","Arstider/Viewport"],function(f,c){function b(b){Arstider.Super(this,f,b);b=b||Arstider.emptyObject;this.overlay=new f({name:"overlay",alpha:0});this.addChild(this.overlay);var a=this,d=Arstider.checkIn(b.bg,Arstider.checkIn(b.image,null)),h=Arstider.checkIn(b.popup,null);if(null!=d&&"string"===typeof d){var k=new f({name:"backgroundOverlay",onclick:function(){a.hidePopup()}});k.loadBitmap(d);this.overlay.addChild(k)}if(null!=h){var l=new f({name:"PopupBackground",
onclick:function(){Arstider.cancelBubble()},onload:function(){l.x=c.maxWidth/2-l.width/2;l.y=c.maxHeight/2-l.height/2}});"string"===typeof h?l.loadBitmap(h):(h.data=Arstider.checkIn(b.popup.image,Arstider.checkIn(b.popup.bg,null)),l.loadBitmap(h.data),l.x=h.x,l.y=h.y);this.overlay.addChild(l)}}Arstider.Inherit(b,f);b.prototype.showPopup=function(){this.overlay.alpha=1};b.prototype.hidePopup=function(){this.overlay.alpha=0};return b});
define("Arstider/commons/Radio",["Arstider/DisplayObject","Arstider/TextField"],function(f,c){function b(b){Arstider.Super(this,f,b);var h=this;this.disabled=Arstider.checkIn(b.disabled,!1);this.isCheckBox=Arstider.checkIn(b.checkBox,!1);var k=new f({name:"btnRadio"+this.name,onclick:function(){this.disabled||k.disabled||h.changeState(k)}});k.id=a;k.disabled=this.disabled;k.name=Arstider.checkIn(b.name,"btnRadio"+a);k.image=Arstider.checkIn(b.image,Arstider.checkIn(b.btnRadio,Arstider.checkIn(b.data,
null)));k.imageCheck=Arstider.checkIn(b.imageCheck,Arstider.checkIn(b.btnRadioCheck,Arstider.checkIn(b.dataCheck,null)));k.imageDisabled=Arstider.checkIn(b.imageDisabled,Arstider.checkIn(b.btnRadioDisabled,Arstider.checkIn(b.dataDisabled,null)));k.imageDisabledCheck=Arstider.checkIn(b.imageDisabledCheck,Arstider.checkIn(b.btnRadioDisabledCheck,Arstider.checkIn(b.dataDisabledCheck,null)));b.defaultChecked&&(k.defaultChecked=k.checked=b.defaultChecked);this.btnRadio=this.updateState(k);this.addChild(this.btnRadio);
if(b.label){var l=new c({strokeText:b.strokeText||!1});this.btnRadio.addChild(l);l.name=Arstider.checkIn(b.label.name,"labelBtnRadio"+a);l.width=Arstider.checkIn(b.label.width,50);l.x=Arstider.checkIn(b.label.x,0-l.width-4);l.y=Arstider.checkIn(b.label.y,k.height/2);l.font=Arstider.checkIn(b.label.font,Arstider.checkIn(b.font),null);l.fontDisabled=Arstider.checkIn(b.label.fontDisabled,Arstider.checkIn(b.fontDisabled),null);b.label.text?l.setText(b.label.text):"string"===typeof b.label&&l.setText(b.label);
k.disabled?(l.fontDisabled||(l.fontDisabled=l.font),l.setFont(l.fontDisabled)):l.setFont(l.font);this.btnRadio.label=l}if(b.icon){var p=new f({onload:function(){p.x=Arstider.checkIn(b.icon.x,0-p.width-6);p.y=Arstider.checkIn(b.icon.y,0-p.height/2+k.height/2)}});this.btnRadio.addChild(p);p.name=Arstider.checkIn(b.icon.name,"iconBtnRadio"+a);p.image="string"===typeof b.icon?b.icon:Arstider.checkIn(b.icon.image,Arstider.checkIn(b.icon.data,null));p.imageDisabled="string"===typeof b.iconDisabled?b.iconDisabled:
Arstider.checkIn(b.icon.imageDisabled,Arstider.checkIn(b.icon.dataDisabled,null));!k.disabled&&p.image?p.loadBitmap(p.image):(p.imageDisabled||(p.imageDisabled=p.image),p.loadBitmap(p.imageDisabled));this.btnRadio.icon=p}g[k.name]||(g[k.name]={});g[k.name][k.id]=k;a++}var g={},a=0;Arstider.Inherit(b,f);b.prototype.getDisabled=function(){return this.btnRadio.disabled};b.prototype.setDisabled=function(a){this.btnRadio.disabled=a;this.updateState(this.btnRadio)};b.prototype.getChecked=function(){return this.btnRadio.checked};
b.prototype.setChecked=function(a){a?this.btnRadio.disabled?(this.btnRadio.checked=!0,this.updateState(this.btnRadio)):this.isCheckBox?(this.btnRadio.checked=!0,this.updateState(this.btnRadio)):(this.btnRadio.checked=!0,this.changeState(this.btnRadio)):(this.btnRadio.checked=!1,this.updateState(this.btnRadio))};b.prototype.changeState=function(b){if(b.checked)b.checked&&this.isCheckBox&&!b.disabled&&(b.loadBitmap(b.image),b.checked=!1);else if(!b.disabled){for(a in g[b.name])a==b.id||g[b.name][a].disabled||
(g[b.name][a].checked=!1,g[b.name][a].loadBitmap(g[b.name][a].image));b.loadBitmap(b.imageCheck);b.checked=!0}};b.prototype.updateState=function(a){a.disabled?(a.checked&&null!=a.imageDisabledCheck?a.loadBitmap(a.imageDisabledCheck):null!=a.imageDisabled&&a.loadBitmap(a.imageDisabled),a.icon&&a.icon.loadBitmap(a.icon.imageDisabled),a.label&&a.label.setFont(a.label.fontDisabled)):(null!=a.image&&null!=a.imageCheck&&(a.checked?a.loadBitmap(a.imageCheck):a.loadBitmap(a.image)),a.icon&&a.icon.loadBitmap(a.icon.image),
a.label&&a.label.setFont(a.label.font));return a};return b});
define("Arstider/commons/Random",[],function(){function f(c){this.seed=c&&!isNaN(c)?c:Arstider.timestamp();this.j_=this.i_=0;this.S_=[];this.init((""+c).split(""))}f.prototype.init=function(c){var b,g,a;for(b=0;256>b;++b)this.S_[b]=b;for(b=g=0;256>b;++b)g=g+this.S_[b]+c[b%c.length]&255,a=this.S_[b],this.S_[b]=this.S_[g],this.S_[g]=a;this.j_=this.i_=0};f.prototype.next=function(){var c;this.i_=this.i_+1&255;this.j_=this.j_+this.S_[this.i_]&255;c=this.S_[this.i_];this.S_[this.i_]=this.S_[this.j_];this.S_[this.j_]=
c;return this.S_[c+this.S_[this.i_]&255]};return f});
define("Arstider/commons/Scrollbar",["Arstider/DisplayObject","Arstider/Mouse","Arstider/Events"],function(f,c,b){function g(a){Arstider.Super(this,f,a);var b=this;this.orientation=Arstider.checkIn(a.orientation,Arstider.checkIn(a.scrollbarOrientation,"default"));this.focus=!1;this.testMouse=!0;var c=new f({name:this.name+"_scrollbar",alpha:0,onload:function(){"default"==b.orientation&&(b.orientation=c.width>c.height?"horizontale":"verticale",b.scrollHeight=c.height,b.scrollWidth=c.width)}});c.imageBar=
Arstider.checkIn(a.scrollbar,Arstider.checkIn(a.image,Arstider.checkIn(a.data,Arstider.checkIn(a.imageBar,null))));c.imageHandle=Arstider.checkIn(a.handle,Arstider.checkIn(a.imageHandle,Arstider.checkIn(a.dataHandle,null)));c.imageBarDisabled=Arstider.checkIn(a.scrollbarDisabled,Arstider.checkIn(a.imageDisabled,Arstider.checkIn(a.dataDisabled,Arstider.checkIn(a.imageBarDisabled,c.imageBar))));c.imageHandleDisabled=Arstider.checkIn(a.handleDisabled,Arstider.checkIn(a.imageHandleDisabled,Arstider.checkIn(a.dataHandleDisabled,
c.imageHandle)));c.sizeParent=Arstider.checkIn(a.maxSize,Arstider.checkIn(a.maxValue,Arstider.checkIn(a.sizeParent,100)));c.defaultValue=Arstider.checkIn(a.value,Arstider.checkIn(a.defaultValue,0));c.disabled=Arstider.checkIn(a.disabled,!1);c.min=0;if(c.imageBar&&c.imageHandle){var g=new f({name:this.name+"_handle",onload:function(){setTimeout(function(){"horizontale"==b.orientation?(b.handleSize||(b.handleSize=g.width),c.max=100*c.sizeParent/c.width,b.resizeHandle(c),g.y=g.height,l.y=-(g.height/
2-c.height/2)-g.height,l.width=c.width-g.width,l.height=p.height=g.height,p.y=-(g.height/2-c.height/2),p.width=c.width,c.defaultValue>c.width-g.width&&(c.defaultValue=c.width-g.width)):"verticale"==b.orientation&&(b.handleSize||(b.handleSize=g.height),c.max=100*c.sizeParent/c.height,b.resizeHandle(c),g.x=g.width,l.x=-(g.width/2-c.width/2)-g.width,l.height=c.height-g.height,l.width=p.width=g.width,p.x=-(g.width/2-c.width/2),p.height=c.height,c.defaultValue>c.height-g.height&&(c.defaultValue=c.height-
g.height));b.setValue(c.defaultValue)},1)}});c.disabled?(c.loadBitmap(c.imageBarDisabled),g.loadBitmap(c.imageHandleDisabled)):(c.loadBitmap(c.imageBar),g.loadBitmap(c.imageHandle));var l=new f({name:this.name+"_containerDrag"});this.addChild(l);var p=new f({name:this.name+"_containerClick",onpress:function(){c.disabled||(b.startDrag(g),b.focus=!0)},onrelease:function(){b.stopDrag(g)}});this.addChild(p);l.addChild(g)}c.handle=g;this.scrollbar=c;this.startMouseWheel(this.scrollbar)}Arstider.Inherit(g,
f);g.prototype.getDisabled=function(){return this.scrollbar.disabled};g.prototype.setDisabled=function(a){this.scrollbar.disabled=a;this.updateState(this.scrollbar)};g.prototype.getValue=function(a){if("horizontale"==this.orientation){if("px"==a||void 0==a)return this.scrollbar.handle.x;if("%"==a)return Math.round(100*this.scrollbar.handle.x/(this.scrollbar.width-this.scrollbar.handle.width))}else if("verticale"==this.orientation){if("px"==a||void 0==a)return this.scrollbar.handle.y;if("%"==a)return Math.round(100*
this.scrollbar.handle.y/(this.scrollbar.height-this.scrollbar.handle.height))}};g.prototype.setValue=function(a,b){"horizontale"==this.orientation?"px"==b||void 0==b?this.scrollbar.handle.x=a:"%"==b&&(this.scrollbar.handle.x=a*(this.scrollbar.width-this.scrollbar.handle.width)/100):"verticale"==this.orientation&&("px"==b||void 0==b?this.scrollbar.handle.y=a:"%"==b&&(this.scrollbar.handle.y=a*(this.scrollbar.height-this.scrollbar.handle.height)/100))};g.prototype.getIsDragged=function(){return this.scrollbar.handle._dragged};
g.prototype.setFocus=function(a){this.focus=a};g.prototype.getSizeParent=function(){return this.scrollbar.sizeParent};g.prototype.setSizeParent=function(a){this.scrollbar.sizeParent=a;this.scrollbar.defaultValue=this.orientation?this.scrollbar.handle.x:this.scrollbar.handle.y;this.scrollbar.handle.onload()};g.prototype.startDrag=function(a){a._dragOffsetX=0;a._dragOffsetY=0;a._dragged=!0;"horizontale"==this.orientation?a._dragOffsetX=a.parent.global.x+a.width/2:"verticale"==this.orientation&&(a._dragOffsetY=
a.parent.global.y+a.height/2);a._boundDrag=!0};g.prototype.stopDrag=function(a){void 0!=a&&a._dragged&&setTimeout(function(){a._dragged=!1;a._dragOffsetX=0;a._dragOffsetY=0;a._boundDrag=!1},0)};g.prototype.updateState=function(a){this.scrollbar.defaultValue=this.orientation?this.scrollbar.handle.x:this.scrollbar.handle.y;a.loadBitmap(a.disabled?a.imageBarDisabled:a.imageBar);a.handle.loadBitmap(a.disabled?a.imageHandle:a.imageHandleDisabled)};g.prototype.resizeHandle=function(a){var b="horizontale"==
this.orientation?!0:!1,c=this.handleSize,g=c-c*c/a.sizeParent;if(!(0>=g)){a.handle.removeChildren();var l=new f({name:this.name+"_subHandle1",alpha:1});l.loadSection(a.disabled?a.imageHandleDisabled:a.imageHandle,0,0,b?c/2-g/2:a.handle.width,b?a.handle.height:c/2-g/2);a.handle.addChild(l);var p=new f({name:this.name+"_subHandle2",x:b?l.width:0,y:b?0:l.height,alpha:1});p.loadSection(a.disabled?a.imageHandleDisabled:a.imageHandle,b?l.width+g:0,b?0:l.height+g,b?c-g-l.width:l.width,b?l.height:c-g-l.height);
a.handle.addChild(p);a.handle.loadSection(0,0,0,0,0);a.handle.width=b?l.width+p.width:l.width;a.handle.height=b?l.height:l.height+p.height}};g.prototype.startMouseWheel=function(a){var d=this;b.bind("Mouse.wheel",function(b){if(d.focus&&!d.scrollbar.disabled)if("horizontale"==d.orientation){var c=0>=a.handle.x-1&&0>b;a.handle.x+1>=a.width-a.handle.width&&0<b||c||(a.handle.x+=2*b)}else"verticale"==d.orientation&&(c=0>=a.handle.y-1&&0<b,a.handle.y+1>=a.height-a.handle.height&&0>b||c||(a.handle.y-=2*
b))})};g.prototype.update=function(){!c.isPressed()&&this.scrollbar.handle._dragged&&this.stopDrag(this.scrollbar.handle);if(c.isPressed()&&this.testMouse){this.testMouse=!1;var a=c.x()>this.parent.global.x+this.parent.width||c.x()<this.parent.global.x,b=c.y()>this.parent.global.y+this.parent.height||c.y()<this.parent.global.y;(a||b)&&this.focus?this.focus=!1:a||b||this.focus||(this.focus=!0)}c.isPressed()||this.testMouse||(this.testMouse=!0)};return g});
define("Arstider/commons/Slider",["Arstider/DisplayObject","Arstider/Mouse"],function(f,c){function b(a){Arstider.Super(this,f,a);var b=this;c.x();c.y();var h=new f({name:"slider"+g,onload:function(){"default"==h.orientation&&(h.orientation=h.width>h.height?k.orientation="horizontale":k.orientation="verticale",this.slider&&(this.slider.orientation=h.orientation))}});h.disabled=Arstider.checkIn(a.disabled,!1);h.imageBar=Arstider.checkIn(a.slider,Arstider.checkIn(a.image,Arstider.checkIn(a.data,Arstider.checkIn(a.imageBar,
null))));h.imageHandle=Arstider.checkIn(a.handle,Arstider.checkIn(a.imageHandle,Arstider.checkIn(a.dataHandle,null)));h.imageHandle2=Arstider.checkIn(a.handle2,Arstider.checkIn(a.imageHandle2,Arstider.checkIn(a.dataHandle2,null)));h.imageBarDisabled=Arstider.checkIn(a.sliderDisabled,Arstider.checkIn(a.imageDisabled,Arstider.checkIn(a.dataDisabled,Arstider.checkIn(a.imageBarDisabled,h.imageBar))));h.imageHandleDisabled=Arstider.checkIn(a.handleDisabled,Arstider.checkIn(a.imageHandleDisabled,Arstider.checkIn(a.dataHandleDisabled,
h.imageHandle)));h.imageHandle2Disabled=Arstider.checkIn(a.handle2Disabled,Arstider.checkIn(a.imageHandle2Disabled,Arstider.checkIn(a.dataHandle2Disabled,h.imageHandle2)));h.max=Arstider.checkIn(a.max,Arstider.checkIn(a.maxValue,100));h.min=Arstider.checkIn(a.min,Arstider.checkIn(a.minValue,0));h.orientation=Arstider.checkIn(a.orientation,Arstider.checkIn(a.sliderOrientation,"default"));h.defaultValue=Arstider.checkIn(a.value,Arstider.checkIn(a.defaultValue,0));h.defaultValues=Arstider.checkIn(a.values,
Arstider.checkIn(a.defaultValues,[0,100]));if(h.imageBar&&h.imageHandle){var k=new f({name:"handle"+g,onpress:function(){h.imageHandle2&&b.startDrag(k)},onload:function(){"horizontale"==h.orientation?(k.y=k.height,p.y=-(k.height/2-h.height/2)-k.height,p.width=h.width-k.width,p.height=m.height=k.height,m.y=-(k.height/2-h.height/2),m.width=h.width):"verticale"==h.orientation&&(k.x=k.width,p.x=-(k.width/2-h.width/2)-k.width,p.height=h.height-k.height,p.width=m.width=k.width,m.x=-(k.width/2-h.width/2),
m.height=h.height);h.imageHandle2?b.setValue(h.defaultValues[0]):b.setValue(h.defaultValue)}});if(h.imageHandle2)var l=new f({name:"handle2"+g,onpress:function(){h.disabled||l.collides(k.x,k.y,k.width,k.height)||b.startDrag(l)},onload:function(){"horizontale"==h.orientation?(l.y=l.height,p.y=-(l.height/2-h.height/2)-l.height,p.width=h.width-l.width,p.height=m.height=l.height,m.y=-(l.height/2-h.height/2),m.width=h.width):"verticale"==h.orientation&&(l.x=l.width,p.x=-(l.width/2-h.width/2)-l.width,p.height=
h.height-l.height,p.width=m.width=l.width,m.x=-(l.width/2-h.width/2),m.height=h.height);b.setValue(h.defaultValues[1],2)}});h.disabled?(h.loadBitmap(h.imageBarDisabled),k.loadBitmap(h.imageHandleDisabled),h.imageHandle2&&l.loadBitmap(h.imageHandle2Disabled)):(h.loadBitmap(h.imageBar),k.loadBitmap(h.imageHandle),h.imageHandle2&&l.loadBitmap(h.imageHandle2));var p=new f({name:"containerDrag"+g});this.addChild(p);k.orientation=h.orientation;k.globalX=Arstider.checkIn(a.x,0);k.globalY=Arstider.checkIn(a.y,
0);var m=new f({name:"containerClick"+g,onpress:function(){h.disabled||h.imageHandle2||b.startDrag(k)},onrelease:function(){b.stopDrag(k);b.stopDrag(l)},onleave:function(){b.stopDrag(k);b.stopDrag(l)}});this.addChild(m);h.imageHandle2&&p.addChild(l);p.addChild(k)}h.handle=k;h.imageHandle2&&(l.globalX=k.globalX,l.globalY=k.globalY,l.orientation=k.orientation,h.handle2=l);this.slider=h;g++}var g=0;Arstider.Inherit(b,f);b.prototype.getDisabled=function(){return this.slider.disabled};b.prototype.setDisabled=
function(a){this.slider.disabled=a;this.updateState(this.slider)};b.prototype.getValue=function(){return Math.round(this.slider.handle.x*(this.slider.max-this.slider.min)/(this.slider.width-this.slider.handle.width))};b.prototype.setValue=function(a,b){void 0==b&&(b=1);1==b?"horizontale"==this.slider.orientation?this.slider.handle.x=a*(this.slider.width-this.slider.handle.width)/(this.slider.max-this.slider.min):"verticale"==this.slider.orientation&&(this.slider.handle.y=a*(this.slider.height-this.slider.handle.height)/
(this.slider.max-this.slider.min)):2==b&&("horizontale"==this.slider.orientation?this.slider.handle2.x=a*(this.slider.width-this.slider.handle.width)/(this.slider.max-this.slider.min):"verticale"==this.slider.orientation&&(this.slider.handle2.y=a*(this.slider.height-this.slider.handle.height)/(this.slider.max-this.slider.min)))};b.prototype.startDrag=function(a){a._dragOffsetX=0;a._dragOffsetY=0;a._dragged=!0;"horizontale"==a.orientation?a._dragOffsetX=a.globalX:"verticale"==a.orientation&&(a._dragOffsetY=
a.globalY);a._boundDrag=!0};b.prototype.stopDrag=function(a){void 0!=a&&a._dragged&&setTimeout(function(){a._dragged=!1;a._dragOffsetX=0;a._dragOffsetY=0;a._boundDrag=!1},0)};b.prototype.updateState=function(a){a.disabled?(a.loadBitmap(a.imageBarDisabled),a.handle.loadBitmap(a.imageHandleDisabled),a.imageHandle2&&a.handle2.loadBitmap(a.imageHandle2Disabled)):(a.loadBitmap(a.imageBar),a.handle.loadBitmap(a.imageHandle),a.imageHandle2&&a.handle2.loadBitmap(a.imageHandle2))};return b});
define("Arstider/commons/StateMachine",["Arstider/Events"],function(f){function c(){this.stack=[];this.prevState=null}c.prototype.update=function(){var b=this.getCurrentState();b.fct&&b.fct.apply(b.caller);b.evt&&this.prevState!=b&&f.broadcast(b.evt,b.caller);this.prevState=b;return this};c.prototype.popState=function(){this.stack.pop();return this};c.prototype.pushState=function(b,c,a){this.getCurrentState()!=b&&this.stack.push({fct:b,caller:Arstider.checkIn(c,this),evt:a});return this};c.prototype.getCurrentState=
function(){return 0<this.stack.length?this.stack[this.stack.length-1]:null};return c});
(function(){var f=null;define("Arstider/contexts/Canvas2d",[],function(){function c(){}if(null!=f)return f;c.prototype.init=function(b,c){c&&c()};c.prototype.save=function(b){b.save()};c.prototype.restore=function(b){b.globalAlpha=1;b.__savedShadowColor&&(b.shadowColor=b.__savedShadowColor);b.__savedShadowBlur&&(b.shadowBlur=b.__savedShadowBlur);b.__savedShadowOffsetX&&(b.shadowOffsetX=b.__savedShadowOffsetX);b.__savedShadowOffsetY&&(b.shadowOffsetY=b.__savedShadowOffsetY);b.__savedGlobalCompositeOperation&&
(b.globalCompositeOperation=b.__savedGlobalCompositeOperation);b.__savedShadowColor=null;b.__savedShadowBlur=null;b.__savedShadowOffsetX=null;b.__savedShadowOffsetY=null;b.__savedGlobalCompositeOperation=null};c.prototype.translate=function(b,c,a){b.translate(c,a)};c.prototype.transform=function(b,c,a,d,f,k,l){b.transform(c,a,d,f,k,l)};c.prototype.setTransform=function(b,c,a,d,f,k,l){b.setTransform(c,a,d,f,k,l)};c.prototype.scale=function(b,c,a){b.scale(c,a)};c.prototype.rotate=function(b,c){b.rotate(c*
Arstider.degToRad)};c.prototype.alpha=function(b,c){var a=b.globalAlpha*c;1<a&&(a=1);b.globalAlpha=a};c.prototype.clip=function(b,c,a,d,f){b.beginPath();b.rect(c,a,d,f);b.clip()};c.prototype.reset=function(b){b.setTransform(1,0,0,1,0,0)};c.prototype.setCompositionMode=function(b,c){b.__savedGlobalCompositeOperation=b.globalCompositeOperation;b.globalCompositeOperation=c};c.prototype.dropShadow=function(b,c,a,d,f){b.__savedShadowColor=b.shadowColor;b.__savedShadowBlur=b.shadowBlur;b.__savedShadowOffsetX=
b.shadowOffsetX;b.__savedShadowOffsetY=b.shadowOffsetY;b.shadowColor=f;b.shadowBlur=d;b.shadowOffsetX=c;b.shadowOffsetY=a};c.prototype.renderAt=function(b,c,a,d,f,k,l,p,m,r){if(c instanceof Image||c instanceof HTMLCanvasElement)void 0==l&&(l=0),void 0==p&&(p=0),m=m||c.width,r=r||c.height,b.drawImage(c,l,p,m,r,a,d,f,k)};c.prototype.debugOutline=function(b,c,a,d,f,k){var l=b.shadowColor,p=b.globalAlpha,m=b.strokeStyle,r=b.lineWidth;b.shadowColor="transparent";b.globalAlpha=0.8;b.lineWidth=1;b.strokeStyle=
k;b.strokeRect(c,a,d,f);b.globalAlpha=p;b.shadowColor=l;b.strokeStyle=m;b.lineWidth=r};c.prototype.debugOutlineComplex=function(b,c,a,d,f){if(d){var k=b.shadowColor,l=b.globalAlpha,p=b.strokeStyle,m=b.lineWidth;b.shadowColor="transparent";b.globalAlpha=0.9;b.lineWidth=1;b.strokeStyle=f;b.beginPath();b.moveTo(d[0],d[1]);b.lineTo(d[2],d[3]);b.lineTo(d[4],d[5]);b.lineTo(d[6],d[7]);b.lineTo(d[0],d[1]);b.stroke();b.closePath();b.lineWidth=3;b.strokeStyle="white";b.beginPath();b.moveTo(c-5,a);b.lineTo(c+
5,a);b.moveTo(c,a-5);b.lineTo(c,a+5);b.stroke();b.closePath();b.globalAlpha=l;b.shadowColor=k;b.strokeStyle=p;b.lineWidth=m}};c.prototype.clear=function(b,c,a,d,f){b.clearRect(c,a,d,f)};return f=new c})})();
define("Arstider/contexts/MatrixTransform",[],function(){function f(c,b){this.pencil=c;this.context=b;this.matrix=this.baseMatrix=[1,0,0,1,0,0];this.stack=[]}f.prototype.setContext=function(c){this.pencil=c};f.prototype.getMatrix=function(){return this.matrix};f.prototype.setMatrix=function(c){this.matrix=[c[0],c[1],c[2],c[3],c[4],c[5]]};f.prototype.cloneMatrix=function(c){return[c[0],c[1],c[2],c[3],c[4],c[5]]};f.prototype.save=function(){var c=this.cloneMatrix(this.getMatrix());this.stack.push(c);
this.pencil&&this.pencil.save(this.context)};f.prototype.restore=function(){if(0<this.stack.length){var c=this.stack.pop();this.setMatrix(c)}this.pencil&&this.pencil.restore(this.context)};f.prototype.reset=function(){this.setMatrix(this.baseMatrix);this.setTransform(!0)};f.prototype.setTransform=function(c){this.pencil&&(this.matrix!=this.baseMatrix||c)&&this.pencil.setTransform(this.context,this.matrix[0],this.matrix[1],this.matrix[2],this.matrix[3],this.matrix[4],this.matrix[5])};f.prototype.translate=
function(c,b){this.matrix[4]+=this.matrix[0]*c+this.matrix[2]*b;this.matrix[5]+=this.matrix[1]*c+this.matrix[3]*b};f.prototype.rotate=function(c){var b=Math.cos(c);c=Math.sin(c);var g=this.matrix[1]*b+this.matrix[3]*c,a=this.matrix[0]*-c+this.matrix[2]*b,d=this.matrix[1]*-c+this.matrix[3]*b;this.matrix[0]=this.matrix[0]*b+this.matrix[2]*c;this.matrix[1]=g;this.matrix[2]=a;this.matrix[3]=d};f.prototype.scale=function(c,b){this.matrix[0]*=c;this.matrix[1]*=c;this.matrix[2]*=b;this.matrix[3]*=b};f.prototype.rotateAbout=
function(c,b,g){this.translate(b,g);this.rotate(c)};f.prototype.scaleAbout=function(c,b,g,a){this.translate(g,a);this.scale(c,b)};f.prototype.identity=function(){this.m=this.baseMatrix};f.prototype.multiply=function(c){var b=this.matrix[1]*c.m[0]+this.matrix[3]*c.m[1],g=this.matrix[0]*c.m[2]+this.matrix[2]*c.m[3],a=this.matrix[1]*c.m[2]+this.matrix[3]*c.m[3],d=this.matrix[0]*c.m[4]+this.matrix[2]*c.m[5]+this.matrix[4],f=this.matrix[1]*c.m[4]+this.matrix[3]*c.m[5]+this.matrix[5];this.matrix[0]=this.matrix[0]*
c.m[0]+this.matrix[2]*c.m[1];this.matrix[1]=b;this.matrix[2]=g;this.matrix[3]=a;this.matrix[4]=d;this.matrix[5]=f};f.prototype.invert=function(){var c=1/(this.matrix[0]*this.matrix[3]-this.matrix[1]*this.matrix[2]),b=-this.matrix[1]*c,g=-this.matrix[2]*c,a=this.matrix[0]*c,d=c*(this.matrix[2]*this.matrix[5]-this.matrix[3]*this.matrix[4]),f=c*(this.matrix[1]*this.matrix[4]-this.matrix[0]*this.matrix[5]);this.matrix[0]=this.matrix[3]*c;this.matrix[1]=b;this.matrix[2]=g;this.matrix[3]=a;this.matrix[4]=
d;this.matrix[5]=f};f.prototype.transformPoint=function(c,b){return{x:c*this.matrix[0]+b*this.matrix[2]+this.matrix[4],y:c*this.matrix[1]+b*this.matrix[3]+this.matrix[5]}};return f});
(function(){var f=null;define("Arstider/contexts/Webgl",["Arstider/contexts/webgl/Program"],function(c,b){function g(){this.enabled=!0}if(null!=f)return f;g.prototype.init=function(a,b){a.__program?a.__program.ready?b&&b():a.__program.compileCallback=b:(a.__program=new c(a),a.__program.setShaders(a.canvas.buffer.vertexShader,a.canvas.buffer.fragmentShader,b))};g.prototype._setRectangle=function(a,b,c,g,f){g=b+g;f=c+f;a.bufferData(a.ARRAY_BUFFER,new Float32Array([b,c,g,c,b,f,b,f,g,c,g,f]),a.STATIC_DRAW)};
g.prototype.setCompositionMode=function(){};g.prototype.debugOutline=function(){};g.prototype.dropShadow=function(){};g.prototype.transform=function(){};g.prototype.translate=function(){};g.prototype.rotate=function(){};g.prototype.alpha=function(){};g.prototype.save=function(){};g.prototype.restore=function(){};g.prototype.clear=function(a){a.clear(a.COLOR_BUFFER_BIT)};g.prototype._prepareAttribs=function(a){var b=a.getUniformLocation(a.__program.program,"u_resolution");a.uniform2f(b,a.canvas.width,
a.canvas.height);var b=a.getAttribLocation(a.__program.program,"a_position"),c=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c);a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a.STATIC_DRAW);a.enableVertexAttribArray(b);a.vertexAttribPointer(b,2,a.FLOAT,!1,0,0)};g.prototype.renderAt=function(a,b,c,g,f,p,m,r,t,w){this._prepareAttribs(a);m=Arstider.checkIn(m,c);py=Arstider.checkIn(r,g);t=Arstider.checkIn(t,f);w=Arstider.checkIn(w,p);a.__program.texture.update(b,t,w);this._setRectangle(a,
m,r,t,w);a.drawArrays(a.TRIANGLES,0,6)};return f=new g})})();
define("Arstider/contexts/webgl/Program",["Arstider/contexts/webgl/Shader","Arstider/contexts/webgl/Texture"],function(f,c){function b(b){this.fragmentShader=this.vertexShader=this.program=null;this.context=b;this.texture;this.compileCallbacks;this.ready=!1}b.prototype.setShaders=function(b,a,d){var c=this;this.compileCallback=d;f.get("vertex",b,function(a){c._compileShader.apply(c,[a])});f.get("fragment",a,function(a){c._compileShader.apply(c,[a])})};b.prototype._compileShader=function(b){if("fragment"===
b.type){if(this.fragmentShader=this.context.createShader(this.context.FRAGMENT_SHADER),this.context.shaderSource(this.fragmentShader,b.script),this.context.compileShader(this.fragmentShader),!this.context.getShaderParameter(this.fragmentShader,this.context.COMPILE_STATUS))return 0<Arstider.verbose&&console.warn("Arstider.contexts.webgl.Program : ",this.context.getShaderInfoLog(this.fragmentShader)),null}else if("vertex"===b.type&&(this.vertexShader=this.context.createShader(this.context.VERTEX_SHADER),
this.context.shaderSource(this.vertexShader,b.script),this.context.compileShader(this.vertexShader),!this.context.getShaderParameter(this.vertexShader,this.context.COMPILE_STATUS)))return 0<Arstider.verbose&&console.warn("Arstider.contexts.webgl.Program : ",this.context.getShaderInfoLog(this.vertexShader)),null;this._compile()};b.prototype._compile=function(){null!=this.vertexShader&&null!=this.fragmentShader&&(this.program=this.context.createProgram(this.context,[this.vertexShader,this.fragmentShader]),
this.context.attachShader(this.program,this.vertexShader),this.context.attachShader(this.program,this.fragmentShader),this.context.linkProgram(this.program),this.context.useProgram(this.program),this.context.clearColor(0,0,0,0),this.texture=new c(this.context,this.program),this.ready=!0,this.compileCallback&&this.compileCallback())};return b});
(function(){var f=null;define("Arstider/contexts/webgl/Shader",["Arstider/Request"],function(c){function b(){this.fragmentStore={};this.vertexStore={}}if(null!=f)return f;b.prototype.load=function(b,a,d){(new c({url:a,cache:!0,track:!0,type:"text",caller:f,mimeOverride:"text",callback:function(c){f[b+"Store"][a]={script:c,type:b};d&&d(f[b+"Store"][a])}})).send()};b.prototype.get=function(b,a,d){f[b+"Store"][a]?d&&d(f[b+"Store"][a]):f.load(b,a,d)};return f=new b})})();
define("Arstider/contexts/webgl/Texture",[],function(){function f(c,b){this.context=c;this.program=b}f.prototype.update=function(c){var b=this.context.getAttribLocation(this.program,"a_texCoord"),f=this.context.createBuffer();this.context.bindBuffer(this.context.ARRAY_BUFFER,f);this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),this.context.STATIC_DRAW);this.context.enableVertexAttribArray(b);this.context.vertexAttribPointer(b,2,this.context.FLOAT,!1,0,0);
this.texture=this.context.createTexture();this.context.bindTexture(this.context.TEXTURE_2D,this.texture);this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MIN_FILTER,"sharp"==this.context.renderStyle?this.context.NEAREST:this.context.LINEAR);this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MAG_FILTER,"sharp"==this.context.renderStyle?this.context.NEAREST:this.context.LINEAR);this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_WRAP_S,
this.context.CLAMP_TO_EDGE);this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_WRAP_T,this.context.CLAMP_TO_EDGE);this.context.texImage2D(this.context.TEXTURE_2D,0,this.context.RGBA,this.context.RGBA,this.context.UNSIGNED_BYTE,c)};return f});
define("Arstider/core/Debugger",["Arstider/core/Performance","Arstider/Keyboard","Arstider/core/Profiler","Arstider/Events","Arstider/Viewport"],function(f,c,b,g,a){function d(a,b,d,c){if(d<a&&!c||d>b&&c)return"rgba(255, 0, 0, 1)";if(d>b&&!c||d<a&&c)return"rgba(0, 255, 0, 1)";c?(c=Arstider.chop((d-a)/(b-a)*255),a=255-Arstider.chop((d-a)/(b-a)*255)):(c=255-Arstider.chop((d-a)/(b-a)*255),a=Arstider.chop((d-a)/(b-a)*255));b=Arstider.floor(0.6*Arstider.max(c-(255-c),0)+0.6*Arstider.max(a-(255-a)));return"rgba("+
(c+b)+","+(a+b)+",0,1)"}function h(a){this.engine=a;this.profiler=b;window.document.body.appendChild(this.profiler);this.showFrames=!1;this.stepTimer=null;this.loggedFrames=0;var d=this;c.bind("d","down",function(){d.showFrames=!0});c.bind("d","up",function(){d.showFrames=!1});k=this}var k;h.prototype.step=function(){var a=this;this.stepTimer=setTimeout(function(){a.step.apply(a)},1E3);this.loggedFrames++;if(this.profiler.collapsed)this.profiler.detailsTab&&(this.profiler.detailsTab.innerHTML="");
else if("draw"===this.profiler.currentTab){if(0<f.frames){var b=this.createColumn("second_"+this.loggedFrames),c=Arstider.ceil((f.elements-f.draws)/f.frames),g=Arstider.ceil(f.draws/f.frames),h=Arstider.ceil(f.transforms/f.frames),k=Arstider.ceil((f.composition||0)/f.frames),x=c+g+h+k,v=0,u=this.createSection(c+" empty element(s)",0,Arstider.chop(c/x*300),"rgba(150,150,190,1)"),v=v+Arstider.chop(c/x*300);b.appendChild(u);c=this.createSection(g+" draw(s)",v,Arstider.chop(g/x*300),"rgba(200,200,50,1)");
v+=Arstider.chop(g/x*300);b.appendChild(c);g=this.createSection(h+" transformation(s)",v,Arstider.chop(h/x*300),"#f80");v+=Arstider.chop(h/x*300);b.appendChild(g);h=this.createSection(k+" composion mode change(s)",v,Arstider.chop(k/x*300),"#f03");v+=Arstider.chop(k/x*300);b.appendChild(h);k=window.document.createElement("div");k.title=f.frames;k.style.width="100%";k.style.height="4px";k.style.backgroundColor=d(30,65,f.frames);k.style.borderBottom="1px solid black";k.style.top=300-Arstider.chop(f.frames/
65*150)+"px";k.style.position="absolute";k.style.display="block";k.style.zIndex="99999";b.appendChild(k);this.profiler.detailsTab.appendChild(b)}}else for(k in this.profiler.detailsTab.innerHTML="",b=Arstider.bufferPool,b)x=b[k].getMemory()>>20,x=this.createBar(k,x,d(0.25,12,x,!0)),this.profiler.detailsTab.appendChild(x);this.profiler.minibar.innerHTML=["<span style='color:#FFFF99;'>FPS:",f.frames,"</span>&nbsp;|&nbsp;<span style='color:#99FF99;'>Memory:",Arstider.getMemory(),"Mb</span>&nbsp;|&nbsp;<span style='color:#FF9999;'>Draws:",
Arstider.ceil(f.draws/f.frames),"/ Entities:",Arstider.ceil(f.elements/f.frames),"</span>&nbsp;|&nbsp;<span style='color:#9999FF;'>Transformations:",Arstider.ceil(f.transforms/f.frames),"</span>&nbsp;|&nbsp;<span style='color:#FFFFFF;'>Buffers:",Arstider.countBuffers(),"</span>&nbsp;|&nbsp;<span style='color:#FFFFFF;'>Updates:",f.numUpdates,"</span>&nbsp;|&nbsp;<span style='color:#FFFFFF;'>Timers:",f.numTimers,"</span>&nbsp;|&nbsp;<span style='color:#FF0000;'>D-",f.skippedDraw,"</span>"].join("");
f.update()};h.prototype.drawFrames=function(){if(this.engine.debug&&this.showFrames){this.engine.context.fillStyle="rgba(0,0,0,0.3)";var b=0.5*(a.maxWidth-a.minWidth),d=0.5*(a.maxHeight-a.minHeight);this.engine.context.fillRect(0,0,b,a.maxHeight);this.engine.context.fillRect(a.maxWidth-b,0,b,a.maxHeight);this.engine.context.fillRect(b,0,a.maxWidth-2*b,d);this.engine.context.fillRect(b,a.maxHeight-d,a.maxWidth-2*b,d)}};h.prototype.createColumn=function(a){var b=window.document.createElement("div");
b.id=a;b.style.width="4px";b.style.height="300px";b.style.overflow="hidden";b.style.cssFloat="left";b.style.right="0px";b.style.display="block";b.style.position="relative";b.style.backgroundColor="#FFFFFF";return b};h.prototype.createSection=function(a,b,d,c){var g=window.document.createElement("div");g.title=a;g.style.width="100%";g.style.height=d+"px";g.style.backgroundColor=c;g.style.top=b+"px";g.style.position="absolute";g.style.display="block";return g};h.prototype.createBar=function(a,b,d){var c=
window.document.createElement("div");c.title=a+":"+b+"mb";c.style.width=25+b/24*75+"%";c.style.height="16px";c.style.backgroundColor=d;c.style.clear="both";c.style.marginBottom="3px";c.style.position="relative";c.style.overflow="hidden";c.style.display="block";c.style.paddingTop="4px";c.style.color="white";c.style.textShadow="1px 1px 0px rgba(0,0,0,0.7)";c.innerHTML=a;return c};h.prototype.init=function(){console.log("New instance of the Arstider Engine.");console.log("Build: "+this.engine.release+
" Version: "+this.engine.version);console.log("DEBUG MODE");console.log("##################################################");this.step(this)};Arstider.findElement=function(a,b){if(k.engine.debug){var c=[],d=0;if((b=b||k.engine.currentScreen)&&b.children)for(d;d<b.children.length;d++)a&&a!==b.children[d].name||c.push(b.children[d]),b.children[d].children&&(c=c.concat(Arstider.findElement.apply(k,[a,b.children[d]])));return 1==c.length?c[0]:c}};Arstider.debugDraw=function(a){if(k.engine.debug){var b=
null,b=window.document.getElementById("debugWindow");b||(b=window.document.createElement("canvas"),b.width=300,b.height=300,b.id="debugWindow",b.style.height="300px",b.style.width="300px",b.style.position="absolute",b.style.display="block",b.style.backgroundColor="green",b.style.bottom="0px",b.style.right="0px",b.style.zIndex=999,window.document.body.appendChild(b));b=b.getContext("2d");b.clearRect(0,0,300,300);b.drawImage(a,0,0,300,300)}};Arstider.debugBroadcast=function(a,b,c){k.engine.debug&&g.broadcast(a,
b,c)};return h});
define("Arstider/core/Performance",[],function(){function f(){this.lastLogicFrame=this.lastFrame=this.now=this.bufferMem=this.numBuffers=this.frameDelay=this.topFrames=this.skippedDraw=this.frames=this.transforms=this.elements=this.draws=this.deltaTime=0;this.skipTreshold=45;this._onTrack=!0;this.updateLogic=Arstider.emptyFunction}var c;f.prototype._stepLogic=function(){if(null!=c.updateLogic){var b=Arstider.timestamp();0==this.lastLogicFrame&&(this.lastLogicFrame=b);c.deltaTime=b-c.lastLogicFrame;
c.lastLogicFrame=b;b=Arstider.chop(Arstider.max(0,1E3/Arstider.FPS-c.deltaTime));setTimeout(c._stepLogic,b);c.updateLogic(c.deltaTime)}};f.prototype.update=function(){c.frames>c.topFrames&&(c.topFrames=c.frames);c.draws=0;c.elements=0;c.transforms=0;c.frames=0};f.prototype.startStep=function(b){c._onTrack=1;!0==b&&(c.now=Arstider.timestamp(),0==c.lastFrame&&(c.lastFrame=c.now),c.now-c.lastFrame>c.skipTreshold&&(c._onTrack=0,c.skippedDraw++))};f.prototype.endStep=function(){c.lastFrame=c.now};f.prototype.getStatus=
function(){return c._onTrack};c=new f;c._stepLogic();return c});define("Arstider/core/Pixel",[],function(){return function(f,c,b,g,a,d,h){this.x=f;this.y=c;this.canvas=b;this.r=g;this.g=a;this.b=d;this.a=h}});
define("Arstider/core/Profiler",["Arstider/Browser"],function(f){function c(a){a.style.position="relative";a.style.display="block";a.style.height="16px";a.style.padding="1px";a.style.paddingRight="2px";a.style.paddingLeft="2px";a.style.marginTop="2px";a.style.marginRight="10px";a.style.fontSize="14px";a.style.fontFamily="Arial";a.style.fontWeight="bold";a.style.backgroundColor="#999";a.style.border="2px solid #def";a.style.color="#070a0f";a.style.cssFloat="right";a.style.cursor="pointer";a.style.textAlign=
"center";a.style.borderRadius="2px";a.style.maxWidth="80px";a.onmouseover=function(){this.style.backgroundColor="#bcc"};a.onmouseout=function(){this.style.backgroundColor="#999"};return a}var b=window.document.createElement("div");b.id="_ArstiderProfiler";b.style.position="fixed";b.style.display="block";b.style.width="100%";b.style.left="0px";b.style.zIndex="9001";b.style.bottom="0px";b.style.padding="3px";b.style.fontSize="10px";b.style.fontFamily="Arial";b.style.backgroundColor="black";b.style.opacity=
"0.7";b.style.color="white";b.style.cursor="default";b.collapsed=!0;b.currentTab="draw";b.minibar=window.document.createElement("div");if(!f.isMobile){f=window.document.createElement("div");f.id="_ArstiderProfilerCloseBtn";c(f);f.onclick=function(){b.style.display="none"};f.innerHTML="X";b.appendChild(f);var g=window.document.createElement("div");g.id="_ArstiderProfilerToggleBtn";c(g);g.onclick=function(){b.collapsed=!b.collapsed;b.collapsed?(g.innerHTML="Expend",a.style.display="none"):(g.innerHTML=
"Collapse",a.style.display="block")};g.innerHTML="Expend";b.appendChild(g);f=window.document.createElement("div");f.id="_ArstiderProfilerDrawTab";c(f);f.style.cssFloat="left";f.onclick=function(){b.currentTab="draw";a.innerHTML=""};f.innerHTML="Drawing";b.appendChild(f);f=window.document.createElement("div");f.id="_ArstiderProfilerMemoryTab";c(f);f.style.cssFloat="left";f.onclick=function(){b.currentTab="memory";a.innerHTML=""};f.innerHTML="Memory";b.appendChild(f);var a=window.document.createElement("div");
a.style.width="100%";a.style.height="300px";a.style.overflowY="auto";a.style.overflowX="hidden";a.style.borderTop="1px solid #333";a.style.display="none";a.style.position="relative";b.detailsTab=a;b.appendChild(a)}b.minibar.id="_ArstiderProfilerMinibar";b.minibar.style.position="relative";b.minibar.style.display="block";b.minibar.style.cssFloat="left";b.minibar.style.paddingTop="5px";b.minibar.style.fontSize="12px";b.appendChild(b.minibar);return b});
(function(){var f=null;define("Arstider/core/Storage",[],function(){function c(){this.enabled=!1;this.prefix="";this._safeKeys=[];this._test()}if(null!=f)return f;c.prototype._test=function(){try{localStorage.test="a",localStorage.removeItem("test"),this.enabled=!0}catch(b){return this.enabled=!1,0<Arstider.verbose&&console.warn("Arstider.Storage.test: localStorage is unavailable"),!1}return!0};c.prototype.setSafeKeys=function(b){this._safeKeys=b};c.prototype.get=function(b){if(!1===this.enabled)return 1<
Arstider.verbose&&console.warn("Arstider.Storage.get: localStorage is unavailable"),null;if(void 0==localStorage[this.prefix+b]){if(-1!=this._safeKeys.indexOf(b))return void 0==localStorage[b]?(1<Arstider.verbose&&console.warn("Arstider.Storage.get: ",b," not found"),null):localStorage[b];1<Arstider.verbose&&console.warn("Arstider.Storage.get: ",this.prefix+b," not found");return null}return localStorage[this.prefix+b]};c.prototype.set=function(b,c){if(!1===this.enabled)return 1<Arstider.verbose&&
console.warn("Arstider.Storage.set: localStorage is unavailable"),!1;-1!=this._safeKeys.indexOf(b)?(localStorage[b]=c,2<Arstider.verbose&&console.warn("Arstider.Storage.set: setting safeKey ",b)):localStorage[this.prefix+b]=c;return!0};c.prototype.remove=function(b){if(!1===this.enabled)return!1;localStorage.removeItem(b);localStorage.removeItem(this.prefix+b);return!0};c.prototype.list=function(){var b=[];for(item in localStorage)-1==this._safeKeys.indexOf(item)&&-1!=item.indexOf(this.prefix)&&(b[b.length]=
item);return b};c.prototype.reset=function(){var b;if(!1===this.enabled)return!1;for(b in localStorage)-1==this._safeKeys.indexOf(b)&&-1!=b.indexOf(this.prefix)?localStorage.removeItem(b):2<Arstider.verbose&&console.warn("Arstider.Storage.reset: keeping safeKey ",b);return!0};return f=new c})})();
Arstider={timestamp:function(){return Date.now()},pageHidden:!1,tempBufferLabel:"_temp_",getNode:function(f,c){c=Arstider.checkIn(c,5);var b=f,g=0;if(b&&b.data)for(;void 0==b.data.nodeName;){g++;if(g>c)break;if(b.data.data)b=b.data;else break}return b},min:function(){for(var f=1,c=0,b=arguments.length;f<b;f++)arguments[f]<arguments[c]&&(c=f);return arguments[c]},max:function(){for(var f=1,c=0,b=arguments.length;f<b;f++)arguments[c]<arguments[f]&&(c=f);return arguments[c]},floor:function(f){return f>>>
0},ceil:function(f){return f<<1},log:function(f,c){var b="",g=null;"string"===typeof f?b=f:(f.message&&(b=f.message),f.asset&&(g=f.asset));Arstider.verbose>=(c||1)&&(null!=g&&console.log("%c","padding:"+(g.height||null)+"px "+(g.width||null)+"px;line-height:"+(g.height||null)+"px;background:url("+(g.src||null)+")"),console.error("%c"+b,"color:purple"))},powerOf2:function(f){return 0<f&&0===(f&f-1)},nextPowerOf2:function(f){if(0<f&&0===(f&f-1))return f;for(var c=1;c<f;)c<<=1;return c},guid:function(){function f(){return Arstider.floor(65536*
(1+Math.random())).toString(16).substring(1)}return f()+f()+"-"+f()+"-"+f()+"-"+f()+"-"+f()+f()+f()}};void 0==Object.create&&(Object.create=function(f){function c(){}c.prototype=f;return new c});Arstider.disableConsole=function(){window.console={log:Arstider.emptyFunction,warn:Arstider.emptyFunction}};Arstider.force2d=!0;Arstider.emptyObject={};Arstider.emptyFunction=function(){};Arstider.emptyString="";Arstider.skipUpdate=!1;Arstider.__cancelBubble={};
Arstider.cancelBubble=function(f){f=Arstider.checkIn(f,0);Arstider.__cancelBubble[f]=!0};Arstider.emptyImgSrc="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";Arstider.FPS=60;Arstider.savedStates={};Arstider.queryStringToObject=function(f){return(f||document.location.search).replace(/(^\?)/,"").split("&").map(function(c){return c=c.split("="),this[c[0]]=c[1],this}.bind({}))[0]};
Arstider.disposeSavedState=function(f){f in Arstider.savedStates&&(Arstider.savedStates[f]._unload&&Arstider.savedStates[f]._unload(),delete Arstider.savedStates[f])};Arstider.degToRad=Math.PI/180;Arstider.radToDeg=180/Math.PI;Arstider.defaultComposition="source-over";Arstider.defaultColor="transparent";Arstider.delegate=function(f,c,b){return f.call.apply(f.bind,arguments)};Arstider.checkIn=function(f,c){return void 0===f?c:f};Arstider.isDefine=function(f){return"undefined"!=typeof f};
Arstider.firstOf=function(f,c){if(!f.length)return c;for(var b=0;b<f.length;b++)if(void 0!=f[b])return f[b];return c};Arstider.verbose=0;Arstider.distance=function(f,c,b,g){return Math.sqrt(Math.pow(b-f,2)+Math.pow(g-c,2))};Arstider.distance3=function(f,c,b,g,a,d){return Math.sqrt(Math.pow(g-f,2)+Math.pow(a-c,2)+Math.pow(d-b,2))};Arstider.direction=function(f,c,b,g){return Math.atan2(-(g-c),b-f)*Arstider.radToDeg};
Arstider.trimDuplicates=function(f){var c={},b=0,g=f.length,a=[];for(b;b<g;b++)c[f[b]]=f[b];for(b in c)c.hasOwnProperty(b)&&a.push(c[b]);return a};Arstider.reload=function(){"reload"in window.location?window.location.reload():"history"in window&&"go"in window.history?window.history.go(0):window.location.href=window.location.href};
Arstider.isObject=function(f){if(!f||"object"!==typeof f||f.nodeType||Arstider.isWindow(f)||f.constructor&&!Object.prototype.hasOwnProperty.call(f,"constructor")&&!Object.prototype.hasOwnProperty.call(f.constructor.prototype,"isPrototypeOf"))return!1;for(var c in f)f.hasOwnProperty(c);return void 0==c||Object.prototype.hasOwnProperty.call(f,c)};Arstider.isWindow=function(f){return f&&"object"===typeof f&&"setInterval"in f};Arstider.isFunction=function(f){var c={};return f&&"[object Function]"===c.toString.call(f)};
Arstider.lengthOf=function(f){if("array"===typeof f)return f.length;if(Arstider.isObject(f)){var c=0,b;for(b in f)f.hasOwnProperty(b)&&c++;return c}return 0};
Arstider.compare=function(f,c){var b;if(typeof f!==typeof c)return!1;switch(typeof f){case "object":if(Arstider.lengthOf(f)!==Arstider.lengthOf(c))return!1;for(b in f)if(f.hasOwnProperty(b)&&(!c.hasOwnProperty(b)||!Arstider.compare(f[b],c[b])))return!1;for(b in c)if(c.hasOwnProperty(b)&&!f.hasOwnProperty(b))return!1;break;case "array":b=f.length;if(b!==c.length)return!1;for(b--;0<=b;){if(!Arstider.compare(f[b],c[b]))return!1;b--}break;default:return f===c}return!0};
Arstider.randomSort=function(f){var c=f.length,b,g;if(0===c)return!1;for(;--c;)b=Arstider.floor(Math.random()*(c+1)),g=f[c],f[c]=f[b],f[b]=g;return f};Arstider.chop=function(f){return 0.5+f|0};Arstider.mixin=function(f,c,b,g,a){for(var d in c)if(void 0==f[d]||b)c[d]instanceof Function||"function"===typeof c[d]?g&&(f[(a||"")+d]=c[d]):f[(a||"")+d]=c[d];return f};Arstider.clone=function(f,c,b){return Arstider.mixin({},f,!0,c,b)};
Arstider.deepClone=function(f){if(null==f||"object"!=typeof f)return f;if(f instanceof Date){var c=new Date;c.setTime(f.getTime());return c}if(f instanceof Array){for(var c=[],b=0,g=f.length;b<g;b++)c[b]=Arstider.deepClone(f[b]);return c}if(f instanceof Object){c={};for(b in f)f.hasOwnProperty(b)&&(c[b]=Arstider.deepClone(f[b]));return c}0<Arstider.verbose&&console.warn("Arstider.deepClone: Object type unsupported ",f)};
Arstider.deepMerge=function(f,c,b){b&&(f=Arstider.deepClone(f));Array.isArray(f)?(c=c||[],f.forEach(function(b,a){b=f[a];"undefined"===typeof f[a]?c[a]=b:"object"===typeof b?c[a]=Arstider.deepMerge(b,c[a]):Array.isArray(b)?c[a]=Arstider.deepMerge(b,c[a]):c[a]=b})):(c=c||{},Object.keys(f).forEach(function(b){var a=f[b];Array.isArray(a)?c[b]=Arstider.deepMerge(a,c[b]):"object"===typeof a?(c[b]=c[b]||{},c[b]=f[b]?Arstider.deepMerge(a,c[b]):a):c[b]=a}));return c};
Arstider.Super=function(f,c){2<arguments.length?c.apply(f,Array.prototype.slice.call(arguments,2)):c.call(f)};Arstider.URIEncode=function(f){encodeURIComponent?(f=encodeURIComponent(f),f=f.replace(/~/g,"%7E"),f=f.replace(/!/g,"%21"),f=f.replace(/\(/g,"%28"),f=f.replace(/\)/g,"%29"),f=f.replace(/'/g,"%27")):(f=escape(f),f=f.replace(/@/g,"%40"),f=f.replace(/\//g,"%2F"),f=f.replace(/\+/g,"%2B"));return f.replace(/\%20/g,"+")};
Arstider.Inherit=function(f,c){c instanceof Function||"function"===typeof c?(f.prototype=Object.create(c.prototype),f.prototype.constructor=f):console.warn("Arstider.Inherit: Could not make ",f," inherit",c)};Arstider.fixedAnimationFrame=function(f,c){var b=Arstider.chop(1E3/Arstider.FPS),b=Arstider.max(10,b-(c-b));Arstider.__animTimer=window.setTimeout(f,b)};Arstider.fixedCancelAnimationFrame=function(f){void 0!=Arstider.__animTimer&&window.clearTimeout(Arstider.__animTimer)};
Arstider.blobCache={empty:{url:Arstider.emptyImgSrc,size:0}};
Arstider.setFPS=function(f){f=f||60;"auto"==f?(Arstider.FPS=60,Arstider.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||Arstider.fixedAnimationFrame,Arstider.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||Arstider.fixedCancelAnimationFrame):
(Arstider.FPS=f,Arstider.requestAnimFrame=Arstider.fixedAnimationFrame,Arstider.cancelAnimFrame=Arstider.fixedCancelAnimationFrame)};Arstider.defaultRenderStyle="auto";Arstider.bufferPool={};Arstider.serialize=function(f,c){if("string"===typeof f||null==f)return f;var b=[],g;for(g in f){var a=c?c+"["+g+"]":g,d=f[g];b.push("object"==typeof d?Arstider.serialize(d,a):encodeURIComponent(a)+"="+encodeURIComponent(d))}return b.join("&")};
Arstider.countBuffers=function(){var f,c=0;for(f in Arstider.bufferPool)c++;return c};Arstider.getMemory=function(){var f,c=0;for(f in Arstider.blobCache)c+=(Arstider.blobCache[f].size||0)>>10;for(f in Arstider.bufferPool)c+=Arstider.bufferPool[f].getMemory()>>20;return(c/1024).toFixed(2)};
(function(){var f=null;define("Arstider/sounds/HowlerInterface",["Arstider/Browser","Arstider/Timer"],function(c,b){function g(){this.managerRef;this.ieTimer=null}if(null!=f)return f;g.prototype.init=function(a,b,g){f.managerRef=a;if(f.test()){"android"==c.name&&(Howler.usingWebAudio=!1);var k;a={empty:[0,11]};var l=0;"ie"==c.name&&(l=100);for(k in f.managerRef.sounds)a[k]=[Arstider.max(0,f.managerRef.sounds[k].offset-l),f.managerRef.sounds[k].duration,f.managerRef.sounds[k].loop];f.managerRef.sounds.empty=
{};f.managerRef.sounds.handle=new Howl({urls:[b+".mp3",b+".ogg"],sprite:a,onend:f.managerRef._removeInstance});g&&g()}};g.prototype.test=function(){return Howl?!0:(0<Arstider.verbose&&console.warn("Arstider.HowlerInterface.test: sounds disabled, Howler not loaded"),!1)};g.prototype.create=function(a){return new Howl({urls:f.managerRef.tracks[a].files,loop:f.managerRef.tracks[a].loop||!1})};g.prototype.playTrack=function(a,c,g){a.play();g=g||{};var k=Arstider.checkIn(g.fadeIn,f.managerRef.tracks[c].fadeIn);
k&&f.fade(a,c,0,a._volume,k);var l=Arstider.checkIn(g.fadeOut,f.managerRef.tracks[c].fadeOut);f.managerRef.tracks[c].fadeOutTimer&&(f.managerRef.tracks[c].fadeOutTimer.pause(),f.managerRef.tracks[c].fadeOutTimer=null);k=[];l&&k.push(function(){f.managerRef.tracks[c].duration=a._duration;l&&(f.managerRef.tracks[c].fadeOutTimer=new b(function(){f.fade(a,c,a._volume,0,l)},1E3*f.managerRef.tracks[c].duration,!0))});g.startCallback&&k.push(function(){g.startCallback.apply(f.managerRef,[c])});a._onplay=
k;g.endCallback&&(a._onend=[g.endCallback]);return f.managerRef};g.prototype.playSound=function(a,b,g,k){"ie"==c.name&&a.stop();if(a._audioNode&&a._audioNode.length)for(;0<a._audioNode.length;){a._audioNode[0].paused&&(a._audioNode[0].paused=!1);break}a.play(b,function(k){k=parseInt(k+"");f.managerRef._addInstance(b,k);a.volume(Arstider.checkIn(g.volume,1),k);"ie"==c.name&&(clearTimeout(f.ieTimer),f.ieTimer=setTimeout(function(){a.stop(k)},f.managerRef.sounds[b].duration+50))});return f.managerRef};
g.prototype.pause=function(a,b){a&&(f._nodePlaying(a)?(a.pause(),b&&f.managerRef.tracks[b]&&f.managerRef.tracks[b].fadeOutTimer&&f.managerRef.tracks[b].fadeOutTimer.pause()):(a.pause(),a._playStart=0));return f.managerRef};g.prototype.resume=function(a,b){a?0!=a._playStart&&(a.play(),b&&f.managerRef.tracks[b]&&f.managerRef.tracks[b].fadeOutTimer&&f.managerRef.tracks[b].fadeOutTimer.resume()):0<Arstider.verbose&&console.warn("Arstider.HowlerInterface.fade: sound ",b," not loaded, no handle");return f.managerRef};
g.prototype.fade=function(a,b,c,g,l,p){a?("auto"===c&&(c=a._volume),a.fade(c,g,l,p||Arstider.emptyFunction,b)):0<Arstider.verbose&&console.warn("Arstider.HowlerInterface.fade: sound ",b," not loaded, no handle");return f.managerRef};g.prototype.stop=function(a,b){a?(a.stop(b),a._playStart=0,b&&f.managerRef.tracks[b]&&f.managerRef.tracks[b].fadeOutTimer&&f.managerRef.tracks[b].fadeOutTimer.pause()):0<Arstider.verbose&&console.warn("Arstider.HowlerInterface.stop: sound ",b," not loaded, no handle");
return f.managerRef};g.prototype.setPosition=function(a,b,c){a?a.pos(b,c):0<Arstider.verbose&&console.warn("Arstider.HowlerInterface.setPosition: sound ",c," not loaded, no handle");return f.managerRef};g.prototype._nodePlaying=function(a){if(a)for(var b=0;b<a._audioNode.length;b++)if(!a._audioNode[b].paused)return!0;return!1};g.prototype.setVolume=function(a,b,c){a?a.volume(b,c):0<Arstider.verbose&&console.warn("Arstider.HowlerInterface.setVolume: sound ",c," not loaded, no handle");return f.managerRef};
return f=new g})})();define("Arstider/sounds/Track",["Arstider/Signal"],function(f){return function(c){c=c||{};this.files=Arstider.checkIn(c.files,[]);this.ready=!1;this.handle=null;this.volume=Arstider.checkIn(c.volume,1);this.fadeOutTimer=null;this.loop=Arstider.checkIn(c.loop,!1);this.fadeIn=Arstider.checkIn(c.fadeIn,null);this.fadeOut=Arstider.checkIn(c.fadeOut,null);this.onload=new f;this.onstart=new f;this.onend=new f}});
define("Arstider/sprites/GridSpritesheet",["Arstider/Bitmap"],function(f){function c(b,c,a,d){this.data=b;c||(c={});this.name=c.name;this.defaultAnim=c.defaultAnim;this.fps=0<c.fps?c.fps:15;this.animations={};this.path=a.path;this.onComplete=d;this.parseJSON(b,a.path)}c.prototype.getAnim=function(b){return this.animations[b]};c.prototype.parseJSON=function(b,c){var a=this.imageUrl=c+b.image;new f({url:a,callback:this.onImageComplete.bind(this)})};c.prototype.onImageComplete=function(b){if(!this.imageWidth){var c=
this.data;this.imageWidth=b.width;this.imageHeight=b.height;this.frameWidth=c.frameWidth;this.frameHeight=c.frameHeight;if(this.imageWidth){null!=c.anchor&&(this.anchor={x:c.anchor.x,y:c.anchor.y});this.frames=[];var a,d;for(a in c.animations){var f=c.animations[a];b=this.animations[a];this.defaultAnim&&"idle"!=a||(this.defaultAnim=a);b||(b=this.animations[a]=Arstider.clone(f),b.name=a,b.spritesheet=this,b.frames=[]);n=f.frames.length;for(i=0;i<n;i++)d=f.frames[i],frameData=this.getFrameData(d),b.frames.push(frameData)}this.onComplete()}else console.error("Cannot find image size for "+
this.imageUrl)}};c.prototype.getFrameData=function(b){if(this.frames[b])return this.frames[b];for(var c=0,a=this.frameWidth*b;a>=this.imageWidth;)a-=this.imageWidth,c+=this.frameHeight;return{index:b,rect:[0+a,c,this.frameWidth,this.frameHeight],sourceSize:[this.frameWidth,this.frameHeight]}};return c});
define("Arstider/sprites/JsonSpritesheet",[],function(){function f(c,b,f){this.data=c;b||(b={});this.name=b.name;this.defaultAnim=b.defaultAnim;this.fps=0<b.fps?b.fps:15;this.animations={};this.frames=[];this.frameDict={};this.baseUrl=f.path;b.imagesAtlas?this.parseJSONImages(c,this.baseUrl):this.parseJSON(c,this.baseUrl)}f.prototype.getFrameByName=function(c){this.frameDict[c]||console.log("Unable to get frame or image "+c+" from the Spritesheet");return this.frameDict[c]};f.prototype.getAnim=function(c){return this.animations[c]};
f.prototype.parseJSONImages=function(c,b){for(var f=b+c.meta.image,a,d=!1,h=c.frames.length,k=0;k<h;k++)a=c.frames[k],!d&&a.rotated&&(d=!0,console.log("JsonSpritesheet ERROR for "+this.name+": rotated frames are not supported, please uncheck this options before exporting")),a=this.createFrame(f,k,a),this.frameDict[a.name]=a};f.prototype.parseJSON=function(c,b){var f=b+c.meta.image;null!=c.anchor&&(this.anchor={x:c.anchor.x,y:c.anchor.y});for(var a,d,h,k=!1,l=c.frames.length,p=0;p<l;p++)h=c.frames[p],
!k&&h.rotated&&(k=!0,console.log("JsonSpritesheet ERROR for "+this.name+": rotated frames are not supported, please uncheck this options before exporting")),a=h.filename.lastIndexOf("/"),d=0>=a?"idle":h.filename.substr(0,a),this.defaultAnim&&"idle"!=d||(this.defaultAnim=d),a=this.animations[d],a||(a=this.animations[d]={},a.name=d,a.spritesheet=this,a.frames=[]),h=this.createFrame(f,p,h),a.frames.push(h),this.frameDict[h.name]=h,this.frames.push(h)};f.prototype.createFrame=function(c,b,f){var a=f.filename,
a=a?a.replace(".png",""):b+"";return{index:b,name:a,image:c,rect:[f.frame.x,f.frame.y,f.frame.w,f.frame.h],origin:[f.spriteSourceSize.x,f.spriteSourceSize.y],sourceSize:[f.sourceSize.w,f.sourceSize.h]}};return f});
define("Arstider/sprites/SpritesheetManager",["Arstider/Request","Arstider/sprites/JsonSpritesheet","Arstider/sprites/ZoeSpritesheet","Arstider/sprites/GridSpritesheet"],function(f,c,b,g){function a(){this.defaultFileName="{{name}}.json";this.spritesheets={};this.loadCallbacks={};this.overrides={}}function d(a,b){var c,d=h(a),f;null==d&&null!=b?(a.lastIndexOf("/")==a.length-1&&(a=a.substr(0,a.lastIndexOf("/"))),f=a,c=a.substring(a.lastIndexOf("/")+1,a.length),b=b.replace("{{name}}",c),-1<c.indexOf(".")&&
a.substring(0,a.lastIndexOf(".")),f.lastIndexOf("/")<f.length-1&&(f+="/"),a=f+b,d=h(a)):(f=a.substring(0,a.lastIndexOf("/")+1),c=-1<a.indexOf("/")?a.substring(a.lastIndexOf("/")+1,a.lastIndexOf(".")):a.substring(0,a.lastIndexOf(".")));return{name:c,path:f,url:a,ext:d}}function h(a){var b=a.lastIndexOf(".");return 0<b?a.substr(b+1):null}a.prototype.get=function(a,f,h){var m=d(a,this.defaultFileName),r=m.url.replace(/\//g,"_"),t=m.name;f.name=t;if(this.loadCallbacks[r])this.loadCallbacks[r].push(h);
else if(this.spritesheets[r])h(this.spritesheets[r]);else{this.loadCallbacks[r]||(this.loadCallbacks[r]=[]);this.loadCallbacks[r].push(h);var w=this;this.loadJSON(m.url,function(a){var d;a.images&&1<=a.images.length?(d=new b(a,f,m),d.name=t,d.url=m.url,w.onSpritesheetLoaded(r,d,f)):a.frames&&1<=a.frames.length?(a.overrides&&!w.overrides[t]&&w.registerOverrides(a.overrides),d=new c(a,f,m),d.name=t,d.url=m.url,w.onSpritesheetLoaded(r,d,f)):0<a.frameWidth?(d=new g(a,f,m,function(){w.onSpritesheetLoaded(r,
d,f)}),d.name=t,d.url=m.url):(console.log("SpritesheetManager ERROR: Unkown spritesheet format."),console.log(a),w.onSpritesheetLoaded(r,d,f))})}};a.prototype.onSpritesheetLoaded=function(a,b,c){this.applyOverrides(this.overrides[b.name],name,b,c);c.overrides&&this.applyOverrides(c.overrides,name,b,c);this.spritesheets[a]=b;if(this.loadCallbacks[a]){c=this.loadCallbacks[a].length;for(var d=0;d<c;d++){var f=this.loadCallbacks[a][d];f&&f(b)}this.loadCallbacks[a]=null}};a.prototype.registerOverrides=
function(a){console.log("Animation overrides: ",a);for(var b=0;b<a.length;b++){var c=a[b];this.overrides[c.spritesheet]=c}};a.prototype.applyOverrides=function(a,b,c,d){if(a&&a&&(a.defaultAnim&&(c.defaultAnim=a.defaultAnim),a.animations)){0<a.fps&&(c.fps=a.fps);for(var f in a.animations){b=a.animations[f];for(var g in b)if(d=c.animations[f],d||(c.animations[f]={},d=c.animations[f]),"frames"==g){for(var h=b[g],x=[],v=0;v<h.length;v++){var u=h[v];if("string"==typeof u)this.warnedFrameName||(this.warnedFrameName=
!0,console.error("Frame re-indexing from frame names is not yet supported for anim "+f));else if(0<u||0===u){var q=c.frames[u];q?(x||(x=[]),x.push(q)):console.error("Frame "+u+" not found on anim "+f)}}x&&(d.frames=x)}else d[g]=b[g]}}};a.prototype.loadJSON=function(a,b){return(new f({url:a,caller:this,cache:!1,track:!0,type:"json",callback:function(a){b(a)}})).send()};a.prototype.reset=function(){this.spritesheets={};this.loadCallbacks={}};return new a});
define("Arstider/sprites/ZoeSpritesheet",[],function(){function f(c,b,f){this.data=c;b||(b={});this.frames=[];this.name=b.name;this.defaultAnim=b.defaultAnim;this.fps=0<b.fps?b.fps:15;this.animations={};this.parseJSON(c,f.path)}f.prototype.getAnim=function(c){return this.animations[c]};f.prototype.parseJSON=function(c,b){this.images=[];for(var f,a=0;a<c.images.length;a++)f=b+c.images[a],this.images.push(f);null!=c.anchor&&(this.anchor={x:c.anchor.x,y:c.anchor.y});var d;0<c.framerate&&(this.fps=c.framerate);
for(var h=c.frames.length,a=0;a<h;a++)d=c.frames[a],f=this.images[d[4]],d={index:a,image:f,rect:[d[0],d[1],d[2],d[3]],origin:[-d[5],-d[6]]},this.frames.push(d);for(var k in c.animations){var l=c.animations[k];f=this.animations[k];this.defaultAnim&&"idle"!=k||(this.defaultAnim=k);f||(f=this.animations[k]=Arstider.clone(l),f.name=k,f.spritesheet=this,f.frames=[]);h=l.frames.length;for(a=0;a<h;a++)d=l.frames[a],d=this.frames[d],f.frames.push(d)}};return f});
(function(){var f={B:{render:function(b,c){c.bold=!0}},I:{render:function(b,c){c.italic=!0}},C:{param:!0,render:function(b,c,a){b.fillStyle=a}},G:{param:!0,render:function(b,c,a){b.shadowBlur=parseInt(a)}},L:{param:!0,render:function(b,c,a){b.lineWidth=parseInt(a)}},S:{param:!0,render:function(b,c,a){c.size=a}},T:{param:!0,render:function(b,c,a,d){d.width=parseInt(a);d.isTab=!0}},X:{param:!0,render:function(b,c,a,d){d.xOffset=parseInt(a)}},Y:{param:!0,render:function(b,c,a,d){d.yOffset=parseInt(a)}}},
c=null;define("Arstider/texts/BBParser",["Arstider/texts/Segment"],function(b){function g(){this.openSegment="[[";this.closeSegment="]]";this.ruleEnd="/";this.assignation="=";this.breakLine="<br>"}if(null!=c)return c;g.prototype.parse=function(a,d){var g,k;g=null;var l;d=d||[];var p=null,m=[],r=null;g=a.indexOf(this.openSegment);-1===g?""!==a&&m.push(new b(a)):(0<g&&(l=new b(a.substring(0,g)),l.styles=d.concat(),m.push(l)),p=a[g+this.openSegment.length].toUpperCase(),p===this.ruleEnd&&d.pop(),void 0==
f[p]&&(p=null),k=a.indexOf(this.closeSegment)+this.closeSegment.length,"T"===p?(l=new b(""),l.styles=[{style:"T",rule:a.substring(g+this.openSegment.length+this.assignation.length+1,k-this.closeSegment.length),render:f.T.render}],m.push(l),m=m.concat(c.parse(a.substring(k),d))):null!=p&&(r={style:p,render:f[p].render},!0===f[p].param&&(r.rule=a.substring(g+this.openSegment.length+this.assignation.length+1,k-this.closeSegment.length))),g=a.substring(g).indexOf(this.openSegment),a[g+this.openSegment.length]===
this.ruleEnd?(l=new b(""),l.styles=d.concat(),null!=p&&l.styles.push(r),m.push(l)):null!=p&&d.push(r),m=m.concat(c.parse(a.substring(k),d)));return m};g.prototype.splitSymbol=function(a,c,f,g){for(var l=0,p=0,m=[],r,l=0;l<a.length;l++)for(r=a[l].text.split(c),p=0;p<r.length;p++)0<p&&g&&m.push(new b(c,a[l].styles)),m.push(new b(r[p]+(f?c:""),a[l].styles));return m};g.prototype.trimSpaces=function(a){for(var c=0,f=0,g=[],l,c=0;c<a.length;c++)for(l=a[c].text.split(" "),f=0;f<l.length;f++)g.push(new b(l[f],
a[c].styles)),f<l.length-1&&g.push(new b(" ",a[c].styles));return g};return c=new g})})();
define("Arstider/texts/Font",["Arstider/Request"],function(f){function c(b){var c=this;b=b||Arstider.emptyObject;if(b.url){this.url=b.url.split(".").join("");this.family=b.name;this.loaded=!1;var a=window.document.getElementById("Arstider_font_loader");null==a&&(a=window.document.createElement("style"),a.type="text/css",a.id="Arstider_font_loader",window.document.getElementsByTagName("head")[0].appendChild(a));a.innerHTML+="@font-face{font-family: "+b.name+"; src: url("+b.url+");} ."+b.name+"_fontLoader{font-family:"+
b.name+", sans-serif;} \n";a=window.document.createElement("input");a.id="Arstider_font_loader_"+b.name;a.style.position="fixed";a.style.border="0px";a.style.backgroundColor="transparent";a.style.zIndex=-1;a.value=".";window.document.body.appendChild(a);a.className=b.name+"_fontLoader";(new f({url:b.url,type:"blob",caller:c,callback:function(){var a=window.document.getElementById("Arstider_font_loader_"+this.name);a.value+=".";setTimeout(function(){c.loaded=!0;c._runCallbacks.apply(c);setTimeout(function(){c._runCallbacks.apply(c,
[!0]);a&&a.parentNode.removeChild(a)},150)},150)}})).send()}else this.family=Arstider.checkIn(b.family,"Arial"),this.loaded=!0,this.url="null";this.name=b.name;this.temp=Arstider.checkIn(b.temp,!1);this.padding=Arstider.checkIn(b.padding,0);this.paddingTop=Arstider.checkIn(b.paddingTop,this.padding);this.paddingLeft=Arstider.checkIn(b.paddingLeft,this.padding);this.lineSpacing=Arstider.checkIn(b.lineSpacing,null);this.lineHeight=Arstider.checkIn(b.lineHeight,"1em");this.textWrap=Arstider.checkIn(b.textWrap,
!1);this.size=Arstider.checkIn(b.size,"12px");this.bold=Arstider.checkIn(b.bold,!1);this.italic=Arstider.checkIn(b.italic,!1);this.strokeStyle=Arstider.checkIn(b.strokeStyle,"transparent");this.fillStyle=Arstider.checkIn(b.fillStyle,"black");this.lineWidth=Arstider.checkIn(b.lineWidth,0);this.shadowColor=Arstider.checkIn(b.shadowColor,"transparent");this.shadowBlur=Arstider.checkIn(b.shadowBlur,0);this.shadowOffsetX=Arstider.checkIn(b.shadowOffsetX,0);this.shadowOffsetY=Arstider.checkIn(b.shadowOffsetY,
0);this.fontOffsetX=Arstider.checkIn(b.fontOffsetX,0);this.fontOffsetY=Arstider.checkIn(b.fontOffsetY,0);this.textAlign=Arstider.checkIn(b.textAlign,"left");this.textBaseline="alphabetic";this.loadCallbacks=Arstider.checkIn(b.loadCallbacks,[]);null===this.lineSpacing&&(this.lineSpacing=parseInt(this.size.split("px").join("")))}c.prototype._onFontLoaded=function(b){this.loaded&&!this.temp?b():this.loadCallbacks.push(b)};c.prototype._runCallbacks=function(b){var c=this.loadCallbacks.length-1;for(c;0<=
c;c--)this.loadCallbacks[c]();b&&(this.loadCallbacks.length=0)};return c});
define("Arstider/texts/Segment",[],function(){function f(c,b){this.text=c;this.styles=Arstider.checkIn(b,[]);this.xOffset=this.yOffset=this.width=0;this.isTab=!1}f.prototype.calculateWidth=function(c,b){this.isTab||(-1!=this.text.indexOf("<br>")?this.width=0:(c.save(),this.applyStyles(c,Arstider.clone(b)),this.width=c.measureText(this.text).width+this.xOffset,c.restore()))};f.prototype.applyStyles=function(c,b){c.textAlign="left";for(var f=0;f<this.styles.length;f++)this.styles[f].render(c,b,this.styles[f].rule,
this);c.font=(b.bold?"bold ":"")+(b.italic?"italic ":"")+b.size+" "+b.family};f.prototype.render=function(c,b,f,a,d,h){-1==this.text.indexOf("<br>")&&""!=this.text&&" "!=this.text&&(c.save(),this.applyStyles(c,Arstider.clone(b)),d&&c.strokeText(this.text,Arstider.chop(f+this.xOffset),Arstider.chop(a+this.yOffset)),h&&(d&&b.shadowColor&&(c.shadowColor=Arstider.defaultColor),c.fillText(this.text,Arstider.chop(f+this.xOffset),Arstider.chop(a+this.yOffset))),c.restore())};return f});
define("Arstider/tweens/Action",[],function(){function f(c,b){this.startTime=1;this.timesToRun=Arstider.checkIn(b,1);this.timesRan=0;this.time=this.startTime;this.callback=c;this.callbackOption=[Arstider.checkIn(b,null)]}f.prototype.rewind=function(){this.time=this.startTime;this.timesRan=0};f.prototype.step=function(c){if(this.timesToRun>this.timesRan||-1==this.timesToRun)this.callback.apply(c,this.callbackOption),this.timesRan++};return f});
define("Arstider/tweens/Animation",["Arstider/tweens/Transformation","Arstider/Easings"],function(f,c){function b(b,a,d,h,k){this.changes=[];var l,p;for(l in a)p=!1,b[l]instanceof Function||(l in b||(b[l]=0),"string"==typeof b[l]&&-1!=b[l].indexOf("#")&&"string"==typeof a[l]&&-1!=a[l].indexOf("#")&&(p=!0),this.changes.push(new f({property:l,start:b[l],end:a[l],isColor:p})));this.time=this.startTime=Arstider.checkIn(d,1E3);this.easing=Arstider.checkIn(h.bind(c),c.LINEAR);this.easeOpt=k}b.prototype.rewind=
function(){this.time=this.startTime};b.prototype.step=function(b){var a=this.changes.length-1,c=Arstider.min(this.time/this.startTime,1);for(a;0<=a;a--)this.changes[a].lastStep=b.target[this.changes[a].property],b.target[this.changes[a].property]=this.changes[a].isColor?this._stepColor(this.changes[a].end,this.changes[a].start,this.easing(c)):this.changes[a].end-(this.changes[a].end-this.changes[a].start)*this.easing(c,this.easeOpt)};b.prototype._stepColor=function(b,a,c){var f=parseInt(b.slice(1),
16);a=parseInt(a.slice(1),16);b=f>>16;var k=f>>8&255,f=f&255,l=a>>8&255,p=a&255;return"#"+(16777216+65536*(Arstider.chop(((a>>16)-b)*c)+b)+256*(Arstider.chop((l-k)*c)+k)+(Arstider.chop((p-f)*c)+f)).toString(16).slice(1)};b.prototype.stepBack=function(b){var a=this.changes.length-1;for(a;0<=a;a--)b.target[this.changes[a].property]=this.changes[a].lastStep};return b});
define("Arstider/tweens/Transformation",[],function(){return function(f){this.property=Arstider.checkIn(f.property,null);this.start=Arstider.checkIn(f.start,0);this.end=Arstider.checkIn(f.end,1);this.lastStep=Arstider.checkIn(f.start,0);this.isColor=Arstider.checkIn(f.isColor,!1)}});
